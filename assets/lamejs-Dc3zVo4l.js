var he={};function Ne(k){return new Int8Array(k)}function ue(k){return new Int16Array(k)}function be(k){return new Int32Array(k)}function pe(k){return new Float32Array(k)}function Oe(k){return new Float64Array(k)}function me(k){if(k.length==1)return pe(k[0]);var Z=k[0];k=k.slice(1);for(var O=[],J=0;J<Z;J++)O.push(me(k));return O}function ve(k){if(k.length==1)return be(k[0]);var Z=k[0];k=k.slice(1);for(var O=[],J=0;J<Z;J++)O.push(ve(k));return O}function ge(k){if(k.length==1)return ue(k[0]);var Z=k[0];k=k.slice(1);for(var O=[],J=0;J<Z;J++)O.push(ge(k));return O}function de(k){if(k.length==1)return new Array(k[0]);var Z=k[0];k=k.slice(1);for(var O=[],J=0;J<Z;J++)O.push(de(k));return O}var Me={};Me.fill=function(k,Z,O,J){if(arguments.length==2)for(var h1=0;h1<k.length;h1++)k[h1]=arguments[1];else for(var h1=Z;h1<O;h1++)k[h1]=J};var z0={};z0.arraycopy=function(k,Z,O,J,h1){for(var W=Z+h1;Z<W;)O[J++]=k[Z++]};z0.out={};z0.out.println=function(k){console.log(k)};z0.out.printf=function(){console.log.apply(console,arguments)};var sa={};sa.SQRT2=1.4142135623730951;sa.FAST_LOG10=function(k){return Math.log10(k)};sa.FAST_LOG10_X=function(k,Z){return Math.log10(k)*Z};function R0(k){this.ordinal=k}R0.short_block_allowed=new R0(0);R0.short_block_coupled=new R0(1);R0.short_block_dispensed=new R0(2);R0.short_block_forced=new R0(3);var Se={};Se.MAX_VALUE=34028235e31;function c0(k){this.ordinal=k}c0.vbr_off=new c0(0);c0.vbr_mt=new c0(1);c0.vbr_rh=new c0(2);c0.vbr_abr=new c0(3);c0.vbr_mtrh=new c0(4);c0.vbr_default=c0.vbr_mtrh;var He=function(k){},Q1={System:z0,VbrMode:c0,Float:Se,ShortBlock:R0,Util:sa,Arrays:Me,new_array_n:de,new_byte:Ne,new_double:Oe,new_float:pe,new_float_n:me,new_int:be,new_int_n:ve,new_short:ue,new_short_n:ge,assert:He},pa,Ya;function Ye(){if(Ya)return pa;Ya=1;var k=Q1,Z=k.System,O=k.Util,J=k.Arrays,h1=k.new_float,W=t0();function z(){var C=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*O.SQRT2*.5/2384e-9,.017876148*O.SQRT2*.5/2384e-9,.003134727*O.SQRT2*.5/2384e-9,.002457142*O.SQRT2*.5/2384e-9,971317e-9*O.SQRT2*.5/2384e-9,218868e-9*O.SQRT2*.5/2384e-9,101566e-9*O.SQRT2*.5/2384e-9,13828e-9*O.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],a1=12,u1=36,d=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],b=d[W.SHORT_TYPE],X=d[W.SHORT_TYPE],r1=d[W.SHORT_TYPE],G=d[W.SHORT_TYPE],s1=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function Q(h,g,a){for(var l=10,w=g+238-14-286,x=-15;x<0;x++){var L,A,E;L=C[l+-10],A=h[w+-224]*L,E=h[g+224]*L,L=C[l+-9],A+=h[w+-160]*L,E+=h[g+160]*L,L=C[l+-8],A+=h[w+-96]*L,E+=h[g+96]*L,L=C[l+-7],A+=h[w+-32]*L,E+=h[g+32]*L,L=C[l+-6],A+=h[w+32]*L,E+=h[g+-32]*L,L=C[l+-5],A+=h[w+96]*L,E+=h[g+-96]*L,L=C[l+-4],A+=h[w+160]*L,E+=h[g+-160]*L,L=C[l+-3],A+=h[w+224]*L,E+=h[g+-224]*L,L=C[l+-2],A+=h[g+-256]*L,E-=h[w+256]*L,L=C[l+-1],A+=h[g+-192]*L,E-=h[w+192]*L,L=C[l+0],A+=h[g+-128]*L,E-=h[w+128]*L,L=C[l+1],A+=h[g+-64]*L,E-=h[w+64]*L,L=C[l+2],A+=h[g+0]*L,E-=h[w+0]*L,L=C[l+3],A+=h[g+64]*L,E-=h[w+-64]*L,L=C[l+4],A+=h[g+128]*L,E-=h[w+-128]*L,L=C[l+5],A+=h[g+192]*L,E-=h[w+-192]*L,A*=C[l+6],L=E-A,a[30+x*2]=E+A,a[31+x*2]=C[l+7]*L,l+=18,g--,w++}{var A,E,_1,p;E=h[g+-16]*C[l+-10],A=h[g+-32]*C[l+-2],E+=(h[g+-48]-h[g+16])*C[l+-9],A+=h[g+-96]*C[l+-1],E+=(h[g+-80]+h[g+48])*C[l+-8],A+=h[g+-160]*C[l+0],E+=(h[g+-112]-h[g+80])*C[l+-7],A+=h[g+-224]*C[l+1],E+=(h[g+-144]+h[g+112])*C[l+-6],A-=h[g+32]*C[l+2],E+=(h[g+-176]-h[g+144])*C[l+-5],A-=h[g+96]*C[l+3],E+=(h[g+-208]+h[g+176])*C[l+-4],A-=h[g+160]*C[l+4],E+=(h[g+-240]-h[g+208])*C[l+-3],A-=h[g+224],_1=A-E,p=A+E,E=a[14],A=a[15]-E,a[31]=p+E,a[30]=_1+A,a[15]=_1-A,a[14]=p-E}{var t;t=a[28]-a[0],a[0]+=a[28],a[28]=t*C[l+-2*18+7],t=a[29]-a[1],a[1]+=a[29],a[29]=t*C[l+-2*18+7],t=a[26]-a[2],a[2]+=a[26],a[26]=t*C[l+-4*18+7],t=a[27]-a[3],a[3]+=a[27],a[27]=t*C[l+-4*18+7],t=a[24]-a[4],a[4]+=a[24],a[24]=t*C[l+-6*18+7],t=a[25]-a[5],a[5]+=a[25],a[25]=t*C[l+-6*18+7],t=a[22]-a[6],a[6]+=a[22],a[22]=t*O.SQRT2,t=a[23]-a[7],a[7]+=a[23],a[23]=t*O.SQRT2-a[7],a[7]-=a[6],a[22]-=a[7],a[23]-=a[22],t=a[6],a[6]=a[31]-t,a[31]=a[31]+t,t=a[7],a[7]=a[30]-t,a[30]=a[30]+t,t=a[22],a[22]=a[15]-t,a[15]=a[15]+t,t=a[23],a[23]=a[14]-t,a[14]=a[14]+t,t=a[20]-a[8],a[8]+=a[20],a[20]=t*C[l+-10*18+7],t=a[21]-a[9],a[9]+=a[21],a[21]=t*C[l+-10*18+7],t=a[18]-a[10],a[10]+=a[18],a[18]=t*C[l+-12*18+7],t=a[19]-a[11],a[11]+=a[19],a[19]=t*C[l+-12*18+7],t=a[16]-a[12],a[12]+=a[16],a[16]=t*C[l+-14*18+7],t=a[17]-a[13],a[13]+=a[17],a[17]=t*C[l+-14*18+7],t=-a[20]+a[24],a[20]+=a[24],a[24]=t*C[l+-12*18+7],t=-a[21]+a[25],a[21]+=a[25],a[25]=t*C[l+-12*18+7],t=a[4]-a[8],a[4]+=a[8],a[8]=t*C[l+-12*18+7],t=a[5]-a[9],a[5]+=a[9],a[9]=t*C[l+-12*18+7],t=a[0]-a[12],a[0]+=a[12],a[12]=t*C[l+-4*18+7],t=a[1]-a[13],a[1]+=a[13],a[13]=t*C[l+-4*18+7],t=a[16]-a[28],a[16]+=a[28],a[28]=t*C[l+-4*18+7],t=-a[17]+a[29],a[17]+=a[29],a[29]=t*C[l+-4*18+7],t=O.SQRT2*(a[2]-a[10]),a[2]+=a[10],a[10]=t,t=O.SQRT2*(a[3]-a[11]),a[3]+=a[11],a[11]=t,t=O.SQRT2*(-a[18]+a[26]),a[18]+=a[26],a[26]=t-a[18],t=O.SQRT2*(-a[19]+a[27]),a[19]+=a[27],a[27]=t-a[19],t=a[2],a[19]-=a[3],a[3]-=t,a[2]=a[31]-t,a[31]+=t,t=a[3],a[11]-=a[19],a[18]-=t,a[3]=a[30]-t,a[30]+=t,t=a[18],a[27]-=a[11],a[19]-=t,a[18]=a[15]-t,a[15]+=t,t=a[19],a[10]-=t,a[19]=a[14]-t,a[14]+=t,t=a[10],a[11]-=t,a[10]=a[23]-t,a[23]+=t,t=a[11],a[26]-=t,a[11]=a[22]-t,a[22]+=t,t=a[26],a[27]-=t,a[26]=a[7]-t,a[7]+=t,t=a[27],a[27]=a[6]-t,a[6]+=t,t=O.SQRT2*(a[0]-a[4]),a[0]+=a[4],a[4]=t,t=O.SQRT2*(a[1]-a[5]),a[1]+=a[5],a[5]=t,t=O.SQRT2*(a[16]-a[20]),a[16]+=a[20],a[20]=t,t=O.SQRT2*(a[17]-a[21]),a[17]+=a[21],a[21]=t,t=-O.SQRT2*(a[8]-a[12]),a[8]+=a[12],a[12]=t-a[8],t=-O.SQRT2*(a[9]-a[13]),a[9]+=a[13],a[13]=t-a[9],t=-O.SQRT2*(a[25]-a[29]),a[25]+=a[29],a[29]=t-a[25],t=-O.SQRT2*(a[24]+a[28]),a[24]-=a[28],a[28]=t-a[24],t=a[24]-a[16],a[24]=t,t=a[20]-t,a[20]=t,t=a[28]-t,a[28]=t,t=a[25]-a[17],a[25]=t,t=a[21]-t,a[21]=t,t=a[29]-t,a[29]=t,t=a[17]-a[1],a[17]=t,t=a[9]-t,a[9]=t,t=a[25]-t,a[25]=t,t=a[5]-t,a[5]=t,t=a[21]-t,a[21]=t,t=a[13]-t,a[13]=t,t=a[29]-t,a[29]=t,t=a[1]-a[0],a[1]=t,t=a[16]-t,a[16]=t,t=a[17]-t,a[17]=t,t=a[8]-t,a[8]=t,t=a[9]-t,a[9]=t,t=a[24]-t,a[24]=t,t=a[25]-t,a[25]=t,t=a[4]-t,a[4]=t,t=a[5]-t,a[5]=t,t=a[20]-t,a[20]=t,t=a[21]-t,a[21]=t,t=a[12]-t,a[12]=t,t=a[13]-t,a[13]=t,t=a[28]-t,a[28]=t,t=a[29]-t,a[29]=t,t=a[0],a[0]+=a[31],a[31]-=t,t=a[1],a[1]+=a[30],a[30]-=t,t=a[16],a[16]+=a[15],a[15]-=t,t=a[17],a[17]+=a[14],a[14]-=t,t=a[8],a[8]+=a[23],a[23]-=t,t=a[9],a[9]+=a[22],a[22]-=t,t=a[24],a[24]+=a[7],a[7]-=t,t=a[25],a[25]+=a[6],a[6]-=t,t=a[4],a[4]+=a[27],a[27]-=t,t=a[5],a[5]+=a[26],a[26]-=t,t=a[20],a[20]+=a[11],a[11]-=t,t=a[21],a[21]+=a[10],a[10]-=t,t=a[12],a[12]+=a[19],a[19]-=t,t=a[13],a[13]+=a[18],a[18]-=t,t=a[28],a[28]+=a[3],a[3]-=t,t=a[29],a[29]+=a[2],a[2]-=t}}function M(h,g){for(var a=0;a<3;a++){var l,w,x,L,A,E;L=h[g+2*3]*d[W.SHORT_TYPE][0]-h[g+5*3],l=h[g+0*3]*d[W.SHORT_TYPE][2]-h[g+3*3],w=L+l,x=L-l,L=h[g+5*3]*d[W.SHORT_TYPE][0]+h[g+2*3],l=h[g+3*3]*d[W.SHORT_TYPE][2]+h[g+0*3],A=L+l,E=-L+l,l=(h[g+1*3]*d[W.SHORT_TYPE][1]-h[g+4*3])*2069978111953089e-26,L=(h[g+4*3]*d[W.SHORT_TYPE][1]+h[g+1*3])*2069978111953089e-26,h[g+3*0]=w*190752519173728e-25+l,h[g+3*5]=-A*190752519173728e-25+L,x=x*.8660254037844387*1907525191737281e-26,A=A*.5*1907525191737281e-26+L,h[g+3*1]=x-A,h[g+3*2]=x+A,w=w*.5*1907525191737281e-26-l,E=E*.8660254037844387*1907525191737281e-26,h[g+3*3]=w+E,h[g+3*4]=w-E,g++}}function f(h,g,a){var l,w;{var x,L,A,E,_1,p,t,v;x=a[17]-a[9],A=a[15]-a[11],E=a[14]-a[12],_1=a[0]+a[8],p=a[1]+a[7],t=a[2]+a[6],v=a[3]+a[5],h[g+17]=_1+t-v-(p-a[4]),w=(_1+t-v)*X[19]+(p-a[4]),l=(x-A-E)*X[18],h[g+5]=l+w,h[g+6]=l-w,L=(a[16]-a[10])*X[18],p=p*X[19]+a[4],l=x*X[12]+L+A*X[13]+E*X[14],w=-_1*X[16]+p-t*X[17]+v*X[15],h[g+1]=l+w,h[g+2]=l-w,l=x*X[13]-L-A*X[14]+E*X[12],w=-_1*X[17]+p-t*X[15]+v*X[16],h[g+9]=l+w,h[g+10]=l-w,l=x*X[14]-L+A*X[12]-E*X[13],w=_1*X[15]-p+t*X[16]-v*X[17],h[g+13]=l+w,h[g+14]=l-w}{var y,V,P,q,R,n,r,e;y=a[8]-a[0],P=a[6]-a[2],q=a[5]-a[3],R=a[17]+a[9],n=a[16]+a[10],r=a[15]+a[11],e=a[14]+a[12],h[g+0]=R+r+e+(n+a[13]),l=(R+r+e)*X[19]-(n+a[13]),w=(y-P+q)*X[18],h[g+11]=l+w,h[g+12]=l-w,V=(a[7]-a[1])*X[18],n=a[13]-n*X[19],l=R*X[15]-n+r*X[16]+e*X[17],w=y*X[14]+V+P*X[12]+q*X[13],h[g+3]=l+w,h[g+4]=l-w,l=-R*X[17]+n-r*X[15]-e*X[16],w=y*X[13]+V-P*X[14]-q*X[12],h[g+7]=l+w,h[g+8]=l-w,l=-R*X[16]+n-r*X[17]-e*X[15],w=y*X[12]-V+P*X[13]-q*X[14],h[g+15]=l+w,h[g+16]=l-w}}this.mdct_sub48=function(h,g,a){for(var l=g,w=286,x=0;x<h.channels_out;x++){for(var L=0;L<h.mode_gr;L++){for(var A,E=h.l3_side.tt[L][x],_1=E.xr,p=0,t=h.sb_sample[x][1-L],v=0,y=0;y<18/2;y++)for(Q(l,w,t[v]),Q(l,w+32,t[v+1]),v+=2,w+=64,A=1;A<32;A+=2)t[v-1][A]*=-1;for(A=0;A<32;A++,p+=18){var V=E.block_type,P=h.sb_sample[x][L],q=h.sb_sample[x][1-L];if(E.mixed_block_flag!=0&&A<2&&(V=0),h.amp_filter[A]<1e-12)J.fill(_1,p+0,p+18,0);else{if(h.amp_filter[A]<1)for(var y=0;y<18;y++)q[y][s1[A]]*=h.amp_filter[A];if(V==W.SHORT_TYPE){for(var y=-a1/4;y<0;y++){var R=d[W.SHORT_TYPE][y+3];_1[p+y*3+9]=P[9+y][s1[A]]*R-P[8-y][s1[A]],_1[p+y*3+18]=P[14-y][s1[A]]*R+P[15+y][s1[A]],_1[p+y*3+10]=P[15+y][s1[A]]*R-P[14-y][s1[A]],_1[p+y*3+19]=q[2-y][s1[A]]*R+q[3+y][s1[A]],_1[p+y*3+11]=q[3+y][s1[A]]*R-q[2-y][s1[A]],_1[p+y*3+20]=q[8-y][s1[A]]*R+q[9+y][s1[A]]}M(_1,p)}else{for(var n=h1(18),y=-u1/4;y<0;y++){var r,e;r=d[V][y+27]*q[y+9][s1[A]]+d[V][y+36]*q[8-y][s1[A]],e=d[V][y+9]*P[y+9][s1[A]]-d[V][y+18]*P[8-y][s1[A]],n[y+9]=r-e*b[3+y+9],n[y+18]=r*b[3+y+9]+e}f(_1,p,n)}}if(V!=W.SHORT_TYPE&&A!=0)for(var y=7;y>=0;--y){var _,u;_=_1[p+y]*r1[20+y]+_1[p+-1-y]*G[28+y],u=_1[p+y]*G[28+y]-_1[p+-1-y]*r1[20+y],_1[p+-1-y]=_,_1[p+y]=u}}}if(l=a,w=286,h.mode_gr==1)for(var H=0;H<18;H++)Z.arraycopy(h.sb_sample[x][1][H],0,h.sb_sample[x][0][H],0,32)}}}return pa=z,pa}var ma,Ca;function we(){if(Ca)return ma;Ca=1;var k=t0(),Z=Q1,O=Z.System,J=Z.new_float,h1=Z.new_float_n;function W(){this.l=J(k.SBMAX_l),this.s=h1([k.SBMAX_s,3]);var z=this;this.assign=function(C){O.arraycopy(C.l,0,z.l,0,k.SBMAX_l);for(var a1=0;a1<k.SBMAX_s;a1++)for(var u1=0;u1<3;u1++)z.s[a1][u1]=C.s[a1][u1]}}return ma=W,ma}var va,ja;function Ce(){if(ja)return va;ja=1;var k=we();function Z(){this.thm=new k,this.en=new k}return va=Z,va}function d0(k){var Z=k;this.ordinal=function(){return Z}}d0.STEREO=new d0(0);d0.JOINT_STEREO=new d0(1);d0.DUAL_CHANNEL=new d0(2);d0.MONO=new d0(3);d0.NOT_SET=new d0(4);var W0=d0,ga,qa;function t0(){if(qa)return ga;qa=1;var k=Q1,Z=k.System,O=k.VbrMode,J=k.new_array_n,h1=k.new_float,W=k.new_float_n,z=k.new_int,C=k.assert;a1.ENCDELAY=576,a1.POSTDELAY=1152,a1.MDCTDELAY=48,a1.FFTOFFSET=224+a1.MDCTDELAY,a1.DECDELAY=528,a1.SBLIMIT=32,a1.CBANDS=64,a1.SBPSY_l=21,a1.SBPSY_s=12,a1.SBMAX_l=22,a1.SBMAX_s=13,a1.PSFB21=6,a1.PSFB12=6,a1.BLKSIZE=1024,a1.HBLKSIZE=a1.BLKSIZE/2+1,a1.BLKSIZE_s=256,a1.HBLKSIZE_s=a1.BLKSIZE_s/2+1,a1.NORM_TYPE=0,a1.START_TYPE=1,a1.SHORT_TYPE=2,a1.STOP_TYPE=3,a1.MPG_MD_LR_LR=0,a1.MPG_MD_LR_I=1,a1.MPG_MD_MS_LR=2,a1.MPG_MD_MS_I=3,a1.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function a1(){var u1=Ye(),d=Ce(),b=W0,X=a1.FFTOFFSET,r1=a1.MPG_MD_MS_LR,G=null;this.psy=null;var s1=null,Q=null,M=null;this.setModules=function(l,w,x,L){G=l,this.psy=w,s1=w,Q=L,M=x};var f=new u1;function h(l){var w,x;if(l.ATH.useAdjust==0){l.ATH.adjust=1;return}if(x=l.loudness_sq[0][0],w=l.loudness_sq[1][0],l.channels_out==2?(x+=l.loudness_sq[0][1],w+=l.loudness_sq[1][1]):(x+=x,w+=w),l.mode_gr==2&&(x=Math.max(x,w)),x*=.5,x*=l.ATH.aaSensitivityP,x>.03125)l.ATH.adjust>=1?l.ATH.adjust=1:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=1;else{var L=31.98*x+625e-6;l.ATH.adjust>=L?(l.ATH.adjust*=L*.075+.925,l.ATH.adjust<L&&(l.ATH.adjust=L)):l.ATH.adjustLimit>=L?l.ATH.adjust=L:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=L}}function g(l){var w,x;for(C(0<=l.bitrate_index&&l.bitrate_index<16),C(0<=l.mode_ext&&l.mode_ext<4),l.bitrate_stereoMode_Hist[l.bitrate_index][4]++,l.bitrate_stereoMode_Hist[15][4]++,l.channels_out==2&&(l.bitrate_stereoMode_Hist[l.bitrate_index][l.mode_ext]++,l.bitrate_stereoMode_Hist[15][l.mode_ext]++),w=0;w<l.mode_gr;++w)for(x=0;x<l.channels_out;++x){var L=l.l3_side.tt[w][x].block_type|0;l.l3_side.tt[w][x].mixed_block_flag!=0&&(L=4),l.bitrate_blockType_Hist[l.bitrate_index][L]++,l.bitrate_blockType_Hist[l.bitrate_index][5]++,l.bitrate_blockType_Hist[15][L]++,l.bitrate_blockType_Hist[15][5]++}}function a(l,w){var x=l.internal_flags,L,A;if(x.lame_encode_frame_init==0){var E,_1,p=h1(2014),t=h1(2014);for(x.lame_encode_frame_init=1,E=0,_1=0;E<286+576*(1+x.mode_gr);++E)E<576*x.mode_gr?(p[E]=0,x.channels_out==2&&(t[E]=0)):(p[E]=w[0][_1],x.channels_out==2&&(t[E]=w[1][_1]),++_1);for(A=0;A<x.mode_gr;A++)for(L=0;L<x.channels_out;L++)x.l3_side.tt[A][L].block_type=a1.SHORT_TYPE;f.mdct_sub48(x,p,t),C(576>=a1.FFTOFFSET),C(x.mf_size>=a1.BLKSIZE+l.framesize-a1.FFTOFFSET),C(x.mf_size>=512+l.framesize-32)}}this.lame_encode_mp3_frame=function(l,w,x,L,A,E){var _1,p=J([2,2]);p[0][0]=new d,p[0][1]=new d,p[1][0]=new d,p[1][1]=new d;var t=J([2,2]);t[0][0]=new d,t[0][1]=new d,t[1][0]=new d,t[1][1]=new d;var v,y=[null,null],V=l.internal_flags,P=W([2,4]),q=[.5,.5],R=[[0,0],[0,0]],n=[[0,0],[0,0]],r,e,_;if(y[0]=w,y[1]=x,V.lame_encode_frame_init==0&&a(l,y),V.padding=0,(V.slot_lag-=V.frac_SpF)<0&&(V.slot_lag+=l.out_samplerate,V.padding=1),V.psymodel!=0){var u,H=[null,null],U=0,B=z(2);for(_=0;_<V.mode_gr;_++){for(e=0;e<V.channels_out;e++)H[e]=y[e],U=576+_*576-a1.FFTOFFSET;if(l.VBR==O.vbr_mtrh||l.VBR==O.vbr_mt?u=s1.L3psycho_anal_vbr(l,H,U,_,p,t,R[_],n[_],P[_],B):u=s1.L3psycho_anal_ns(l,H,U,_,p,t,R[_],n[_],P[_],B),u!=0)return-4;for(l.mode==b.JOINT_STEREO&&(q[_]=P[_][2]+P[_][3],q[_]>0&&(q[_]=P[_][3]/q[_])),e=0;e<V.channels_out;e++){var Y=V.l3_side.tt[_][e];Y.block_type=B[e],Y.mixed_block_flag=0}}}else for(_=0;_<V.mode_gr;_++)for(e=0;e<V.channels_out;e++)V.l3_side.tt[_][e].block_type=a1.NORM_TYPE,V.l3_side.tt[_][e].mixed_block_flag=0,n[_][e]=R[_][e]=700;if(h(V),f.mdct_sub48(V,y[0],y[1]),V.mode_ext=a1.MPG_MD_LR_LR,l.force_ms)V.mode_ext=a1.MPG_MD_MS_LR;else if(l.mode==b.JOINT_STEREO){var n1=0,c1=0;for(_=0;_<V.mode_gr;_++)for(e=0;e<V.channels_out;e++)n1+=n[_][e],c1+=R[_][e];if(n1<=1*c1){var g1=V.l3_side.tt[0],w1=V.l3_side.tt[V.mode_gr-1];g1[0].block_type==g1[1].block_type&&w1[0].block_type==w1[1].block_type&&(V.mode_ext=a1.MPG_MD_MS_LR)}}if(V.mode_ext==r1?(v=t,r=n):(v=p,r=R),l.analysis&&V.pinfo!=null)for(_=0;_<V.mode_gr;_++)for(e=0;e<V.channels_out;e++)V.pinfo.ms_ratio[_]=V.ms_ratio[_],V.pinfo.ms_ener_ratio[_]=q[_],V.pinfo.blocktype[_][e]=V.l3_side.tt[_][e].block_type,V.pinfo.pe[_][e]=r[_][e],Z.arraycopy(V.l3_side.tt[_][e].xr,0,V.pinfo.xr[_][e],0,576),V.mode_ext==r1&&(V.pinfo.ers[_][e]=V.pinfo.ers[_][e+2],Z.arraycopy(V.pinfo.energy[_][e+2],0,V.pinfo.energy[_][e],0,V.pinfo.energy[_][e].length));if(l.VBR==O.vbr_off||l.VBR==O.vbr_abr){var d1,M1;for(d1=0;d1<18;d1++)V.nsPsy.pefirbuf[d1]=V.nsPsy.pefirbuf[d1+1];for(M1=0,_=0;_<V.mode_gr;_++)for(e=0;e<V.channels_out;e++)M1+=r[_][e];for(V.nsPsy.pefirbuf[18]=M1,M1=V.nsPsy.pefirbuf[9],d1=0;d1<9;d1++)M1+=(V.nsPsy.pefirbuf[d1]+V.nsPsy.pefirbuf[18-d1])*a1.fircoef[d1];for(M1=670*5*V.mode_gr*V.channels_out/M1,_=0;_<V.mode_gr;_++)for(e=0;e<V.channels_out;e++)r[_][e]*=M1}if(V.iteration_loop.iteration_loop(l,r,q,v),G.format_bitstream(l),_1=G.copy_buffer(V,L,A,E,1),l.bWriteVbrTag&&Q.addVbrFrame(l),l.analysis&&V.pinfo!=null){for(e=0;e<V.channels_out;e++){var T1;for(T1=0;T1<X;T1++)V.pinfo.pcmdata[e][T1]=V.pinfo.pcmdata[e][T1+l.framesize];for(T1=X;T1<1600;T1++)V.pinfo.pcmdata[e][T1]=y[e][T1-X]}M.set_frame_pinfo(l,v)}return g(V),_1}}return ga=a1,ga}var Re=Q1,Fa=Re.Util,Za=Re.new_float,U1=t0();function je(){var k=Za(U1.BLKSIZE),Z=Za(U1.BLKSIZE_s/2),O=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function J(W,z,C){var a1=0,u1,d,b;C<<=1;var X=z+C;u1=4;do{var r1,G,s1,Q,M,f,h;h=u1>>1,Q=u1,M=u1<<1,f=M+Q,u1=M<<1,d=z,b=d+h;do{var g,a,l,w;a=W[d+0]-W[d+Q],g=W[d+0]+W[d+Q],w=W[d+M]-W[d+f],l=W[d+M]+W[d+f],W[d+M]=g-l,W[d+0]=g+l,W[d+f]=a-w,W[d+Q]=a+w,a=W[b+0]-W[b+Q],g=W[b+0]+W[b+Q],w=Fa.SQRT2*W[b+f],l=Fa.SQRT2*W[b+M],W[b+M]=g-l,W[b+0]=g+l,W[b+f]=a-w,W[b+Q]=a+w,b+=u1,d+=u1}while(d<X);for(G=O[a1+0],r1=O[a1+1],s1=1;s1<h;s1++){var x,L;x=1-2*r1*r1,L=2*r1*G,d=z+s1,b=z+Q-s1;do{var A,E,_1,g,a,p,l,t,w,v;E=L*W[d+Q]-x*W[b+Q],A=x*W[d+Q]+L*W[b+Q],a=W[d+0]-A,g=W[d+0]+A,p=W[b+0]-E,_1=W[b+0]+E,E=L*W[d+f]-x*W[b+f],A=x*W[d+f]+L*W[b+f],w=W[d+M]-A,l=W[d+M]+A,v=W[b+M]-E,t=W[b+M]+E,E=r1*l-G*v,A=G*l+r1*v,W[d+M]=g-A,W[d+0]=g+A,W[b+f]=p-E,W[b+Q]=p+E,E=G*t-r1*w,A=r1*t+G*w,W[b+M]=_1-A,W[b+0]=_1+A,W[d+f]=a-E,W[d+Q]=a+E,b+=u1,d+=u1}while(d<X);x=G,G=x*O[a1+0]-r1*O[a1+1],r1=x*O[a1+1]+r1*O[a1+0]}a1+=2}while(u1<C)}var h1=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(W,z,C,a1,u1){for(var d=0;d<3;d++){var b=U1.BLKSIZE_s/2,X=65535&576/3*(d+1),r1=U1.BLKSIZE_s/8-1;do{var G,s1,Q,M,f,h=h1[r1<<2]&255;G=Z[h]*a1[C][u1+h+X],f=Z[127-h]*a1[C][u1+h+X+128],s1=G-f,G=G+f,Q=Z[h+64]*a1[C][u1+h+X+64],f=Z[63-h]*a1[C][u1+h+X+192],M=Q-f,Q=Q+f,b-=4,z[d][b+0]=G+Q,z[d][b+2]=G-Q,z[d][b+1]=s1+M,z[d][b+3]=s1-M,G=Z[h+1]*a1[C][u1+h+X+1],f=Z[126-h]*a1[C][u1+h+X+129],s1=G-f,G=G+f,Q=Z[h+65]*a1[C][u1+h+X+65],f=Z[62-h]*a1[C][u1+h+X+193],M=Q-f,Q=Q+f,z[d][b+U1.BLKSIZE_s/2+0]=G+Q,z[d][b+U1.BLKSIZE_s/2+2]=G-Q,z[d][b+U1.BLKSIZE_s/2+1]=s1+M,z[d][b+U1.BLKSIZE_s/2+3]=s1-M}while(--r1>=0);J(z[d],b,U1.BLKSIZE_s/2)}},this.fft_long=function(W,z,C,a1,u1){var d=U1.BLKSIZE/8-1,b=U1.BLKSIZE/2;do{var X,r1,G,s1,Q,M=h1[d]&255;X=k[M]*a1[C][u1+M],Q=k[M+512]*a1[C][u1+M+512],r1=X-Q,X=X+Q,G=k[M+256]*a1[C][u1+M+256],Q=k[M+768]*a1[C][u1+M+768],s1=G-Q,G=G+Q,b-=4,z[b+0]=X+G,z[b+2]=X-G,z[b+1]=r1+s1,z[b+3]=r1-s1,X=k[M+1]*a1[C][u1+M+1],Q=k[M+513]*a1[C][u1+M+513],r1=X-Q,X=X+Q,G=k[M+257]*a1[C][u1+M+257],Q=k[M+769]*a1[C][u1+M+769],s1=G-Q,G=G+Q,z[b+U1.BLKSIZE/2+0]=X+G,z[b+U1.BLKSIZE/2+2]=X-G,z[b+U1.BLKSIZE/2+1]=r1+s1,z[b+U1.BLKSIZE/2+3]=r1-s1}while(--d>=0);J(z,b,U1.BLKSIZE/2)},this.init_fft=function(W){for(var z=0;z<U1.BLKSIZE;z++)k[z]=.42-.5*Math.cos(2*Math.PI*(z+.5)/U1.BLKSIZE)+.08*Math.cos(4*Math.PI*(z+.5)/U1.BLKSIZE);for(var z=0;z<U1.BLKSIZE_s/2;z++)Z[z]=.5*(1-Math.cos(2*Math.PI*(z+.5)/U1.BLKSIZE_s))}}var qe=je,A0=Q1,L0=A0.VbrMode,Ga=A0.Float,D0=A0.ShortBlock,n0=A0.Util,Fe=A0.Arrays,$1=A0.new_float,u0=A0.new_float_n,E0=A0.new_int,X1=A0.assert,Ze=qe,t1=t0();function Ge(){var k=W0,Z=new Ze,O=2.302585092994046,J=2,h1=16,W=2,z=16,C=.34,a1=1/(14752*14752)/(t1.BLKSIZE/2),u1=.01,d=.8,b=.6,X=.3,r1=3.5,G=21,s1=.2302585093;function Q(o,c){for(var S=0,T=0;T<t1.BLKSIZE/2;++T)S+=o[T]*c.ATH.eql_w[T];return S*=a1,S}function M(o,c,S,T,D,m,N,j,I,e1,F){var $=o.internal_flags;if(I<2)Z.fft_long($,T[D],I,e1,F),Z.fft_short($,m[N],I,e1,F);else if(I==2){for(var b1=t1.BLKSIZE-1;b1>=0;--b1){var y1=T[D+0][b1],i1=T[D+1][b1];T[D+0][b1]=(y1+i1)*n0.SQRT2*.5,T[D+1][b1]=(y1-i1)*n0.SQRT2*.5}for(var x1=2;x1>=0;--x1)for(var b1=t1.BLKSIZE_s-1;b1>=0;--b1){var y1=m[N+0][x1][b1],i1=m[N+1][x1][b1];m[N+0][x1][b1]=(y1+i1)*n0.SQRT2*.5,m[N+1][x1][b1]=(y1-i1)*n0.SQRT2*.5}}c[0]=T[D+0][0],c[0]*=c[0];for(var b1=t1.BLKSIZE/2-1;b1>=0;--b1){var K=T[D+0][t1.BLKSIZE/2-b1],S1=T[D+0][t1.BLKSIZE/2+b1];c[t1.BLKSIZE/2-b1]=(K*K+S1*S1)*.5}for(var x1=2;x1>=0;--x1){S[x1][0]=m[N+0][x1][0],S[x1][0]*=S[x1][0];for(var b1=t1.BLKSIZE_s/2-1;b1>=0;--b1){var K=m[N+0][x1][t1.BLKSIZE_s/2-b1],S1=m[N+0][x1][t1.BLKSIZE_s/2+b1];S[x1][t1.BLKSIZE_s/2-b1]=(K*K+S1*S1)*.5}}{for(var N1=0,b1=11;b1<t1.HBLKSIZE;b1++)N1+=c[b1];$.tot_ener[I]=N1}if(o.analysis){for(var b1=0;b1<t1.HBLKSIZE;b1++)$.pinfo.energy[j][I][b1]=$.pinfo.energy_save[I][b1],$.pinfo.energy_save[I][b1]=c[b1];$.pinfo.pe[j][I]=$.pe[I]}o.athaa_loudapprox==2&&I<2&&($.loudness_sq[j][I]=$.loudness_sq_save[I],$.loudness_sq_save[I]=Q(c,$))}var f=8,h=23,g=15,a,l,w,x=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function L(){a=Math.pow(10,(f+1)/16),l=Math.pow(10,(h+1)/16),w=Math.pow(10,g/10)}var A=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],E=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],_1=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function p(o,c,S,T,D,m){var N;if(c>o)if(c<o*l)N=c/o;else return o+c;else{if(o>=c*l)return o+c;N=o/c}if(o+=c,T+3<=6){if(N>=a)return o;var j=0|n0.FAST_LOG10_X(N,16);return o*E[j]}var j=0|n0.FAST_LOG10_X(N,16);if(c=D.ATH.cb_l[S]*D.ATH.adjust,o<w*c){if(o>c){var I,e1;return I=1,j<=13&&(I=_1[j]),e1=n0.FAST_LOG10_X(o/c,10/15),o*((A[j]-I)*e1+I)}return j>13?o:o*_1[j]}return o*A[j]}var t=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function v(o,c,S){var T;if(o<0&&(o=0),c<0&&(c=0),o<=0)return c;if(c<=0)return o;if(c>o?T=c/o:T=o/c,-2<=S&&S<=2){if(T>=a)return o+c;var D=0|n0.FAST_LOG10_X(T,16);return(o+c)*t[D]}return T<l?o+c:(o<c&&(o=c),o)}function y(o,c){var S=o.internal_flags;if(S.channels_out>1){for(var T=0;T<t1.SBMAX_l;T++){var D=S.thm[0].l[T],m=S.thm[1].l[T];S.thm[0].l[T]+=m*c,S.thm[1].l[T]+=D*c}for(var T=0;T<t1.SBMAX_s;T++)for(var N=0;N<3;N++){var D=S.thm[0].s[T][N],m=S.thm[1].s[T][N];S.thm[0].s[T][N]+=m*c,S.thm[1].s[T][N]+=D*c}}}function V(o){for(var c=0;c<t1.SBMAX_l;c++)if(!(o.thm[0].l[c]>1.58*o.thm[1].l[c]||o.thm[1].l[c]>1.58*o.thm[0].l[c])){var S=o.mld_l[c]*o.en[3].l[c],T=Math.max(o.thm[2].l[c],Math.min(o.thm[3].l[c],S));S=o.mld_l[c]*o.en[2].l[c];var D=Math.max(o.thm[3].l[c],Math.min(o.thm[2].l[c],S));o.thm[2].l[c]=T,o.thm[3].l[c]=D}for(var c=0;c<t1.SBMAX_s;c++)for(var m=0;m<3;m++)if(!(o.thm[0].s[c][m]>1.58*o.thm[1].s[c][m]||o.thm[1].s[c][m]>1.58*o.thm[0].s[c][m])){var S=o.mld_s[c]*o.en[3].s[c][m],T=Math.max(o.thm[2].s[c][m],Math.min(o.thm[3].s[c][m],S));S=o.mld_s[c]*o.en[2].s[c][m];var D=Math.max(o.thm[3].s[c][m],Math.min(o.thm[2].s[c][m],S));o.thm[2].s[c][m]=T,o.thm[3].s[c][m]=D}}function P(o,c,S){var T=c,D=Math.pow(10,S);c*=2,T*=2;for(var m=0;m<t1.SBMAX_l;m++){var N,j,I,e1;if(e1=o.ATH.cb_l[o.bm_l[m]]*D,N=Math.min(Math.max(o.thm[0].l[m],e1),Math.max(o.thm[1].l[m],e1)),j=Math.max(o.thm[2].l[m],e1),I=Math.max(o.thm[3].l[m],e1),N*c<j+I){var F=N*T/(j+I);j*=F,I*=F}o.thm[2].l[m]=Math.min(j,o.thm[2].l[m]),o.thm[3].l[m]=Math.min(I,o.thm[3].l[m])}D*=t1.BLKSIZE_s/t1.BLKSIZE;for(var m=0;m<t1.SBMAX_s;m++)for(var $=0;$<3;$++){var N,j,I,e1;if(e1=o.ATH.cb_s[o.bm_s[m]]*D,N=Math.min(Math.max(o.thm[0].s[m][$],e1),Math.max(o.thm[1].s[m][$],e1)),j=Math.max(o.thm[2].s[m][$],e1),I=Math.max(o.thm[3].s[m][$],e1),N*c<j+I){var F=N*c/(j+I);j*=F,I*=F}o.thm[2].s[m][$]=Math.min(o.thm[2].s[m][$],j),o.thm[3].s[m][$]=Math.min(o.thm[3].s[m][$],I)}}function q(o,c,S,T,D){var m,N,j=0,I=0;for(m=N=0;m<t1.SBMAX_s;++N,++m){for(var e1=o.bo_s[m],F=o.npart_s,$=e1<F?e1:F;N<$;)X1(c[N]>=0),X1(S[N]>=0),j+=c[N],I+=S[N],N++;if(o.en[T].s[m][D]=j,o.thm[T].s[m][D]=I,N>=F){++m;break}X1(c[N]>=0),X1(S[N]>=0);{var b1=o.PSY.bo_s_weight[m],y1=1-b1;j=b1*c[N],I=b1*S[N],o.en[T].s[m][D]+=j,o.thm[T].s[m][D]+=I,j=y1*c[N],I=y1*S[N]}}for(;m<t1.SBMAX_s;++m)o.en[T].s[m][D]=0,o.thm[T].s[m][D]=0}function R(o,c,S,T){var D,m,N=0,j=0;for(D=m=0;D<t1.SBMAX_l;++m,++D){for(var I=o.bo_l[D],e1=o.npart_l,F=I<e1?I:e1;m<F;)X1(c[m]>=0),X1(S[m]>=0),N+=c[m],j+=S[m],m++;if(o.en[T].l[D]=N,o.thm[T].l[D]=j,m>=e1){++D;break}X1(c[m]>=0),X1(S[m]>=0);{var $=o.PSY.bo_l_weight[D],b1=1-$;N=$*c[m],j=$*S[m],o.en[T].l[D]+=N,o.thm[T].l[D]+=j,N=b1*c[m],j=b1*S[m]}}for(;D<t1.SBMAX_l;++D)o.en[T].l[D]=0,o.thm[T].l[D]=0}function n(o,c,S,T,D,m){var N=o.internal_flags,j,I;for(I=j=0;I<N.npart_s;++I){for(var e1=0,F=N.numlines_s[I],$=0;$<F;++$,++j){var b1=c[m][j];e1+=b1}S[I]=e1}for(X1(I==N.npart_s),j=I=0;I<N.npart_s;I++){var y1=N.s3ind_s[I][0],i1=N.s3_ss[j++]*S[y1];for(++y1;y1<=N.s3ind_s[I][1];)i1+=N.s3_ss[j]*S[y1],++j,++y1;{var x1=W*N.nb_s1[D][I];T[I]=Math.min(i1,x1)}if(N.blocktype_old[D&1]==t1.SHORT_TYPE){var x1=z*N.nb_s2[D][I],K=T[I];T[I]=Math.min(x1,K)}N.nb_s2[D][I]=N.nb_s1[D][I],N.nb_s1[D][I]=i1,X1(T[I]>=0)}for(;I<=t1.CBANDS;++I)S[I]=0,T[I]=0}function r(o,c,S,T){var D=o.internal_flags;o.short_blocks==D0.short_block_coupled&&!(c[0]!=0&&c[1]!=0)&&(c[0]=c[1]=0);for(var m=0;m<D.channels_out;m++)T[m]=t1.NORM_TYPE,o.short_blocks==D0.short_block_dispensed&&(c[m]=1),o.short_blocks==D0.short_block_forced&&(c[m]=0),c[m]!=0?(X1(D.blocktype_old[m]!=t1.START_TYPE),D.blocktype_old[m]==t1.SHORT_TYPE&&(T[m]=t1.STOP_TYPE)):(T[m]=t1.SHORT_TYPE,D.blocktype_old[m]==t1.NORM_TYPE&&(D.blocktype_old[m]=t1.START_TYPE),D.blocktype_old[m]==t1.STOP_TYPE&&(D.blocktype_old[m]=t1.SHORT_TYPE)),S[m]=D.blocktype_old[m],D.blocktype_old[m]=T[m]}function e(o,c,S){return S>=1?o:S<=0?c:c>0?Math.pow(o/c,S)*c:0}var _=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function u(o,c){for(var S=309.07,T=0;T<t1.SBMAX_s-1;T++)for(var D=0;D<3;D++){var m=o.thm.s[T][D];if(m>0){var N=m*c,j=o.en.s[T][D];j>N&&(j>N*1e10?S+=_[T]*(10*O):S+=_[T]*n0.FAST_LOG10(j/N))}}return S}var H=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function U(o,c){for(var S=281.0575,T=0;T<t1.SBMAX_l-1;T++){var D=o.thm.l[T];if(D>0){var m=D*c,N=o.en.l[T];N>m&&(N>m*1e10?S+=H[T]*(10*O):S+=H[T]*n0.FAST_LOG10(N/m))}}return S}function B(o,c,S,T,D){var m,N;for(m=N=0;m<o.npart_l;++m){var j=0,I=0,e1;for(e1=0;e1<o.numlines_l[m];++e1,++N){var F=c[N];j+=F,I<F&&(I=F)}S[m]=j,T[m]=I,D[m]=j*o.rnumlines_l[m],X1(o.rnumlines_l[m]>=0),X1(S[m]>=0),X1(T[m]>=0),X1(D[m]>=0)}}function Y(o,c,S,T){var D=x.length-1,m=0,N=S[m]+S[m+1];if(N>0){var j=c[m];j<c[m+1]&&(j=c[m+1]),X1(o.numlines_l[m]+o.numlines_l[m+1]-1>0),N=20*(j*2-N)/(N*(o.numlines_l[m]+o.numlines_l[m+1]-1));var I=0|N;I>D&&(I=D),T[m]=I}else T[m]=0;for(m=1;m<o.npart_l-1;m++)if(N=S[m-1]+S[m]+S[m+1],N>0){var j=c[m-1];j<c[m]&&(j=c[m]),j<c[m+1]&&(j=c[m+1]),X1(o.numlines_l[m-1]+o.numlines_l[m]+o.numlines_l[m+1]-1>0),N=20*(j*3-N)/(N*(o.numlines_l[m-1]+o.numlines_l[m]+o.numlines_l[m+1]-1));var I=0|N;I>D&&(I=D),T[m]=I}else T[m]=0;if(X1(m==o.npart_l-1),N=S[m-1]+S[m],N>0){var j=c[m-1];j<c[m]&&(j=c[m]),X1(o.numlines_l[m-1]+o.numlines_l[m]-1>0),N=20*(j*2-N)/(N*(o.numlines_l[m-1]+o.numlines_l[m]-1));var I=0|N;I>D&&(I=D),T[m]=I}else T[m]=0;X1(m==o.npart_l-1)}var n1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(o,c,S,T,D,m,N,j,I,e1){var F=o.internal_flags,$=u0([2,t1.BLKSIZE]),b1=u0([2,3,t1.BLKSIZE_s]),y1=$1(t1.CBANDS+1),i1=$1(t1.CBANDS+1),x1=$1(t1.CBANDS+2),K=E0(2),S1=E0(2),N1,o1,A1,l1,V1,q1,m1,D1,O1=u0([2,576]),F1,o0=E0(t1.CBANDS+2),J1=E0(t1.CBANDS+2);for(Fe.fill(J1,0),N1=F.channels_out,o.mode==k.JOINT_STEREO&&(N1=4),o.VBR==L0.vbr_off?F1=F.ResvMax==0?0:F.ResvSize/F.ResvMax*.5:o.VBR==L0.vbr_rh||o.VBR==L0.vbr_mtrh||o.VBR==L0.vbr_mt?F1=.6:F1=1,o1=0;o1<F.channels_out;o1++){var Z1=c[o1],s0=S+576-350-G+192;for(l1=0;l1<576;l1++){var l0,f0;for(l0=Z1[s0+l1+10],f0=0,V1=0;V1<(G-1)/2-1;V1+=2)l0+=n1[V1]*(Z1[s0+l1+V1]+Z1[s0+l1+G-V1]),f0+=n1[V1+1]*(Z1[s0+l1+V1+1]+Z1[s0+l1+G-V1-1]);O1[o1][l1]=l0+f0}D[T][o1].en.assign(F.en[o1]),D[T][o1].thm.assign(F.thm[o1]),N1>2&&(m[T][o1].en.assign(F.en[o1+2]),m[T][o1].thm.assign(F.thm[o1+2]))}for(o1=0;o1<N1;o1++){var p0,m0,e0=$1(12),M0=[0,0,0,0],I0=$1(12),ia=1,La,Da=$1(t1.CBANDS),Xa=$1(t1.CBANDS),G1=[0,0,0,0],Na=$1(t1.HBLKSIZE),Oa=u0([3,t1.HBLKSIZE_s]);for(X1(F.npart_s<=t1.CBANDS),X1(F.npart_l<=t1.CBANDS),l1=0;l1<3;l1++)e0[l1]=F.nsPsy.last_en_subshort[o1][l1+6],X1(F.nsPsy.last_en_subshort[o1][l1+4]>0),I0[l1]=e0[l1]/F.nsPsy.last_en_subshort[o1][l1+4],M0[0]+=e0[l1];if(o1==2)for(l1=0;l1<576;l1++){var oa,la;oa=O1[0][l1],la=O1[1][l1],O1[0][l1]=oa+la,O1[1][l1]=oa-la}{var Ha=O1[o1&1],C0=0;for(l1=0;l1<9;l1++){for(var Xe=C0+64,a0=1;C0<Xe;C0++)a0<Math.abs(Ha[C0])&&(a0=Math.abs(Ha[C0]));F.nsPsy.last_en_subshort[o1][l1]=e0[l1+3]=a0,M0[1+l1/3]+=a0,a0>e0[l1+3-2]?(X1(e0[l1+3-2]>0),a0=a0/e0[l1+3-2]):e0[l1+3-2]>a0*10?a0=e0[l1+3-2]/(a0*10):a0=0,I0[l1+3]=a0}}if(o.analysis){var fa=I0[0];for(l1=1;l1<12;l1++)fa<I0[l1]&&(fa=I0[l1]);F.pinfo.ers[T][o1]=F.pinfo.ers_save[o1],F.pinfo.ers_save[o1]=fa}for(La=o1==3?F.nsPsy.attackthre_s:F.nsPsy.attackthre,l1=0;l1<12;l1++)G1[l1/3]==0&&I0[l1]>La&&(G1[l1/3]=l1%3+1);for(l1=1;l1<4;l1++){var ca;M0[l1-1]>M0[l1]?(X1(M0[l1]>0),ca=M0[l1-1]/M0[l1]):(X1(M0[l1-1]>0),ca=M0[l1]/M0[l1-1]),ca<1.7&&(G1[l1]=0,l1==1&&(G1[0]=0))}for(G1[0]!=0&&F.nsPsy.lastAttacks[o1]!=0&&(G1[0]=0),(F.nsPsy.lastAttacks[o1]==3||G1[0]+G1[1]+G1[2]+G1[3]!=0)&&(ia=0,G1[1]!=0&&G1[0]!=0&&(G1[1]=0),G1[2]!=0&&G1[1]!=0&&(G1[2]=0),G1[3]!=0&&G1[2]!=0&&(G1[3]=0)),o1<2?S1[o1]=ia:ia==0&&(S1[0]=S1[1]=0),I[o1]=F.tot_ener[o1],m0=b1,p0=$,M(o,Na,Oa,p0,o1&1,m0,o1&1,T,o1,c,S),B(F,Na,y1,Da,Xa),Y(F,Da,Xa,o0),D1=0;D1<3;D1++){var ha,r0;for(n(o,Oa,i1,x1,o1,D1),q(F,i1,x1,o1,D1),m1=0;m1<t1.SBMAX_s;m1++){if(r0=F.thm[o1].s[m1][D1],r0*=d,G1[D1]>=2||G1[D1+1]==1){var j0=D1!=0?D1-1:2,a0=e(F.thm[o1].s[m1][j0],r0,b*F1);r0=Math.min(r0,a0)}if(G1[D1]==1){var j0=D1!=0?D1-1:2,a0=e(F.thm[o1].s[m1][j0],r0,X*F1);r0=Math.min(r0,a0)}else if(D1!=0&&G1[D1-1]==3||D1==0&&F.nsPsy.lastAttacks[o1]==3){var j0=D1!=2?D1+1:0,a0=e(F.thm[o1].s[m1][j0],r0,X*F1);r0=Math.min(r0,a0)}ha=e0[D1*3+3]+e0[D1*3+4]+e0[D1*3+5],e0[D1*3+5]*6<ha&&(r0*=.5,e0[D1*3+4]*6<ha&&(r0*=.5)),F.thm[o1].s[m1][D1]=r0}}for(F.nsPsy.lastAttacks[o1]=G1[2],q1=0,A1=0;A1<F.npart_l;A1++){for(var T0=F.s3ind[A1][0],ua=y1[T0]*x[o0[T0]],k0=F.s3_ll[q1++]*ua;++T0<=F.s3ind[A1][1];)ua=y1[T0]*x[o0[T0]],k0=p(k0,F.s3_ll[q1++]*ua,T0,T0-A1,F);k0*=.158489319246111,F.blocktype_old[o1&1]==t1.SHORT_TYPE?x1[A1]=k0:x1[A1]=e(Math.min(k0,Math.min(J*F.nb_1[o1][A1],h1*F.nb_2[o1][A1])),k0,F1),F.nb_2[o1][A1]=F.nb_1[o1][A1],F.nb_1[o1][A1]=k0}for(;A1<=t1.CBANDS;++A1)y1[A1]=0,x1[A1]=0;R(F,y1,x1,o1)}if((o.mode==k.STEREO||o.mode==k.JOINT_STEREO)&&o.interChRatio>0&&y(o,o.interChRatio),o.mode==k.JOINT_STEREO){var ba;V(F),ba=o.msfix,Math.abs(ba)>0&&P(F,ba,o.ATHlower*F.ATH.adjust)}for(r(o,S1,e1,K),o1=0;o1<N1;o1++){var q0,F0=0,K0,J0;o1>1?(q0=j,F0=-2,K0=t1.NORM_TYPE,(e1[0]==t1.SHORT_TYPE||e1[1]==t1.SHORT_TYPE)&&(K0=t1.SHORT_TYPE),J0=m[T][o1-2]):(q0=N,F0=0,K0=e1[o1],J0=D[T][o1]),K0==t1.SHORT_TYPE?q0[F0+o1]=u(J0,F.masking_lower):q0[F0+o1]=U(J0,F.masking_lower),o.analysis&&(F.pinfo.pe[T][o1]=q0[F0+o1])}return 0};function c1(o,c,S,T,D,m,N,j){var I=o.internal_flags;if(T<2)Z.fft_long(I,N[j],T,c,S);else if(T==2)for(var e1=t1.BLKSIZE-1;e1>=0;--e1){var F=N[j+0][e1],$=N[j+1][e1];N[j+0][e1]=(F+$)*n0.SQRT2*.5,N[j+1][e1]=(F-$)*n0.SQRT2*.5}m[0]=N[j+0][0],m[0]*=m[0];for(var e1=t1.BLKSIZE/2-1;e1>=0;--e1){var b1=N[j+0][t1.BLKSIZE/2-e1],y1=N[j+0][t1.BLKSIZE/2+e1];m[t1.BLKSIZE/2-e1]=(b1*b1+y1*y1)*.5}{for(var i1=0,e1=11;e1<t1.HBLKSIZE;e1++)i1+=m[e1];I.tot_ener[T]=i1}if(o.analysis){for(var e1=0;e1<t1.HBLKSIZE;e1++)I.pinfo.energy[D][T][e1]=I.pinfo.energy_save[T][e1],I.pinfo.energy_save[T][e1]=m[e1];I.pinfo.pe[D][T]=I.pe[T]}}function g1(o,c,S,T,D,m,N,j){var I=o.internal_flags;if(D==0&&T<2&&Z.fft_short(I,N[j],T,c,S),T==2)for(var e1=t1.BLKSIZE_s-1;e1>=0;--e1){var F=N[j+0][D][e1],$=N[j+1][D][e1];N[j+0][D][e1]=(F+$)*n0.SQRT2*.5,N[j+1][D][e1]=(F-$)*n0.SQRT2*.5}m[D][0]=N[j+0][D][0],m[D][0]*=m[D][0];for(var e1=t1.BLKSIZE_s/2-1;e1>=0;--e1){var b1=N[j+0][D][t1.BLKSIZE_s/2-e1],y1=N[j+0][D][t1.BLKSIZE_s/2+e1];m[D][t1.BLKSIZE_s/2-e1]=(b1*b1+y1*y1)*.5}}function w1(o,c,S,T){var D=o.internal_flags;o.athaa_loudapprox==2&&S<2&&(D.loudness_sq[c][S]=D.loudness_sq_save[S],D.loudness_sq_save[S]=Q(T,D))}var d1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function M1(o,c,S,T,D,m,N,j,I,e1){for(var F=u0([2,576]),$=o.internal_flags,b1=$.channels_out,y1=o.mode==k.JOINT_STEREO?4:b1,i1=0;i1<b1;i1++){firbuf=c[i1];for(var x1=S+576-350-G+192,K=0;K<576;K++){var S1,N1;S1=firbuf[x1+K+10],N1=0;for(var o1=0;o1<(G-1)/2-1;o1+=2)S1+=d1[o1]*(firbuf[x1+K+o1]+firbuf[x1+K+G-o1]),N1+=d1[o1+1]*(firbuf[x1+K+o1+1]+firbuf[x1+K+G-o1-1]);F[i1][K]=S1+N1}D[T][i1].en.assign($.en[i1]),D[T][i1].thm.assign($.thm[i1]),y1>2&&(m[T][i1].en.assign($.en[i1+2]),m[T][i1].thm.assign($.thm[i1+2]))}for(var i1=0;i1<y1;i1++){var A1=$1(12),l1=$1(12),V1=[0,0,0,0],q1=F[i1&1],m1=0,D1=i1==3?$.nsPsy.attackthre_s:$.nsPsy.attackthre,O1=1;if(i1==2)for(var K=0,o1=576;o1>0;++K,--o1){var F1=F[0][K],o0=F[1][K];F[0][K]=F1+o0,F[1][K]=F1-o0}for(var K=0;K<3;K++)l1[K]=$.nsPsy.last_en_subshort[i1][K+6],X1($.nsPsy.last_en_subshort[i1][K+4]>0),A1[K]=l1[K]/$.nsPsy.last_en_subshort[i1][K+4],V1[0]+=l1[K];for(var K=0;K<9;K++){for(var J1=m1+64,Z1=1;m1<J1;m1++)Z1<Math.abs(q1[m1])&&(Z1=Math.abs(q1[m1]));$.nsPsy.last_en_subshort[i1][K]=l1[K+3]=Z1,V1[1+K/3]+=Z1,Z1>l1[K+3-2]?(X1(l1[K+3-2]>0),Z1=Z1/l1[K+3-2]):l1[K+3-2]>Z1*10?Z1=l1[K+3-2]/(Z1*10):Z1=0,A1[K+3]=Z1}for(var K=0;K<3;++K){var s0=l1[K*3+3]+l1[K*3+4]+l1[K*3+5],l0=1;l1[K*3+5]*6<s0&&(l0*=.5,l1[K*3+4]*6<s0&&(l0*=.5)),j[i1][K]=l0}if(o.analysis){for(var f0=A1[0],K=1;K<12;K++)f0<A1[K]&&(f0=A1[K]);$.pinfo.ers[T][i1]=$.pinfo.ers_save[i1],$.pinfo.ers_save[i1]=f0}for(var K=0;K<12;K++)I[i1][K/3]==0&&A1[K]>D1&&(I[i1][K/3]=K%3+1);for(var K=1;K<4;K++){var p0=V1[K-1],m0=V1[K],e0=Math.max(p0,m0);e0<4e4&&p0<1.7*m0&&m0<1.7*p0&&(K==1&&I[i1][0]<=I[i1][K]&&(I[i1][0]=0),I[i1][K]=0)}I[i1][0]<=$.nsPsy.lastAttacks[i1]&&(I[i1][0]=0),($.nsPsy.lastAttacks[i1]==3||I[i1][0]+I[i1][1]+I[i1][2]+I[i1][3]!=0)&&(O1=0,I[i1][1]!=0&&I[i1][0]!=0&&(I[i1][1]=0),I[i1][2]!=0&&I[i1][1]!=0&&(I[i1][2]=0),I[i1][3]!=0&&I[i1][2]!=0&&(I[i1][3]=0)),i1<2?e1[i1]=O1:O1==0&&(e1[0]=e1[1]=0),N[i1]=$.tot_ener[i1]}}function T1(o,c,S){if(S==0)for(var T=0;T<o.npart_s;T++)o.nb_s2[c][T]=o.nb_s1[c][T],o.nb_s1[c][T]=0}function j1(o,c){for(var S=0;S<o.npart_l;S++)o.nb_2[c][S]=o.nb_1[c][S],o.nb_1[c][S]=0}function h0(o,c,S,T){var D=x.length-1,m=0,N=S[m]+S[m+1];if(N>0){var j=c[m];j<c[m+1]&&(j=c[m+1]),X1(o.numlines_s[m]+o.numlines_s[m+1]-1>0),N=20*(j*2-N)/(N*(o.numlines_s[m]+o.numlines_s[m+1]-1));var I=0|N;I>D&&(I=D),T[m]=I}else T[m]=0;for(m=1;m<o.npart_s-1;m++)if(N=S[m-1]+S[m]+S[m+1],X1(m+1<o.npart_s),N>0){var j=c[m-1];j<c[m]&&(j=c[m]),j<c[m+1]&&(j=c[m+1]),X1(o.numlines_s[m-1]+o.numlines_s[m]+o.numlines_s[m+1]-1>0),N=20*(j*3-N)/(N*(o.numlines_s[m-1]+o.numlines_s[m]+o.numlines_s[m+1]-1));var I=0|N;I>D&&(I=D),T[m]=I}else T[m]=0;if(X1(m==o.npart_s-1),N=S[m-1]+S[m],N>0){var j=c[m-1];j<c[m]&&(j=c[m]),X1(o.numlines_s[m-1]+o.numlines_s[m]-1>0),N=20*(j*2-N)/(N*(o.numlines_s[m-1]+o.numlines_s[m]-1));var I=0|N;I>D&&(I=D),T[m]=I}else T[m]=0;X1(m==o.npart_s-1)}function s(o,c,S,T,D,m){var N=o.internal_flags,j=new float[t1.CBANDS],I=$1(t1.CBANDS),e1,F,$,b1=new int[t1.CBANDS];for($=F=0;$<N.npart_s;++$){var y1=0,i1=0,x1=N.numlines_s[$];for(e1=0;e1<x1;++e1,++F){var K=c[m][F];y1+=K,i1<K&&(i1=K)}S[$]=y1,j[$]=i1,I[$]=y1/x1,X1(I[$]>=0)}for(X1($==N.npart_s);$<t1.CBANDS;++$)j[$]=0,I[$]=0;for(h0(N,j,I,b1),F=$=0;$<N.npart_s;$++){var S1=N.s3ind_s[$][0],N1=N.s3ind_s[$][1],o1,A1,l1,V1,q1;for(o1=b1[S1],A1=1,V1=N.s3_ss[F]*S[S1]*x[b1[S1]],++F,++S1;S1<=N1;)o1+=b1[S1],A1+=1,l1=N.s3_ss[F]*S[S1]*x[b1[S1]],V1=v(V1,l1,S1-$),++F,++S1;o1=(1+2*o1)/(2*A1),q1=x[o1]*.5,V1*=q1,T[$]=V1,N.nb_s2[D][$]=N.nb_s1[D][$],N.nb_s1[D][$]=V1,l1=j[$],l1*=N.minval_s[$],l1*=q1,T[$]>l1&&(T[$]=l1),N.masking_lower>1&&(T[$]*=N.masking_lower),T[$]>S[$]&&(T[$]=S[$]),N.masking_lower<1&&(T[$]*=N.masking_lower),X1(T[$]>=0)}for(;$<t1.CBANDS;++$)S[$]=0,T[$]=0}function i(o,c,S,T,D){var m=$1(t1.CBANDS),N=$1(t1.CBANDS),j=E0(t1.CBANDS+2),I;B(o,c,S,m,N),Y(o,m,N,j);var e1=0;for(I=0;I<o.npart_l;I++){var F,$,b1,y1,i1=o.s3ind[I][0],x1=o.s3ind[I][1],K=0,S1=0;for(K=j[i1],S1+=1,$=o.s3_ll[e1]*S[i1]*x[j[i1]],++e1,++i1;i1<=x1;)K+=j[i1],S1+=1,F=o.s3_ll[e1]*S[i1]*x[j[i1]],y1=v($,F,i1-I),$=y1,++e1,++i1;if(K=(1+2*K)/(2*S1),b1=x[K]*.5,$*=b1,o.blocktype_old[D&1]==t1.SHORT_TYPE){var N1=J*o.nb_1[D][I];N1>0?T[I]=Math.min($,N1):T[I]=Math.min($,S[I]*X)}else{var o1=h1*o.nb_2[D][I],A1=J*o.nb_1[D][I],N1;o1<=0&&(o1=$),A1<=0&&(A1=$),o.blocktype_old[D&1]==t1.NORM_TYPE?N1=Math.min(A1,o1):N1=A1,T[I]=Math.min($,N1)}o.nb_2[D][I]=o.nb_1[D][I],o.nb_1[D][I]=$,F=m[I],F*=o.minval_l[I],F*=b1,T[I]>F&&(T[I]=F),o.masking_lower>1&&(T[I]*=o.masking_lower),T[I]>S[I]&&(T[I]=S[I]),o.masking_lower<1&&(T[I]*=o.masking_lower),X1(T[I]>=0)}for(;I<t1.CBANDS;++I)S[I]=0,T[I]=0}function v1(o,c){var S=o.internal_flags;o.short_blocks==D0.short_block_coupled&&!(c[0]!=0&&c[1]!=0)&&(c[0]=c[1]=0);for(var T=0;T<S.channels_out;T++)o.short_blocks==D0.short_block_dispensed&&(c[T]=1),o.short_blocks==D0.short_block_forced&&(c[T]=0)}function R1(o,c,S){for(var T=o.internal_flags,D=0;D<T.channels_out;D++){var m=t1.NORM_TYPE;c[D]!=0?(X1(T.blocktype_old[D]!=t1.START_TYPE),T.blocktype_old[D]==t1.SHORT_TYPE&&(m=t1.STOP_TYPE)):(m=t1.SHORT_TYPE,T.blocktype_old[D]==t1.NORM_TYPE&&(T.blocktype_old[D]=t1.START_TYPE),T.blocktype_old[D]==t1.STOP_TYPE&&(T.blocktype_old[D]=t1.SHORT_TYPE)),S[D]=T.blocktype_old[D],T.blocktype_old[D]=m}}function I1(o,c,S,T,D,m,N){for(var j=m*2,I=m>0?Math.pow(10,D):1,e1,F,$=0;$<N;++$){var b1=o[2][$],y1=o[3][$],i1=c[0][$],x1=c[1][$],K=c[2][$],S1=c[3][$];if(i1<=1.58*x1&&x1<=1.58*i1){var N1=S[$]*y1,o1=S[$]*b1;F=Math.max(K,Math.min(S1,N1)),e1=Math.max(S1,Math.min(K,o1))}else F=K,e1=S1;if(m>0){var A1,l1,V1=T[$]*I;if(A1=Math.min(Math.max(i1,V1),Math.max(x1,V1)),K=Math.max(F,V1),S1=Math.max(e1,V1),l1=K+S1,l1>0&&A1*j<l1){var q1=A1*j/l1;K*=q1,S1*=q1}F=Math.min(K,F),e1=Math.min(S1,e1)}F>b1&&(F=b1),e1>y1&&(e1=y1),c[2][$]=F,c[3][$]=e1}}this.L3psycho_anal_vbr=function(o,c,S,T,D,m,N,j,I,e1){var F=o.internal_flags,$,b1,y1=$1(t1.HBLKSIZE),i1=u0([3,t1.HBLKSIZE_s]),x1=u0([2,t1.BLKSIZE]),K=u0([2,3,t1.BLKSIZE_s]),S1=u0([4,t1.CBANDS]),N1=u0([4,t1.CBANDS]),o1=u0([4,3]),A1=.6,l1=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],V1=E0(2),q1=o.mode==k.JOINT_STEREO?4:F.channels_out;M1(o,c,S,T,D,m,I,o1,l1,V1),v1(o,V1);{for(var m1=0;m1<q1;m1++){var D1=m1&1;$=x1,c1(o,c,S,m1,T,y1,$,D1),w1(o,T,m1,y1),V1[D1]!=0?i(F,y1,S1[m1],N1[m1],m1):j1(F,m1)}V1[0]+V1[1]==2&&o.mode==k.JOINT_STEREO&&I1(S1,N1,F.mld_cb_l,F.ATH.cb_l,o.ATHlower*F.ATH.adjust,o.msfix,F.npart_l);for(var m1=0;m1<q1;m1++){var D1=m1&1;V1[D1]!=0&&R(F,S1[m1],N1[m1],m1)}}{for(var O1=0;O1<3;O1++){for(var m1=0;m1<q1;++m1){var D1=m1&1;V1[D1]!=0?T1(F,m1,O1):(b1=K,g1(o,c,S,m1,O1,i1,b1,D1),s(o,i1,S1[m1],N1[m1],m1,O1))}V1[0]+V1[1]==0&&o.mode==k.JOINT_STEREO&&I1(S1,N1,F.mld_cb_s,F.ATH.cb_s,o.ATHlower*F.ATH.adjust,o.msfix,F.npart_s);for(var m1=0;m1<q1;++m1){var D1=m1&1;V1[D1]==0&&q(F,S1[m1],N1[m1],m1,O1)}}for(var m1=0;m1<q1;m1++){var D1=m1&1;if(V1[D1]==0)for(var F1=0;F1<t1.SBMAX_s;F1++){for(var o0=$1(3),O1=0;O1<3;O1++){var J1=F.thm[m1].s[F1][O1];if(J1*=d,l1[m1][O1]>=2||l1[m1][O1+1]==1){var Z1=O1!=0?O1-1:2,s0=e(F.thm[m1].s[F1][Z1],J1,b*A1);J1=Math.min(J1,s0)}else if(l1[m1][O1]==1){var Z1=O1!=0?O1-1:2,s0=e(F.thm[m1].s[F1][Z1],J1,X*A1);J1=Math.min(J1,s0)}else if(O1!=0&&l1[m1][O1-1]==3||O1==0&&F.nsPsy.lastAttacks[m1]==3){var Z1=O1!=2?O1+1:0,s0=e(F.thm[m1].s[F1][Z1],J1,X*A1);J1=Math.min(J1,s0)}J1*=o1[m1][O1],o0[O1]=J1}for(var O1=0;O1<3;O1++)F.thm[m1].s[F1][O1]=o0[O1]}}}for(var m1=0;m1<q1;m1++)F.nsPsy.lastAttacks[m1]=l1[m1][2];R1(o,V1,e1);for(var m1=0;m1<q1;m1++){var l0,f0,p0,m0;m1>1?(l0=j,f0=-2,p0=t1.NORM_TYPE,(e1[0]==t1.SHORT_TYPE||e1[1]==t1.SHORT_TYPE)&&(p0=t1.SHORT_TYPE),m0=m[T][m1-2]):(l0=N,f0=0,p0=e1[m1],m0=D[T][m1]),p0==t1.SHORT_TYPE?l0[f0+m1]=u(m0,F.masking_lower):l0[f0+m1]=U(m0,F.masking_lower),o.analysis&&(F.pinfo.pe[T][m1]=l0[f0+m1])}return 0};function E1(o,c){var S=o,T;return S>=0?T=-S*27:T=S*c,T<=-72?0:Math.exp(T*s1)}function k1(o){var c=0,S=0;{var T=0,D,m;for(T=0;E1(T,o)>1e-20;T-=1);for(D=T,m=0;Math.abs(m-D)>1e-12;)T=(m+D)/2,E1(T,o)>0?m=T:D=T;c=D}{var T=0,D,m;for(T=0;E1(T,o)>1e-20;T+=1);for(D=0,m=T;Math.abs(m-D)>1e-12;)T=(m+D)/2,E1(T,o)>0?D=T:m=T;S=m}{var N=0,j=1e3,I;for(I=0;I<=j;++I){var T=c+I*(S-c)/j,e1=E1(T,o);N+=e1}{var F=(j+1)/(N*(S-c));return F}}}function B1(o){var c,S,T,D;return c=o,c>=0?c*=3:c*=1.5,c>=.5&&c<=2.5?(D=c-.5,S=8*(D*D-2*D)):S=0,c+=.474,T=15.811389+7.5*c-17.5*Math.sqrt(1+c*c),T<=-60?0:(c=Math.exp((S+T)*s1),c/=.6609193,c)}function L1(o){return o<0&&(o=0),o=o*.001,13*Math.atan(.76*o)+3.5*Math.atan(o*o/(7.5*7.5))}function P1(o,c,S,T,D,m,N,j,I,e1,F,$){var b1=$1(t1.CBANDS+1),y1=j/($>15?2*576:2*192),i1=E0(t1.HBLKSIZE),x1;j/=I;var K=0,S1=0;for(x1=0;x1<t1.CBANDS;x1++){var N1,o1;for(N1=L1(j*K),b1[x1]=j*K,o1=K;L1(j*o1)-N1<C&&o1<=I/2;o1++);for(o[x1]=o1-K,S1=x1+1;K<o1;)X1(K<t1.HBLKSIZE),i1[K++]=x1;if(K>I/2){K=I/2,++x1;break}}X1(x1<t1.CBANDS),b1[x1]=j*K;for(var A1=0;A1<$;A1++){var l1,V1,q1,m1,D1;q1=e1[A1],m1=e1[A1+1],l1=0|Math.floor(.5+F*(q1-.5)),l1<0&&(l1=0),V1=0|Math.floor(.5+F*(m1-.5)),V1>I/2&&(V1=I/2),S[A1]=(i1[l1]+i1[V1])/2,c[A1]=i1[V1];var O1=y1*m1;N[A1]=(O1-b1[c[A1]])/(b1[c[A1]+1]-b1[c[A1]]),N[A1]<0?N[A1]=0:N[A1]>1&&(N[A1]=1),D1=L1(j*e1[A1]*F),D1=Math.min(D1,15.5)/15.5,m[A1]=Math.pow(10,1.25*(1-Math.cos(Math.PI*D1))-2.5)}K=0;for(var F1=0;F1<S1;F1++){var o0=o[F1],N1,J1;N1=L1(j*K),J1=L1(j*(K+o0-1)),T[F1]=.5*(N1+J1),N1=L1(j*(K-.5)),J1=L1(j*(K+o0-.5)),D[F1]=J1-N1,K+=o0}return S1}function p1(o,c,S,T,D,m){var N=u0([t1.CBANDS,t1.CBANDS]),j,I=0;if(m)for(var e1=0;e1<c;e1++)for(j=0;j<c;j++){var F=B1(S[e1]-S[j])*T[j];N[e1][j]=F*D[e1]}else for(j=0;j<c;j++)for(var $=15+Math.min(21/S[j],12),b1=k1($),e1=0;e1<c;e1++){var F=b1*E1(S[e1]-S[j],$)*T[j];N[e1][j]=F*D[e1]}for(var e1=0;e1<c;e1++){for(j=0;j<c&&!(N[e1][j]>0);j++);for(o[e1][0]=j,j=c-1;j>0&&!(N[e1][j]>0);j--);o[e1][1]=j,I+=o[e1][1]-o[e1][0]+1}for(var y1=$1(I),i1=0,e1=0;e1<c;e1++)for(j=o[e1][0];j<=o[e1][1];j++)y1[i1++]=N[e1][j];return y1}function C1(o){var c=L1(o);return c=Math.min(c,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*c))-2.5)}this.psymodel_init=function(o){var c=o.internal_flags,S,T=!0,D=13,m=24,N=0,j=0,I=-8.25,e1=-4.5,F=$1(t1.CBANDS),$=$1(t1.CBANDS),b1=$1(t1.CBANDS),y1=o.out_samplerate;switch(o.experimentalZ){default:case 0:T=!0;break;case 1:T=!(o.VBR==L0.vbr_mtrh||o.VBR==L0.vbr_mt);break;case 2:T=!1;break;case 3:D=8,N=-1.75,j=-.0125,I=-8.25,e1=-2.25;break}for(c.ms_ener_ratio_old=.25,c.blocktype_old[0]=c.blocktype_old[1]=t1.NORM_TYPE,S=0;S<4;++S){for(var K=0;K<t1.CBANDS;++K)c.nb_1[S][K]=1e20,c.nb_2[S][K]=1e20,c.nb_s1[S][K]=c.nb_s2[S][K]=1;for(var i1=0;i1<t1.SBMAX_l;i1++)c.en[S].l[i1]=1e20,c.thm[S].l[i1]=1e20;for(var K=0;K<3;++K){for(var i1=0;i1<t1.SBMAX_s;i1++)c.en[S].s[i1][K]=1e20,c.thm[S].s[i1][K]=1e20;c.nsPsy.lastAttacks[S]=0}for(var K=0;K<9;K++)c.nsPsy.last_en_subshort[S][K]=10}for(c.loudness_sq_save[0]=c.loudness_sq_save[1]=0,c.npart_l=P1(c.numlines_l,c.bo_l,c.bm_l,F,$,c.mld_l,c.PSY.bo_l_weight,y1,t1.BLKSIZE,c.scalefac_band.l,t1.BLKSIZE/(2*576),t1.SBMAX_l),X1(c.npart_l<t1.CBANDS),S=0;S<c.npart_l;S++){var x1=N;F[S]>=D&&(x1=j*(F[S]-D)/(m-D)+N*(m-F[S])/(m-D)),b1[S]=Math.pow(10,x1/10),c.numlines_l[S]>0?c.rnumlines_l[S]=1/c.numlines_l[S]:c.rnumlines_l[S]=0}c.s3_ll=p1(c.s3ind,c.npart_l,F,$,b1,T);var K=0;for(S=0;S<c.npart_l;S++){var S1;S1=Ga.MAX_VALUE;for(var N1=0;N1<c.numlines_l[S];N1++,K++){var o1=y1*K/(1e3*t1.BLKSIZE),A1;A1=this.ATHformula(o1*1e3,o)-20,A1=Math.pow(10,.1*A1),A1*=c.numlines_l[S],S1>A1&&(S1=A1)}c.ATH.cb_l[S]=S1,S1=-20+F[S]*20/10,S1>6&&(S1=100),S1<-15&&(S1=-15),S1-=8,c.minval_l[S]=Math.pow(10,S1/10)*c.numlines_l[S]}for(c.npart_s=P1(c.numlines_s,c.bo_s,c.bm_s,F,$,c.mld_s,c.PSY.bo_s_weight,y1,t1.BLKSIZE_s,c.scalefac_band.s,t1.BLKSIZE_s/(2*192),t1.SBMAX_s),X1(c.npart_s<t1.CBANDS),K=0,S=0;S<c.npart_s;S++){var S1,x1=I;F[S]>=D&&(x1=e1*(F[S]-D)/(m-D)+I*(m-F[S])/(m-D)),b1[S]=Math.pow(10,x1/10),S1=Ga.MAX_VALUE;for(var N1=0;N1<c.numlines_s[S];N1++,K++){var o1=y1*K/(1e3*t1.BLKSIZE_s),A1;A1=this.ATHformula(o1*1e3,o)-20,A1=Math.pow(10,.1*A1),A1*=c.numlines_s[S],S1>A1&&(S1=A1)}c.ATH.cb_s[S]=S1,S1=-7+F[S]*7/12,F[S]>12&&(S1*=1+Math.log(1+S1)*3.1),F[S]<12&&(S1*=1+Math.log(1-S1)*2.3),S1<-15&&(S1=-15),S1-=8,c.minval_s[S]=Math.pow(10,S1/10)*c.numlines_s[S]}c.s3_ss=p1(c.s3ind_s,c.npart_s,F,$,b1,T),L(),Z.init_fft(c),c.decay=Math.exp(-1*O/(u1*y1/192));{var l1;l1=r1,o.exp_nspsytune&2&&(l1=1),Math.abs(o.msfix)>0&&(l1=o.msfix),o.msfix=l1;for(var V1=0;V1<c.npart_l;V1++)c.s3ind[V1][1]>c.npart_l-1&&(c.s3ind[V1][1]=c.npart_l-1)}var q1=576*c.mode_gr/y1;if(c.ATH.decay=Math.pow(10,-12/10*q1),c.ATH.adjust=.01,c.ATH.adjustLimit=1,X1(c.bo_l[t1.SBMAX_l-1]<=c.npart_l),X1(c.bo_s[t1.SBMAX_s-1]<=c.npart_s),o.ATHtype!=-1){var o1,m1=o.out_samplerate/t1.BLKSIZE,D1=0;for(o1=0,S=0;S<t1.BLKSIZE/2;++S)o1+=m1,c.ATH.eql_w[S]=1/Math.pow(10,this.ATHformula(o1,o)/10),D1+=c.ATH.eql_w[S];for(D1=1/D1,S=t1.BLKSIZE/2;--S>=0;)c.ATH.eql_w[S]*=D1}{for(var V1=K=0;V1<c.npart_s;++V1)for(S=0;S<c.numlines_s[V1];++S)++K;for(var V1=K=0;V1<c.npart_l;++V1)for(S=0;S<c.numlines_l[V1];++S)++K}for(K=0,S=0;S<c.npart_l;S++){var o1=y1*(K+c.numlines_l[S]/2)/(1*t1.BLKSIZE);c.mld_cb_l[S]=C1(o1),K+=c.numlines_l[S]}for(;S<t1.CBANDS;++S)c.mld_cb_l[S]=1;for(K=0,S=0;S<c.npart_s;S++){var o1=y1*(K+c.numlines_s[S]/2)/(1*t1.BLKSIZE_s);c.mld_cb_s[S]=C1(o1),K+=c.numlines_s[S]}for(;S<t1.CBANDS;++S)c.mld_cb_s[S]=1;return 0};function z1(o,c){o<-.3&&(o=3410),o/=1e3,o=Math.max(.1,o);var S=3.64*Math.pow(o,-.8)-6.8*Math.exp(-.6*Math.pow(o-3.4,2))+6*Math.exp(-.15*Math.pow(o-8.7,2))+(.6+.04*c)*.001*Math.pow(o,4);return S}this.ATHformula=function(o,c){var S;switch(c.ATHtype){case 0:S=z1(o,9);break;case 1:S=z1(o,-1);break;case 2:S=z1(o,0);break;case 3:S=z1(o,1)+6;break;case 4:S=z1(o,c.ATHcurve);break;default:S=z1(o,0);break}return S}}var Qe=Ge,ze=W0;function We(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=ze.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Ke=We,Je=t0(),Ae={};Ae.SFBMAX=Je.SBMAX_s*3;var ra=Ae,Be=Q1,Ue=Be.new_float,x0=Be.new_int,da=ra;function $e(){this.xr=Ue(576),this.l3_enc=x0(576),this.scalefac=x0(da.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=x0(3),this.subblock_gain=x0(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=x0(da.SFBMAX),this.window=x0(da.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=x0(4),this.max_nonzero_coeff=0;var k=this;function Z(J){return new Int32Array(J)}function O(J){return new Float32Array(J)}this.assign=function(J){k.xr=O(J.xr),k.l3_enc=Z(J.l3_enc),k.scalefac=Z(J.scalefac),k.xrpow_max=J.xrpow_max,k.part2_3_length=J.part2_3_length,k.big_values=J.big_values,k.count1=J.count1,k.global_gain=J.global_gain,k.scalefac_compress=J.scalefac_compress,k.block_type=J.block_type,k.mixed_block_flag=J.mixed_block_flag,k.table_select=Z(J.table_select),k.subblock_gain=Z(J.subblock_gain),k.region0_count=J.region0_count,k.region1_count=J.region1_count,k.preflag=J.preflag,k.scalefac_scale=J.scalefac_scale,k.count1table_select=J.count1table_select,k.part2_length=J.part2_length,k.sfb_lmax=J.sfb_lmax,k.sfb_smin=J.sfb_smin,k.psy_lmax=J.psy_lmax,k.sfbmax=J.sfbmax,k.psymax=J.psymax,k.sfbdivide=J.sfbdivide,k.width=Z(J.width),k.window=Z(J.window),k.count1bits=J.count1bits,k.sfb_partition_table=J.sfb_partition_table.slice(0),k.slen=Z(J.slen),k.max_nonzero_coeff=J.max_nonzero_coeff}}var Ea=$e,a2=Q1,Qa=a2.new_int,e2=Ea;function t2(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Qa(4),Qa(4)];for(var k=0;k<2;k++)for(var Z=0;Z<2;Z++)this.tt[k][Z]=new e2}var s2=t2,Te=Q1,U0=Te.System,$0=Te.new_int,aa=t0();function r2(k,Z,O,J){this.l=$0(1+aa.SBMAX_l),this.s=$0(1+aa.SBMAX_s),this.psfb21=$0(1+aa.PSFB21),this.psfb12=$0(1+aa.PSFB12);var h1=this.l,W=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],U0.arraycopy(this.arrL,0,h1,0,Math.min(this.arrL.length,this.l.length)),U0.arraycopy(this.arrS,0,W,0,Math.min(this.arrS.length,this.s.length)),U0.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),U0.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var ke=r2,xa=Q1,Ma=xa.new_float,n2=xa.new_float_n,_2=xa.new_int,za=t0();function i2(){this.last_en_subshort=n2([4,9]),this.lastAttacks=_2(4),this.pefirbuf=Ma(19),this.longfact=Ma(za.SBMAX_l),this.shortfact=Ma(za.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var o2=i2;function l2(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var f2=l2,O0=Q1,c2=O0.new_byte,h2=O0.new_double,b0=O0.new_float,y0=O0.new_float_n,v0=O0.new_int,ea=O0.new_int_n,u2=s2,b2=ke,p2=o2,m2=f2,Wa=we(),W1=t0(),v2=ra;w0.MFSIZE=3*1152+W1.ENCDELAY-W1.MDCTDELAY;w0.MAX_HEADER_BUF=256;w0.MAX_BITS_PER_CHANNEL=4095;w0.MAX_BITS_PER_GRANULE=7680;w0.BPC=320;function w0(){var k=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=y0([2,w0.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new u2,this.ms_ratio=b0(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=v0(2),this.CurrentStep=v0(2),this.masking_lower=0,this.bv_scf=v0(576),this.pseudohalf=v0(v2.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*w0.BPC+1),this.itime=h2(2),this.sideinfo_len=0,this.sb_sample=y0([2,2,18,W1.SBLIMIT]),this.amp_filter=b0(32);function Z(){this.write_timing=0,this.ptr=0,this.buf=c2(k)}this.header=new Array(w0.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new b2,this.minval_l=b0(W1.CBANDS),this.minval_s=b0(W1.CBANDS),this.nb_1=y0([4,W1.CBANDS]),this.nb_2=y0([4,W1.CBANDS]),this.nb_s1=y0([4,W1.CBANDS]),this.nb_s2=y0([4,W1.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=b0(4),this.loudness_sq=y0([2,2]),this.loudness_sq_save=b0(2),this.mld_l=b0(W1.SBMAX_l),this.mld_s=b0(W1.SBMAX_s),this.bm_l=v0(W1.SBMAX_l),this.bo_l=v0(W1.SBMAX_l),this.bm_s=v0(W1.SBMAX_s),this.bo_s=v0(W1.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=ea([W1.CBANDS,2]),this.s3ind_s=ea([W1.CBANDS,2]),this.numlines_s=v0(W1.CBANDS),this.numlines_l=v0(W1.CBANDS),this.rnumlines_l=b0(W1.CBANDS),this.mld_cb_l=b0(W1.CBANDS),this.mld_cb_s=b0(W1.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=b0(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=v0(2),this.nsPsy=new p2,this.VBR_seek_table=new m2,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=ea([16,5]),this.bitrate_blockType_Hist=ea([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var O=0;O<this.en.length;O++)this.en[O]=new Wa;for(var O=0;O<this.thm.length;O++)this.thm[O]=new Wa;for(var O=0;O<this.header.length;O++)this.header[O]=new Z}var na=w0,g2=Q1,P0=g2.new_float,V0=t0();function d2(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=P0(V0.SBMAX_l),this.s=P0(V0.SBMAX_s),this.psfb21=P0(V0.PSFB21),this.psfb12=P0(V0.PSFB12),this.cb_l=P0(V0.CBANDS),this.cb_s=P0(V0.CBANDS),this.eql_w=P0(V0.BLKSIZE/2)}var M2=d2,Ee=Q1,_0=Ee.System,Ka=Ee.Arrays;K1.STEPS_per_dB=100;K1.MAX_dB=120;K1.GAIN_NOT_ENOUGH_SAMPLES=-24601;K1.GAIN_ANALYSIS_ERROR=0;K1.GAIN_ANALYSIS_OK=1;K1.INIT_GAIN_ANALYSIS_ERROR=0;K1.INIT_GAIN_ANALYSIS_OK=1;K1.YULE_ORDER=10;K1.MAX_ORDER=K1.YULE_ORDER;K1.MAX_SAMP_FREQ=48e3;K1.RMS_WINDOW_TIME_NUMERATOR=1;K1.RMS_WINDOW_TIME_DENOMINATOR=20;K1.MAX_SAMPLES_PER_WINDOW=K1.MAX_SAMP_FREQ*K1.RMS_WINDOW_TIME_NUMERATOR/K1.RMS_WINDOW_TIME_DENOMINATOR+1;function K1(){var k=64.82,Z=.95,O=K1.RMS_WINDOW_TIME_NUMERATOR,J=K1.RMS_WINDOW_TIME_DENOMINATOR,h1=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],W=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function z(b,X,r1,G,s1,Q){for(;s1--!=0;)r1[G]=1e-10+b[X+0]*Q[0]-r1[G-1]*Q[1]+b[X-1]*Q[2]-r1[G-2]*Q[3]+b[X-2]*Q[4]-r1[G-3]*Q[5]+b[X-3]*Q[6]-r1[G-4]*Q[7]+b[X-4]*Q[8]-r1[G-5]*Q[9]+b[X-5]*Q[10]-r1[G-6]*Q[11]+b[X-6]*Q[12]-r1[G-7]*Q[13]+b[X-7]*Q[14]-r1[G-8]*Q[15]+b[X-8]*Q[16]-r1[G-9]*Q[17]+b[X-9]*Q[18]-r1[G-10]*Q[19]+b[X-10]*Q[20],++G,++X}function C(b,X,r1,G,s1,Q){for(;s1--!=0;)r1[G]=b[X+0]*Q[0]-r1[G-1]*Q[1]+b[X-1]*Q[2]-r1[G-2]*Q[3]+b[X-2]*Q[4],++G,++X}function a1(b,X){for(var r1=0;r1<MAX_ORDER;r1++)b.linprebuf[r1]=b.lstepbuf[r1]=b.loutbuf[r1]=b.rinprebuf[r1]=b.rstepbuf[r1]=b.routbuf[r1]=0;switch(0|X){case 48e3:b.reqindex=0;break;case 44100:b.reqindex=1;break;case 32e3:b.reqindex=2;break;case 24e3:b.reqindex=3;break;case 22050:b.reqindex=4;break;case 16e3:b.reqindex=5;break;case 12e3:b.reqindex=6;break;case 11025:b.reqindex=7;break;case 8e3:b.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return b.sampleWindow=0|(X*O+J-1)/J,b.lsum=0,b.rsum=0,b.totsamp=0,Ka.ill(b.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(b,X){return a1(b,X)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(b.linpre=MAX_ORDER,b.rinpre=MAX_ORDER,b.lstep=MAX_ORDER,b.rstep=MAX_ORDER,b.lout=MAX_ORDER,b.rout=MAX_ORDER,Ka.fill(b.B,0),INIT_GAIN_ANALYSIS_OK)};function u1(b){return b*b}this.AnalyzeSamples=function(b,X,r1,G,s1,Q,M){var f,h,g,a,l,w,x;if(Q==0)return GAIN_ANALYSIS_OK;switch(x=0,l=Q,M){case 1:G=X,s1=r1;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(Q<MAX_ORDER?(_0.arraycopy(X,r1,b.linprebuf,MAX_ORDER,Q),_0.arraycopy(G,s1,b.rinprebuf,MAX_ORDER,Q)):(_0.arraycopy(X,r1,b.linprebuf,MAX_ORDER,MAX_ORDER),_0.arraycopy(G,s1,b.rinprebuf,MAX_ORDER,MAX_ORDER));l>0;){w=l>b.sampleWindow-b.totsamp?b.sampleWindow-b.totsamp:l,x<MAX_ORDER?(f=b.linpre+x,h=b.linprebuf,g=b.rinpre+x,a=b.rinprebuf,w>MAX_ORDER-x&&(w=MAX_ORDER-x)):(f=r1+x,h=X,g=s1+x,a=G),z(h,f,b.lstepbuf,b.lstep+b.totsamp,w,h1[b.reqindex]),z(a,g,b.rstepbuf,b.rstep+b.totsamp,w,h1[b.reqindex]),C(b.lstepbuf,b.lstep+b.totsamp,b.loutbuf,b.lout+b.totsamp,w,W[b.reqindex]),C(b.rstepbuf,b.rstep+b.totsamp,b.routbuf,b.rout+b.totsamp,w,W[b.reqindex]),f=b.lout+b.totsamp,h=b.loutbuf,g=b.rout+b.totsamp,a=b.routbuf;for(var L=w%8;L--!=0;)b.lsum+=u1(h[f++]),b.rsum+=u1(a[g++]);for(L=w/8;L--!=0;)b.lsum+=u1(h[f+0])+u1(h[f+1])+u1(h[f+2])+u1(h[f+3])+u1(h[f+4])+u1(h[f+5])+u1(h[f+6])+u1(h[f+7]),f+=8,b.rsum+=u1(a[g+0])+u1(a[g+1])+u1(a[g+2])+u1(a[g+3])+u1(a[g+4])+u1(a[g+5])+u1(a[g+6])+u1(a[g+7]),g+=8;if(l-=w,x+=w,b.totsamp+=w,b.totsamp==b.sampleWindow){var A=K1.STEPS_per_dB*10*Math.log10((b.lsum+b.rsum)/b.totsamp*.5+1e-37),E=A<=0?0:0|A;E>=b.A.length&&(E=b.A.length-1),b.A[E]++,b.lsum=b.rsum=0,_0.arraycopy(b.loutbuf,b.totsamp,b.loutbuf,0,MAX_ORDER),_0.arraycopy(b.routbuf,b.totsamp,b.routbuf,0,MAX_ORDER),_0.arraycopy(b.lstepbuf,b.totsamp,b.lstepbuf,0,MAX_ORDER),_0.arraycopy(b.rstepbuf,b.totsamp,b.rstepbuf,0,MAX_ORDER),b.totsamp=0}if(b.totsamp>b.sampleWindow)return GAIN_ANALYSIS_ERROR}return Q<MAX_ORDER?(_0.arraycopy(b.linprebuf,Q,b.linprebuf,0,MAX_ORDER-Q),_0.arraycopy(b.rinprebuf,Q,b.rinprebuf,0,MAX_ORDER-Q),_0.arraycopy(X,r1,b.linprebuf,MAX_ORDER-Q,Q),_0.arraycopy(G,s1,b.rinprebuf,MAX_ORDER-Q,Q)):(_0.arraycopy(X,r1+Q-MAX_ORDER,b.linprebuf,0,MAX_ORDER),_0.arraycopy(G,s1+Q-MAX_ORDER,b.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function d(b,X){var r1,G=0;for(r1=0;r1<X;r1++)G+=b[r1];if(G==0)return GAIN_NOT_ENOUGH_SAMPLES;var s1=0|Math.ceil(G*(1-Z));for(r1=X;r1-- >0&&!((s1-=b[r1])<=0););return k-r1/K1.STEPS_per_dB}this.GetTitleGain=function(b){for(var X=d(b.A,b.A.length),r1=0;r1<b.A.length;r1++)b.B[r1]+=b.A[r1],b.A[r1]=0;for(var r1=0;r1<MAX_ORDER;r1++)b.linprebuf[r1]=b.lstepbuf[r1]=b.loutbuf[r1]=b.rinprebuf[r1]=b.rstepbuf[r1]=b.routbuf[r1]=0;return b.totsamp=0,b.lsum=b.rsum=0,X}}var xe=K1,ye=Q1,X0=ye.new_float,Ja=ye.new_int,i0=xe;function S2(){this.linprebuf=X0(i0.MAX_ORDER*2),this.linpre=0,this.lstepbuf=X0(i0.MAX_SAMPLES_PER_WINDOW+i0.MAX_ORDER),this.lstep=0,this.loutbuf=X0(i0.MAX_SAMPLES_PER_WINDOW+i0.MAX_ORDER),this.lout=0,this.rinprebuf=X0(i0.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=X0(i0.MAX_SAMPLES_PER_WINDOW+i0.MAX_ORDER),this.rstep=0,this.routbuf=X0(i0.MAX_SAMPLES_PER_WINDOW+i0.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Ja(0|i0.STEPS_per_dB*i0.MAX_dB),this.B=Ja(0|i0.STEPS_per_dB*i0.MAX_dB)}var w2=S2;function R2(k){this.bits=k}var Pe=R2,ya=Q1,Ua=ya.new_float,A2=ya.new_int,$a=ya.assert,B2=Pe,ae=t0(),T2=ra,k2=na;function E2(k){var Z=k;this.quantize=Z,this.iteration_loop=function(O,J,h1,W){var z=O.internal_flags,C=Ua(T2.SFBMAX),a1=Ua(576),u1=A2(2),d=0,b,X=z.l3_side,r1=new B2(d);this.quantize.rv.ResvFrameBegin(O,r1),d=r1.bits;for(var G=0;G<z.mode_gr;G++){b=this.quantize.qupvt.on_pe(O,J,u1,d,G,G),z.mode_ext==ae.MPG_MD_MS_LR&&(this.quantize.ms_convert(z.l3_side,G),this.quantize.qupvt.reduce_side(u1,h1[G],d,b));for(var s1=0;s1<z.channels_out;s1++){var Q,M,f=X.tt[G][s1];f.block_type!=ae.SHORT_TYPE?(Q=0,M=z.PSY.mask_adjust-Q):(Q=0,M=z.PSY.mask_adjust_short-Q),z.masking_lower=Math.pow(10,M*.1),this.quantize.init_outer_loop(z,f),this.quantize.init_xrpow(z,f,a1)&&(this.quantize.qupvt.calc_xmin(O,W[G][s1],f,C),this.quantize.outer_loop(O,f,C,a1,s1,u1[s1])),this.quantize.iteration_finish_one(z,G,s1),$a(f.part2_3_length<=k2.MAX_BITS_PER_CHANNEL),$a(f.part2_3_length<=u1[s1])}}this.quantize.rv.ResvFrameEnd(z,d)}}var x2=E2;function H1(k,Z,O,J){this.xlen=k,this.linmax=Z,this.table=O,this.hlen=J}var f1={};f1.t1HB=[1,1,1,0];f1.t2HB=[1,2,1,3,1,1,3,2,0];f1.t3HB=[3,2,1,1,1,1,3,2,0];f1.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];f1.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];f1.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];f1.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];f1.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];f1.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];f1.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];f1.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];f1.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];f1.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];f1.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];f1.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];f1.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];f1.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];f1.t1l=[1,4,3,5];f1.t2l=[1,4,7,4,5,7,6,7,8];f1.t3l=[2,3,7,4,4,7,6,7,8];f1.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];f1.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];f1.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];f1.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];f1.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];f1.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];f1.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];f1.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];f1.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];f1.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];f1.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];f1.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];f1.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];f1.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];f1.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];f1.ht=[new H1(0,0,null,null),new H1(2,0,f1.t1HB,f1.t1l),new H1(3,0,f1.t2HB,f1.t2l),new H1(3,0,f1.t3HB,f1.t3l),new H1(0,0,null,null),new H1(4,0,f1.t5HB,f1.t5l),new H1(4,0,f1.t6HB,f1.t6l),new H1(6,0,f1.t7HB,f1.t7l),new H1(6,0,f1.t8HB,f1.t8l),new H1(6,0,f1.t9HB,f1.t9l),new H1(8,0,f1.t10HB,f1.t10l),new H1(8,0,f1.t11HB,f1.t11l),new H1(8,0,f1.t12HB,f1.t12l),new H1(16,0,f1.t13HB,f1.t13l),new H1(0,0,null,f1.t16_5l),new H1(16,0,f1.t15HB,f1.t15l),new H1(1,1,f1.t16HB,f1.t16l),new H1(2,3,f1.t16HB,f1.t16l),new H1(3,7,f1.t16HB,f1.t16l),new H1(4,15,f1.t16HB,f1.t16l),new H1(6,63,f1.t16HB,f1.t16l),new H1(8,255,f1.t16HB,f1.t16l),new H1(10,1023,f1.t16HB,f1.t16l),new H1(13,8191,f1.t16HB,f1.t16l),new H1(4,15,f1.t24HB,f1.t24l),new H1(5,31,f1.t24HB,f1.t24l),new H1(6,63,f1.t24HB,f1.t24l),new H1(7,127,f1.t24HB,f1.t24l),new H1(8,255,f1.t24HB,f1.t24l),new H1(9,511,f1.t24HB,f1.t24l),new H1(11,2047,f1.t24HB,f1.t24l),new H1(13,8191,f1.t24HB,f1.t24l),new H1(0,0,f1.t32HB,f1.t32l),new H1(0,0,f1.t33HB,f1.t33l)];f1.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];f1.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];f1.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];f1.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];f1.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];f1.scfsi_band=[0,6,11,16,21];var Pa=f1,Sa,ee;function Ve(){if(ee)return Sa;ee=1;var k=ke,Z=Q1,O=Z.VbrMode,J=Z.Float,h1=Z.Util,W=Z.new_float,z=Z.new_int,C=Z.assert,a1=t0(),u1=Pe,d=na;b.Q_MAX=257,b.Q_MAX2=116,b.LARGE_BITS=1e5,b.IXMAX_VAL=8206;function b(){var X=Va(),r1=null,G=null,s1=null;this.setModules=function(v,y,V){r1=v,G=y,s1=V};function Q(v){return C(0<=v+b.Q_MAX2&&v<b.Q_MAX),x[v+b.Q_MAX2]}this.IPOW20=function(v){return C(0<=v&&v<b.Q_MAX),L[v]};var M=2220446049250313e-31,f=b.IXMAX_VAL,h=f+2,g=b.Q_MAX,a=b.Q_MAX2;b.LARGE_BITS;var l=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var w=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=w,this.sfBandIndex=[new k([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new k([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var x=W(g+a+1),L=W(g),A=W(h),E=W(h);this.adj43=E;function _1(v,y){var V=s1.ATHformula(y,v);return V-=l,V=Math.pow(10,V/10+v.ATHlower),V}function p(v){for(var y=v.internal_flags.ATH.l,V=v.internal_flags.ATH.psfb21,P=v.internal_flags.ATH.s,q=v.internal_flags.ATH.psfb12,R=v.internal_flags,n=v.out_samplerate,r=0;r<a1.SBMAX_l;r++){var e=R.scalefac_band.l[r],_=R.scalefac_band.l[r+1];y[r]=J.MAX_VALUE;for(var u=e;u<_;u++){var H=u*n/1152,U=_1(v,H);y[r]=Math.min(y[r],U)}}for(var r=0;r<a1.PSFB21;r++){var e=R.scalefac_band.psfb21[r],_=R.scalefac_band.psfb21[r+1];V[r]=J.MAX_VALUE;for(var u=e;u<_;u++){var H=u*n/1152,U=_1(v,H);V[r]=Math.min(V[r],U)}}for(var r=0;r<a1.SBMAX_s;r++){var e=R.scalefac_band.s[r],_=R.scalefac_band.s[r+1];P[r]=J.MAX_VALUE;for(var u=e;u<_;u++){var H=u*n/384,U=_1(v,H);P[r]=Math.min(P[r],U)}P[r]*=R.scalefac_band.s[r+1]-R.scalefac_band.s[r]}for(var r=0;r<a1.PSFB12;r++){var e=R.scalefac_band.psfb12[r],_=R.scalefac_band.psfb12[r+1];q[r]=J.MAX_VALUE;for(var u=e;u<_;u++){var H=u*n/384,U=_1(v,H);q[r]=Math.min(q[r],U)}q[r]*=R.scalefac_band.s[13]-R.scalefac_band.s[12]}if(v.noATH){for(var r=0;r<a1.SBMAX_l;r++)y[r]=1e-20;for(var r=0;r<a1.PSFB21;r++)V[r]=1e-20;for(var r=0;r<a1.SBMAX_s;r++)P[r]=1e-20;for(var r=0;r<a1.PSFB12;r++)q[r]=1e-20}R.ATH.floor=10*Math.log10(_1(v,-1))}this.iteration_init=function(v){var y=v.internal_flags,V=y.l3_side,P;if(y.iteration_init_init==0){for(y.iteration_init_init=1,V.main_data_begin=0,p(v),A[0]=0,P=1;P<h;P++)A[P]=Math.pow(P,4/3);for(P=0;P<h-1;P++)E[P]=P+1-Math.pow(.5*(A[P]+A[P+1]),.75);for(E[P]=.5,P=0;P<g;P++)L[P]=Math.pow(2,(P-210)*-.1875);for(P=0;P<=g+a;P++)x[P]=Math.pow(2,(P-210-a)*.25);r1.huffman_init(y);{var q,R,n,r;for(P=v.exp_nspsytune>>2&63,P>=32&&(P-=64),q=Math.pow(10,P/4/10),P=v.exp_nspsytune>>8&63,P>=32&&(P-=64),R=Math.pow(10,P/4/10),P=v.exp_nspsytune>>14&63,P>=32&&(P-=64),n=Math.pow(10,P/4/10),P=v.exp_nspsytune>>20&63,P>=32&&(P-=64),r=n*Math.pow(10,P/4/10),P=0;P<a1.SBMAX_l;P++){var e;P<=6?e=q:P<=13?e=R:P<=20?e=n:e=r,y.nsPsy.longfact[P]=e}for(P=0;P<a1.SBMAX_s;P++){var e;P<=5?e=q:P<=10?e=R:P<=11?e=n:e=r,y.nsPsy.shortfact[P]=e}}}},this.on_pe=function(v,y,V,P,q,R){var n=v.internal_flags,r=0,e,_=z(2),u,H=new u1(r),U=G.ResvMaxBits(v,P,H,R);r=H.bits;var B=r+U;for(B>d.MAX_BITS_PER_GRANULE&&(B=d.MAX_BITS_PER_GRANULE),e=0,u=0;u<n.channels_out;++u)V[u]=Math.min(d.MAX_BITS_PER_CHANNEL,r/n.channels_out),_[u]=0|V[u]*y[q][u]/700-V[u],_[u]>P*3/4&&(_[u]=P*3/4),_[u]<0&&(_[u]=0),_[u]+V[u]>d.MAX_BITS_PER_CHANNEL&&(_[u]=Math.max(0,d.MAX_BITS_PER_CHANNEL-V[u])),e+=_[u];if(e>U)for(u=0;u<n.channels_out;++u)_[u]=U*_[u]/e;for(u=0;u<n.channels_out;++u)V[u]+=_[u],U-=_[u];for(e=0,u=0;u<n.channels_out;++u)e+=V[u];if(e>d.MAX_BITS_PER_GRANULE){var Y=0;for(u=0;u<n.channels_out;++u)V[u]*=d.MAX_BITS_PER_GRANULE,V[u]/=e,Y+=V[u]}return B},this.reduce_side=function(v,y,V,P){C(v[0]+v[1]<=d.MAX_BITS_PER_GRANULE);var q=.33*(.5-y)/.5;q<0&&(q=0),q>.5&&(q=.5);var R=0|q*.5*(v[0]+v[1]);R>d.MAX_BITS_PER_CHANNEL-v[0]&&(R=d.MAX_BITS_PER_CHANNEL-v[0]),R<0&&(R=0),v[1]>=125&&(v[1]-R>125?(v[0]<V&&(v[0]+=R),v[1]-=R):(v[0]+=v[1]-125,v[1]=125)),R=v[0]+v[1],R>P&&(v[0]=P*v[0]/R,v[1]=P*v[1]/R),C(v[0]<=d.MAX_BITS_PER_CHANNEL),C(v[1]<=d.MAX_BITS_PER_CHANNEL),C(v[0]+v[1]<=d.MAX_BITS_PER_GRANULE)},this.athAdjust=function(v,y,V){var P=90.30873362,q=94.82444863,R=h1.FAST_LOG10_X(y,10),n=v*v,r=0;return R-=V,n>1e-20&&(r=1+h1.FAST_LOG10_X(n,10/P)),r<0&&(r=0),R*=r,R+=V+P-q,Math.pow(10,.1*R)},this.calc_xmin=function(v,y,V,P){var q=0,R=v.internal_flags,n,r=0,e=0,_=R.ATH,u=V.xr,H=v.VBR==O.vbr_mtrh?1:0,U=R.masking_lower;for((v.VBR==O.vbr_mtrh||v.VBR==O.vbr_mt)&&(U=1),n=0;n<V.psy_lmax;n++){var B,Y,n1,c1,g1,w1;v.VBR==O.vbr_rh||v.VBR==O.vbr_mtrh?Y=athAdjust(_.adjust,_.l[n],_.floor):Y=_.adjust*_.l[n],g1=V.width[n],n1=Y/g1,c1=M,w1=g1>>1,B=0;do{var d1,M1;d1=u[r]*u[r],B+=d1,c1+=d1<n1?d1:n1,r++,M1=u[r]*u[r],B+=M1,c1+=M1<n1?M1:n1,r++}while(--w1>0);if(B>Y&&e++,n==a1.SBPSY_l){var T1=Y*R.nsPsy.longfact[n];c1<T1&&(c1=T1)}if(H!=0&&(Y=c1),!v.ATHonly){var j1=y.en.l[n];if(j1>0){var T1;T1=B*y.thm.l[n]*U/j1,H!=0&&(T1*=R.nsPsy.longfact[n]),Y<T1&&(Y=T1)}}H!=0?P[q++]=Y:P[q++]=Y*R.nsPsy.longfact[n]}var h0=575;if(V.block_type!=a1.SHORT_TYPE)for(var s=576;s--!=0&&X.EQ(u[s],0);)h0=s;V.max_nonzero_coeff=h0;for(var i=V.sfb_smin;n<V.psymax;i++,n+=3){var g1,v1,R1;for(v.VBR==O.vbr_rh||v.VBR==O.vbr_mtrh?R1=athAdjust(_.adjust,_.s[i],_.floor):R1=_.adjust*_.s[i],g1=V.width[n],v1=0;v1<3;v1++){var B=0,Y,n1,c1,w1=g1>>1;n1=R1/g1,c1=M;do{var d1,M1;d1=u[r]*u[r],B+=d1,c1+=d1<n1?d1:n1,r++,M1=u[r]*u[r],B+=M1,c1+=M1<n1?M1:n1,r++}while(--w1>0);if(B>R1&&e++,i==a1.SBPSY_s){var T1=R1*R.nsPsy.shortfact[i];c1<T1&&(c1=T1)}if(H!=0?Y=c1:Y=R1,!v.ATHonly&&!v.ATHshort){var j1=y.en.s[i][v1];if(j1>0){var T1;T1=B*y.thm.s[i][v1]*U/j1,H!=0&&(T1*=R.nsPsy.shortfact[i]),Y<T1&&(Y=T1)}}H!=0?P[q++]=Y:P[q++]=Y*R.nsPsy.shortfact[i]}v.useTemporal&&(P[q-3]>P[q-3+1]&&(P[q-3+1]+=(P[q-3]-P[q-3+1])*R.decay),P[q-3+1]>P[q-3+2]&&(P[q-3+2]+=(P[q-3+1]-P[q-3+2])*R.decay))}return e};function t(v){this.s=v}this.calc_noise_core=function(v,y,V,P){var q=0,R=y.s,n=v.l3_enc;if(R>v.count1)for(;V--!=0;){var r;r=v.xr[R],R++,q+=r*r,r=v.xr[R],R++,q+=r*r}else if(R>v.big_values){var e=W(2);for(e[0]=0,e[1]=P;V--!=0;){var r;r=Math.abs(v.xr[R])-e[n[R]],R++,q+=r*r,r=Math.abs(v.xr[R])-e[n[R]],R++,q+=r*r}}else for(;V--!=0;){var r;r=Math.abs(v.xr[R])-A[n[R]]*P,R++,q+=r*r,r=Math.abs(v.xr[R])-A[n[R]]*P,R++,q+=r*r}return y.s=R,q},this.calc_noise=function(v,y,V,P,q){var R=0,n=0,r,e,_=0,u=0,H=0,U=-20,B=0,Y=v.scalefac,n1=0;for(P.over_SSD=0,r=0;r<v.psymax;r++){var c1=v.global_gain-(Y[n1++]+(v.preflag!=0?w[r]:0)<<v.scalefac_scale+1)-v.subblock_gain[v.window[r]]*8,g1=0;if(q!=null&&q.step[r]==c1)g1=q.noise[r],B+=v.width[r],V[R++]=g1/y[n++],g1=q.noise_log[r];else{var w1=Q(c1);if(e=v.width[r]>>1,B+v.width[r]>v.max_nonzero_coeff){var d1;d1=v.max_nonzero_coeff-B+1,d1>0?e=d1>>1:e=0}var M1=new t(B);g1=this.calc_noise_core(v,M1,e,w1),B=M1.s,q!=null&&(q.step[r]=c1,q.noise[r]=g1),g1=V[R++]=g1/y[n++],g1=h1.FAST_LOG10(Math.max(g1,1e-20)),q!=null&&(q.noise_log[r]=g1)}if(q!=null&&(q.global_gain=v.global_gain),H+=g1,g1>0){var T1;T1=Math.max(0|g1*10+.5,1),P.over_SSD+=T1*T1,_++,u+=g1}U=Math.max(U,g1)}return P.over_count=_,P.tot_noise=H,P.over_noise=u,P.max_noise=U,_},this.set_pinfo=function(v,y,V,P,q){var R=v.internal_flags,n,r,e,_,u,H=y.scalefac_scale==0?.5:1,U=y.scalefac,B=W(L3Side.SFBMAX),Y=W(L3Side.SFBMAX),n1=new CalcNoiseResult;calc_xmin(v,V,y,B),calc_noise(y,B,Y,n1,null);var c1=0;for(r=y.sfb_lmax,y.block_type!=a1.SHORT_TYPE&&y.mixed_block_flag==0&&(r=22),n=0;n<r;n++){var g1=R.scalefac_band.l[n],w1=R.scalefac_band.l[n+1],d1=w1-g1;for(_=0;c1<w1;c1++)_+=y.xr[c1]*y.xr[c1];_/=d1,u=1e15,R.pinfo.en[P][q][n]=u*_,R.pinfo.xfsf[P][q][n]=u*B[n]*Y[n]/d1,V.en.l[n]>0&&!v.ATHonly?_=_/V.en.l[n]:_=0,R.pinfo.thr[P][q][n]=u*Math.max(_*V.thm.l[n],R.ATH.l[n]),R.pinfo.LAMEsfb[P][q][n]=0,y.preflag!=0&&n>=11&&(R.pinfo.LAMEsfb[P][q][n]=-H*w[n]),n<a1.SBPSY_l&&(C(U[n]>=0),R.pinfo.LAMEsfb[P][q][n]-=H*U[n])}if(y.block_type==a1.SHORT_TYPE)for(r=n,n=y.sfb_smin;n<a1.SBMAX_s;n++)for(var g1=R.scalefac_band.s[n],w1=R.scalefac_band.s[n+1],d1=w1-g1,M1=0;M1<3;M1++){for(_=0,e=g1;e<w1;e++)_+=y.xr[c1]*y.xr[c1],c1++;_=Math.max(_/d1,1e-20),u=1e15,R.pinfo.en_s[P][q][3*n+M1]=u*_,R.pinfo.xfsf_s[P][q][3*n+M1]=u*B[r]*Y[r]/d1,V.en.s[n][M1]>0?_=_/V.en.s[n][M1]:_=0,(v.ATHonly||v.ATHshort)&&(_=0),R.pinfo.thr_s[P][q][3*n+M1]=u*Math.max(_*V.thm.s[n][M1],R.ATH.s[n]),R.pinfo.LAMEsfb_s[P][q][3*n+M1]=-2*y.subblock_gain[M1],n<a1.SBPSY_s&&(R.pinfo.LAMEsfb_s[P][q][3*n+M1]-=H*U[r]),r++}R.pinfo.LAMEqss[P][q]=y.global_gain,R.pinfo.LAMEmainbits[P][q]=y.part2_3_length+y.part2_length,R.pinfo.LAMEsfbits[P][q]=y.part2_length,R.pinfo.over[P][q]=n1.over_count,R.pinfo.max_noise[P][q]=n1.max_noise*10,R.pinfo.over_noise[P][q]=n1.over_noise*10,R.pinfo.tot_noise[P][q]=n1.tot_noise*10,R.pinfo.over_SSD[P][q]=n1.over_SSD}}return Sa=b,Sa}var wa,te;function Ie(){if(te)return wa;te=1;var k=Q1,Z=k.System,O=k.Arrays,J=k.new_int,h1=k.assert,W=t0(),z=Pa,C=Ea,a1=Ve();function u1(){var d=null;this.qupvt=null,this.setModules=function(R){this.qupvt=R,d=R};function b(R){this.bits=0|R}var X=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function r1(R,n,r,e,_,u){var H=.5946/n;for(R=R>>1;R--!=0;)_[u++]=H>r[e++]?0:1,_[u++]=H>r[e++]?0:1}function G(R,n,r,e,_,u){R=R>>1;var H=R%2;for(R=R>>1;R--!=0;){var U,B,Y,n1,c1,g1,w1,d1;U=r[e++]*n,B=r[e++]*n,c1=0|U,Y=r[e++]*n,g1=0|B,n1=r[e++]*n,w1=0|Y,U+=d.adj43[c1],d1=0|n1,B+=d.adj43[g1],_[u++]=0|U,Y+=d.adj43[w1],_[u++]=0|B,n1+=d.adj43[d1],_[u++]=0|Y,_[u++]=0|n1}if(H!=0){var U,B,c1,g1;U=r[e++]*n,B=r[e++]*n,c1=0|U,g1=0|B,U+=d.adj43[c1],B+=d.adj43[g1],_[u++]=0|U,_[u++]=0|B}}function s1(R,n,r,e,_){var u,H,U=0,B,Y=0,n1=0,c1=0,g1=n,w1=0,d1=g1,M1=0,T1=R,j1=0;for(B=_!=null&&e.global_gain==_.global_gain,e.block_type==W.SHORT_TYPE?H=38:H=21,u=0;u<=H;u++){var h0=-1;if((B||e.block_type==W.NORM_TYPE)&&(h0=e.global_gain-(e.scalefac[u]+(e.preflag!=0?d.pretab[u]:0)<<e.scalefac_scale+1)-e.subblock_gain[e.window[u]]*8),h1(e.width[u]>=0),B&&_.step[u]==h0)Y!=0&&(G(Y,r,T1,j1,d1,M1),Y=0),n1!=0&&(r1(n1,r,T1,j1,d1,M1),n1=0);else{var s=e.width[u];if(U+e.width[u]>e.max_nonzero_coeff){var i;i=e.max_nonzero_coeff-U+1,O.fill(n,e.max_nonzero_coeff,576,0),s=i,s<0&&(s=0),u=H+1}if(Y==0&&n1==0&&(d1=g1,M1=w1,T1=R,j1=c1),_!=null&&_.sfb_count1>0&&u>=_.sfb_count1&&_.step[u]>0&&h0>=_.step[u]?(Y!=0&&(G(Y,r,T1,j1,d1,M1),Y=0,d1=g1,M1=w1,T1=R,j1=c1),n1+=s):(n1!=0&&(r1(n1,r,T1,j1,d1,M1),n1=0,d1=g1,M1=w1,T1=R,j1=c1),Y+=s),s<=0){n1!=0&&(r1(n1,r,T1,j1,d1,M1),n1=0),Y!=0&&(G(Y,r,T1,j1,d1,M1),Y=0);break}}u<=H&&(w1+=e.width[u],c1+=e.width[u],U+=e.width[u])}Y!=0&&(G(Y,r,T1,j1,d1,M1),Y=0),n1!=0&&(r1(n1,r,T1,j1,d1,M1),n1=0)}function Q(R,n,r){var e=0,_=0;do{var u=R[n++],H=R[n++];e<u&&(e=u),_<H&&(_=H)}while(n<r);return e<_&&(e=_),e}function M(R,n,r,e,_,u){var H=z.ht[e].xlen*65536+z.ht[_].xlen,U=0,B;do{var Y=R[n++],n1=R[n++];Y!=0&&(Y>14&&(Y=15,U+=H),Y*=16),n1!=0&&(n1>14&&(n1=15,U+=H),Y+=n1),U+=z.largetbl[Y]}while(n<r);return B=U&65535,U>>=16,U>B&&(U=B,e=_),u.bits+=U,e}function f(R,n,r,e){var _=0,u=z.ht[1].hlen;do{var H=R[n+0]*2+R[n+1];n+=2,_+=u[H]}while(n<r);return e.bits+=_,1}function h(R,n,r,e,_){var u=0,H,U=z.ht[e].xlen,B;e==2?B=z.table23:B=z.table56;do{var Y=R[n+0]*U+R[n+1];n+=2,u+=B[Y]}while(n<r);return H=u&65535,u>>=16,u>H&&(u=H,e++),_.bits+=u,e}function g(R,n,r,e,_){var u=0,H=0,U=0,B=z.ht[e].xlen,Y=z.ht[e].hlen,n1=z.ht[e+1].hlen,c1=z.ht[e+2].hlen;do{var g1=R[n+0]*B+R[n+1];n+=2,u+=Y[g1],H+=n1[g1],U+=c1[g1]}while(n<r);var w1=e;return u>H&&(u=H,w1++),u>U&&(u=U,w1=e+2),_.bits+=u,w1}var a=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function l(R,n,r,e){var _=Q(R,n,r);switch(_){case 0:return _;case 1:return f(R,n,r,e);case 2:case 3:return h(R,n,r,a[_-1],e);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return g(R,n,r,a[_-1],e);default:if(_>a1.IXMAX_VAL)return e.bits=a1.LARGE_BITS,-1;_-=15;var u;for(u=24;u<32&&!(z.ht[u].linmax>=_);u++);var H;for(H=u-8;H<24&&!(z.ht[H].linmax>=_);H++);return M(R,n,r,H,u,e)}}this.noquant_count_bits=function(R,n,r){var e=n.l3_enc,_=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(r!=null&&(r.sfb_count1=0);_>1&&!(e[_-1]|e[_-2]);_-=2);n.count1=_;for(var u=0,H=0;_>3;_-=4){var U;if(((e[_-1]|e[_-2]|e[_-3]|e[_-4])&2147483647)>1)break;U=((e[_-4]*2+e[_-3])*2+e[_-2])*2+e[_-1],u+=z.t32l[U],H+=z.t33l[U]}var B=u;if(n.count1table_select=0,u>H&&(B=H,n.count1table_select=1),n.count1bits=B,n.big_values=_,_==0)return B;if(n.block_type==W.SHORT_TYPE)u=3*R.scalefac_band.s[3],u>n.big_values&&(u=n.big_values),H=n.big_values;else if(n.block_type==W.NORM_TYPE){if(u=n.region0_count=R.bv_scf[_-2],H=n.region1_count=R.bv_scf[_-1],h1(u+H+2<W.SBPSY_l),H=R.scalefac_band.l[u+H+2],u=R.scalefac_band.l[u+1],H<_){var Y=new b(B);n.table_select[2]=l(e,H,_,Y),B=Y.bits}}else n.region0_count=7,n.region1_count=W.SBMAX_l-1-7-1,u=R.scalefac_band.l[8],H=_,u>H&&(u=H);if(u=Math.min(u,_),H=Math.min(H,_),0<u){var Y=new b(B);n.table_select[0]=l(e,0,u,Y),B=Y.bits}if(u<H){var Y=new b(B);n.table_select[1]=l(e,u,H,Y),B=Y.bits}if(R.use_best_huffman==2&&(n.part2_3_length=B,best_huffman_divide(R,n),B=n.part2_3_length),r!=null&&n.block_type==W.NORM_TYPE){for(var n1=0;R.scalefac_band.l[n1]<n.big_values;)n1++;r.sfb_count1=n1}return B},this.count_bits=function(R,n,r,e){var _=r.l3_enc,u=a1.IXMAX_VAL/d.IPOW20(r.global_gain);if(r.xrpow_max>u)return a1.LARGE_BITS;if(s1(n,_,d.IPOW20(r.global_gain),r,e),R.substep_shaping&2)for(var H=0,U=r.global_gain+r.scalefac_scale,B=.634521682242439/d.IPOW20(U),Y=0;Y<r.sfbmax;Y++){var n1=r.width[Y];if(R.pseudohalf[Y]==0)H+=n1;else{var c1;for(c1=H,H+=n1;c1<H;++c1)_[c1]=n[c1]>=B?_[c1]:0}}return this.noquant_count_bits(R,r,e)};function w(R,n,r,e,_,u,H){for(var U=n.big_values,B=0;B<=22;B++)e[B]=a1.LARGE_BITS;for(var B=0;B<16;B++){var Y=R.scalefac_band.l[B+1];if(Y>=U)break;var n1=0,c1=new b(n1),g1=l(r,0,Y,c1);n1=c1.bits;for(var w1=0;w1<8;w1++){var d1=R.scalefac_band.l[B+w1+2];if(d1>=U)break;var M1=n1;c1=new b(M1);var T1=l(r,Y,d1,c1);M1=c1.bits,e[B+w1]>M1&&(e[B+w1]=M1,_[B+w1]=B,u[B+w1]=g1,H[B+w1]=T1)}}}function x(R,n,r,e,_,u,H,U){for(var B=n.big_values,Y=2;Y<W.SBMAX_l+1;Y++){var n1=R.scalefac_band.l[Y];if(n1>=B)break;var c1=_[Y-2]+n.count1bits;if(r.part2_3_length<=c1)break;var g1=new b(c1),w1=l(e,n1,B,g1);c1=g1.bits,!(r.part2_3_length<=c1)&&(r.assign(n),r.part2_3_length=c1,r.region0_count=u[Y-2],r.region1_count=Y-2-u[Y-2],r.table_select[0]=H[Y-2],r.table_select[1]=U[Y-2],r.table_select[2]=w1)}}this.best_huffman_divide=function(R,n){var r=new C,e=n.l3_enc,_=J(23),u=J(23),H=J(23),U=J(23);if(!(n.block_type==W.SHORT_TYPE&&R.mode_gr==1)){r.assign(n),n.block_type==W.NORM_TYPE&&(w(R,n,e,_,u,H,U),x(R,r,n,e,_,u,H,U));var B=r.big_values;if(!(B==0||(e[B-2]|e[B-1])>1)&&(B=n.count1+2,!(B>576))){r.assign(n),r.count1=B;for(var Y=0,n1=0;B>r.big_values;B-=4){var c1=((e[B-4]*2+e[B-3])*2+e[B-2])*2+e[B-1];Y+=z.t32l[c1],n1+=z.t33l[c1]}if(r.big_values=B,r.count1table_select=0,Y>n1&&(Y=n1,r.count1table_select=1),r.count1bits=Y,r.block_type==W.NORM_TYPE)x(R,r,n,e,_,u,H,U);else{if(r.part2_3_length=Y,Y=R.scalefac_band.l[8],Y>B&&(Y=B),Y>0){var g1=new b(r.part2_3_length);r.table_select[0]=l(e,0,Y,g1),r.part2_3_length=g1.bits}if(B>Y){var g1=new b(r.part2_3_length);r.table_select[1]=l(e,Y,B,g1),r.part2_3_length=g1.bits}n.part2_3_length>r.part2_3_length&&n.assign(r)}}}};var L=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],A=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],E=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],_1=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];u1.slen1_tab=E,u1.slen2_tab=_1;function p(R,n){for(var r,e=n.tt[1][R],_=n.tt[0][R],u=0;u<z.scfsi_band.length-1;u++){for(r=z.scfsi_band[u];r<z.scfsi_band[u+1]&&!(_.scalefac[r]!=e.scalefac[r]&&e.scalefac[r]>=0);r++);if(r==z.scfsi_band[u+1]){for(r=z.scfsi_band[u];r<z.scfsi_band[u+1];r++)e.scalefac[r]=-1;n.scfsi[R][u]=1}}var H=0,U=0;for(r=0;r<11;r++)e.scalefac[r]!=-1&&(U++,H<e.scalefac[r]&&(H=e.scalefac[r]));for(var B=0,Y=0;r<W.SBPSY_l;r++)e.scalefac[r]!=-1&&(Y++,B<e.scalefac[r]&&(B=e.scalefac[r]));for(var u=0;u<16;u++)if(H<L[u]&&B<A[u]){var n1=E[u]*U+_1[u]*Y;e.part2_length>n1&&(e.part2_length=n1,e.scalefac_compress=u)}}this.best_scalefac_store=function(R,n,r,e){var _=e.tt[n][r],u,H,U,B,Y=0;for(U=0,u=0;u<_.sfbmax;u++){var n1=_.width[u];for(U+=n1,B=-n1;B<0&&_.l3_enc[B+U]==0;B++);B==0&&(_.scalefac[u]=Y=-2)}if(_.scalefac_scale==0&&_.preflag==0){var c1=0;for(u=0;u<_.sfbmax;u++)_.scalefac[u]>0&&(c1|=_.scalefac[u]);if(!(c1&1)&&c1!=0){for(u=0;u<_.sfbmax;u++)_.scalefac[u]>0&&(_.scalefac[u]>>=1);_.scalefac_scale=Y=1}}if(_.preflag==0&&_.block_type!=W.SHORT_TYPE&&R.mode_gr==2){for(u=11;u<W.SBPSY_l&&!(_.scalefac[u]<d.pretab[u]&&_.scalefac[u]!=-2);u++);if(u==W.SBPSY_l){for(u=11;u<W.SBPSY_l;u++)_.scalefac[u]>0&&(_.scalefac[u]-=d.pretab[u]);_.preflag=Y=1}}for(H=0;H<4;H++)e.scfsi[r][H]=0;for(R.mode_gr==2&&n==1&&e.tt[0][r].block_type!=W.SHORT_TYPE&&e.tt[1][r].block_type!=W.SHORT_TYPE&&(p(r,e),Y=0),u=0;u<_.sfbmax;u++)_.scalefac[u]==-2&&(_.scalefac[u]=0);Y!=0&&(R.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(R,_))};function t(R,n){for(var r=0;r<n;++r)if(R[r]<0)return!1;return!0}var v=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],y=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],V=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(R){var n,r,e=0,_=0,u,H=R.scalefac;if(h1(t(H,R.sfbmax)),R.block_type==W.SHORT_TYPE)u=v,R.mixed_block_flag!=0&&(u=y);else if(u=V,R.preflag==0){for(r=11;r<W.SBPSY_l&&!(H[r]<d.pretab[r]);r++);if(r==W.SBPSY_l)for(R.preflag=1,r=11;r<W.SBPSY_l;r++)H[r]-=d.pretab[r]}for(r=0;r<R.sfbdivide;r++)e<H[r]&&(e=H[r]);for(;r<R.sfbmax;r++)_<H[r]&&(_=H[r]);for(R.part2_length=a1.LARGE_BITS,n=0;n<16;n++)e<L[n]&&_<A[n]&&R.part2_length>u[n]&&(R.part2_length=u[n],R.scalefac_compress=n);return R.part2_length==a1.LARGE_BITS};var P=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(R,n){var r,e,_,u,H,U,B,Y,n1=J(4),c1=n.scalefac;for(n.preflag!=0?r=2:r=0,B=0;B<4;B++)n1[B]=0;if(n.block_type==W.SHORT_TYPE){e=1;var g1=d.nr_of_sfb_block[r][e];for(Y=0,_=0;_<4;_++)for(u=g1[_]/3,B=0;B<u;B++,Y++)for(H=0;H<3;H++)c1[Y*3+H]>n1[_]&&(n1[_]=c1[Y*3+H])}else{e=0;var g1=d.nr_of_sfb_block[r][e];for(Y=0,_=0;_<4;_++)for(u=g1[_],B=0;B<u;B++,Y++)c1[Y]>n1[_]&&(n1[_]=c1[Y])}for(U=!1,_=0;_<4;_++)n1[_]>P[r][_]&&(U=!0);if(!U){var w1,d1,M1,T1;for(n.sfb_partition_table=d.nr_of_sfb_block[r][e],_=0;_<4;_++)n.slen[_]=q[n1[_]];switch(w1=n.slen[0],d1=n.slen[1],M1=n.slen[2],T1=n.slen[3],r){case 0:n.scalefac_compress=(w1*5+d1<<4)+(M1<<2)+T1;break;case 1:n.scalefac_compress=400+(w1*5+d1<<2)+M1;break;case 2:n.scalefac_compress=500+w1*3+d1;break;default:Z.err.printf(`intensity stereo not implemented yet
`);break}}if(!U)for(h1(n.sfb_partition_table!=null),n.part2_length=0,_=0;_<4;_++)n.part2_length+=n.slen[_]*n.sfb_partition_table[_];return U};var q=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(R){for(var n=2;n<=576;n+=2){for(var r=0,e;R.scalefac_band.l[++r]<n;);for(e=X[r][0];R.scalefac_band.l[e+1]>n;)e--;for(e<0&&(e=X[r][0]),R.bv_scf[n-2]=e,e=X[r][1];R.scalefac_band.l[e+R.bv_scf[n-2]+2]>n;)e--;e<0&&(e=X[r][1]),R.bv_scf[n-1]=e}}}return wa=u1,wa}var Ra,se;function Va(){if(se)return Ra;se=1;var k=Q1,Z=k.System,O=k.Arrays,J=k.new_byte,h1=k.new_float_n,W=k.new_int,z=k.assert,C=Ie(),a1=Pa,u1=t0(),d=na;b.EQ=function(X,r1){return Math.abs(X)>Math.abs(r1)?Math.abs(X-r1)<=Math.abs(X)*1e-6:Math.abs(X-r1)<=Math.abs(r1)*1e-6},b.NEQ=function(X,r1){return!b.EQ(X,r1)};function b(){var X=Ia(),r1=this,G=32773,s1=null,Q=null,M=null,f=null;this.setModules=function(n,r,e,_){s1=n,Q=r,M=e,f=_};var h=null,g=0,a=0,l=0;this.getframebits=function(n){var r=n.internal_flags,e;r.bitrate_index!=0?e=a1.bitrate_table[n.version][r.bitrate_index]:e=n.brate;var _=0|(n.version+1)*72e3*e/n.out_samplerate+r.padding;return 8*_};function w(n){Z.arraycopy(n.header[n.w_ptr].buf,0,h,a,n.sideinfo_len),a+=n.sideinfo_len,g+=n.sideinfo_len*8,n.w_ptr=n.w_ptr+1&d.MAX_HEADER_BUF-1}function x(n,r,e){for(;e>0;){var _;l==0&&(l=8,a++,z(a<X.LAME_MAXMP3BUFFER),z(n.header[n.w_ptr].write_timing>=g),n.header[n.w_ptr].write_timing==g&&w(n),h[a]=0),_=Math.min(e,l),e-=_,l-=_,h[a]|=r>>e<<l,g+=_}}function L(n,r,e){for(;e>0;){var _;l==0&&(l=8,a++,z(a<X.LAME_MAXMP3BUFFER),h[a]=0),_=Math.min(e,l),e-=_,l-=_,h[a]|=r>>e<<l,g+=_}}function A(n,r){var e=n.internal_flags,_;if(r>=8&&(x(e,76,8),r-=8),r>=8&&(x(e,65,8),r-=8),r>=8&&(x(e,77,8),r-=8),r>=8&&(x(e,69,8),r-=8),r>=32){var u=M.getLameShortVersion();if(r>=32)for(_=0;_<u.length&&r>=8;++_)r-=8,x(e,u.charAt(_),8)}for(;r>=1;r-=1)x(e,e.ancillary_flag,1),e.ancillary_flag^=n.disable_reservoir?0:1}function E(n,r,e){for(var _=n.header[n.h_ptr].ptr;e>0;){var u=Math.min(e,8-(_&7));e-=u,n.header[n.h_ptr].buf[_>>3]|=r>>e<<8-(_&7)-u,_+=u}n.header[n.h_ptr].ptr=_}function _1(n,r){n<<=8;for(var e=0;e<8;e++)n<<=1,r<<=1,(r^n)&65536&&(r^=G);return r}this.CRC_writeheader=function(n,r){var e=65535;e=_1(r[2]&255,e),e=_1(r[3]&255,e);for(var _=6;_<n.sideinfo_len;_++)e=_1(r[_]&255,e);r[4]=byte(e>>8),r[5]=byte(e&255)};function p(n,r){var e=n.internal_flags,_,u,H;if(_=e.l3_side,e.header[e.h_ptr].ptr=0,O.fill(e.header[e.h_ptr].buf,0,e.sideinfo_len,0),n.out_samplerate<16e3?E(e,4094,12):E(e,4095,12),E(e,n.version,1),E(e,1,2),E(e,n.error_protection?0:1,1),E(e,e.bitrate_index,4),E(e,e.samplerate_index,2),E(e,e.padding,1),E(e,n.extension,1),E(e,n.mode.ordinal(),2),E(e,e.mode_ext,2),E(e,n.copyright,1),E(e,n.original,1),E(e,n.emphasis,2),n.error_protection&&E(e,0,16),n.version==1){for(z(_.main_data_begin>=0),E(e,_.main_data_begin,9),e.channels_out==2?E(e,_.private_bits,3):E(e,_.private_bits,5),H=0;H<e.channels_out;H++){var U;for(U=0;U<4;U++)E(e,_.scfsi[H][U],1)}for(u=0;u<2;u++)for(H=0;H<e.channels_out;H++){var B=_.tt[u][H];E(e,B.part2_3_length+B.part2_length,12),E(e,B.big_values/2,9),E(e,B.global_gain,8),E(e,B.scalefac_compress,4),B.block_type!=u1.NORM_TYPE?(E(e,1,1),E(e,B.block_type,2),E(e,B.mixed_block_flag,1),B.table_select[0]==14&&(B.table_select[0]=16),E(e,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),E(e,B.table_select[1],5),E(e,B.subblock_gain[0],3),E(e,B.subblock_gain[1],3),E(e,B.subblock_gain[2],3)):(E(e,0,1),B.table_select[0]==14&&(B.table_select[0]=16),E(e,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),E(e,B.table_select[1],5),B.table_select[2]==14&&(B.table_select[2]=16),E(e,B.table_select[2],5),z(0<=B.region0_count&&B.region0_count<16),z(0<=B.region1_count&&B.region1_count<8),E(e,B.region0_count,4),E(e,B.region1_count,3)),E(e,B.preflag,1),E(e,B.scalefac_scale,1),E(e,B.count1table_select,1)}}else for(z(_.main_data_begin>=0),E(e,_.main_data_begin,8),E(e,_.private_bits,e.channels_out),u=0,H=0;H<e.channels_out;H++){var B=_.tt[u][H];E(e,B.part2_3_length+B.part2_length,12),E(e,B.big_values/2,9),E(e,B.global_gain,8),E(e,B.scalefac_compress,9),B.block_type!=u1.NORM_TYPE?(E(e,1,1),E(e,B.block_type,2),E(e,B.mixed_block_flag,1),B.table_select[0]==14&&(B.table_select[0]=16),E(e,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),E(e,B.table_select[1],5),E(e,B.subblock_gain[0],3),E(e,B.subblock_gain[1],3),E(e,B.subblock_gain[2],3)):(E(e,0,1),B.table_select[0]==14&&(B.table_select[0]=16),E(e,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),E(e,B.table_select[1],5),B.table_select[2]==14&&(B.table_select[2]=16),E(e,B.table_select[2],5),z(0<=B.region0_count&&B.region0_count<16),z(0<=B.region1_count&&B.region1_count<8),E(e,B.region0_count,4),E(e,B.region1_count,3)),E(e,B.scalefac_scale,1),E(e,B.count1table_select,1)}n.error_protection&&CRC_writeheader(e,e.header[e.h_ptr].buf);{var Y=e.h_ptr;z(e.header[Y].ptr==e.sideinfo_len*8),e.h_ptr=Y+1&d.MAX_HEADER_BUF-1,e.header[e.h_ptr].write_timing=e.header[Y].write_timing+r,e.h_ptr==e.w_ptr&&Z.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function t(n,r){var e=a1.ht[r.count1table_select+32],_,u=0,H=r.big_values,U=r.big_values;for(z(r.count1table_select<2),_=(r.count1-r.big_values)/4;_>0;--_){var B=0,Y=0,n1;n1=r.l3_enc[H+0],n1!=0&&(Y+=8,r.xr[U+0]<0&&B++),n1=r.l3_enc[H+1],n1!=0&&(Y+=4,B*=2,r.xr[U+1]<0&&B++),n1=r.l3_enc[H+2],n1!=0&&(Y+=2,B*=2,r.xr[U+2]<0&&B++),n1=r.l3_enc[H+3],n1!=0&&(Y++,B*=2,r.xr[U+3]<0&&B++),H+=4,U+=4,x(n,B+e.table[Y],e.hlen[Y]),u+=e.hlen[Y]}return u}function v(n,r,e,_,u){var H=a1.ht[r],U=0;if(r==0)return U;for(var B=e;B<_;B+=2){var Y=0,n1=0,c1=H.xlen,g1=H.xlen,w1=0,d1=u.l3_enc[B],M1=u.l3_enc[B+1];if(d1!=0&&(u.xr[B]<0&&w1++,Y--),r>15){if(d1>14){var T1=d1-15;z(T1<=H.linmax),w1|=T1<<1,n1=c1,d1=15}if(M1>14){var j1=M1-15;z(j1<=H.linmax),w1<<=c1,w1|=j1,n1+=c1,M1=15}g1=16}M1!=0&&(w1<<=1,u.xr[B+1]<0&&w1++,Y--),d1=d1*g1+M1,n1-=Y,Y+=H.hlen[d1],x(n,H.table[d1],Y),x(n,w1,n1),U+=Y+n1}return U}function y(n,r){var e=3*n.scalefac_band.s[3];e>r.big_values&&(e=r.big_values);var _=v(n,r.table_select[0],0,e,r);return _+=v(n,r.table_select[1],e,r.big_values,r),_}function V(n,r){var e,_,u,H;e=r.big_values;var U=r.region0_count+1;return z(U<n.scalefac_band.l.length),u=n.scalefac_band.l[U],U+=r.region1_count+1,z(U<n.scalefac_band.l.length),H=n.scalefac_band.l[U],u>e&&(u=e),H>e&&(H=e),_=v(n,r.table_select[0],0,u,r),_+=v(n,r.table_select[1],u,H,r),_+=v(n,r.table_select[2],H,e,r),_}function P(n){var r,e,_,u,H=0,U=n.internal_flags,B=U.l3_side;if(n.version==1)for(r=0;r<2;r++)for(e=0;e<U.channels_out;e++){var Y=B.tt[r][e],n1=C.slen1_tab[Y.scalefac_compress],c1=C.slen2_tab[Y.scalefac_compress];for(u=0,_=0;_<Y.sfbdivide;_++)Y.scalefac[_]!=-1&&(x(U,Y.scalefac[_],n1),u+=n1);for(;_<Y.sfbmax;_++)Y.scalefac[_]!=-1&&(x(U,Y.scalefac[_],c1),u+=c1);z(u==Y.part2_length),Y.block_type==u1.SHORT_TYPE?u+=y(U,Y):u+=V(U,Y),u+=t(U,Y),z(u==Y.part2_3_length+Y.part2_length),H+=u}else for(r=0,e=0;e<U.channels_out;e++){var Y=B.tt[r][e],g1,w1,d1=0;if(z(Y.sfb_partition_table!=null),u=0,_=0,w1=0,Y.block_type==u1.SHORT_TYPE){for(;w1<4;w1++){var M1=Y.sfb_partition_table[w1]/3,T1=Y.slen[w1];for(g1=0;g1<M1;g1++,_++)x(U,Math.max(Y.scalefac[_*3+0],0),T1),x(U,Math.max(Y.scalefac[_*3+1],0),T1),x(U,Math.max(Y.scalefac[_*3+2],0),T1),d1+=3*T1}u+=y(U,Y)}else{for(;w1<4;w1++){var M1=Y.sfb_partition_table[w1],T1=Y.slen[w1];for(g1=0;g1<M1;g1++,_++)x(U,Math.max(Y.scalefac[_],0),T1),d1+=T1}u+=V(U,Y)}u+=t(U,Y),z(u==Y.part2_3_length),z(d1==Y.part2_length),H+=d1+u}return H}function q(){this.total=0}function R(n,r){var e=n.internal_flags,_,u,H,U,B;return B=e.w_ptr,U=e.h_ptr-1,U==-1&&(U=d.MAX_HEADER_BUF-1),_=e.header[U].write_timing-g,r.total=_,_>=0&&(u=1+U-B,U<B&&(u=1+U-B+d.MAX_HEADER_BUF),_-=u*8*e.sideinfo_len),H=r1.getframebits(n),_+=H,r.total+=H,r.total%8!=0?r.total=1+r.total/8:r.total=r.total/8,r.total+=a+1,_<0&&Z.err.println(`strange error flushing buffer ... 
`),_}this.flush_bitstream=function(n){var r=n.internal_flags,e,_,u=r.h_ptr-1;if(u==-1&&(u=d.MAX_HEADER_BUF-1),e=r.l3_side,!((_=R(n,new q))<0)){if(A(n,_),z(r.header[u].write_timing+this.getframebits(n)==g),r.ResvSize=0,e.main_data_begin=0,r.findReplayGain){var H=s1.GetTitleGain(r.rgdata);z(NEQ(H,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),r.RadioGain=Math.floor(H*10+.5)|0}r.findPeakSample&&(r.noclipGainChange=Math.ceil(Math.log10(r.PeakSample/32767)*20*10)|0,r.noclipGainChange>0&&(EQ(n.scale,1)||EQ(n.scale,0))?r.noclipScale=Math.floor(32767/r.PeakSample*100)/100:r.noclipScale=-1)}},this.add_dummy_byte=function(n,r,e){for(var _=n.internal_flags,u;e-- >0;)for(L(_,r,8),u=0;u<d.MAX_HEADER_BUF;++u)_.header[u].write_timing+=8},this.format_bitstream=function(n){var r=n.internal_flags,e;e=r.l3_side;var _=this.getframebits(n);A(n,e.resvDrain_pre),p(n,_);var u=8*r.sideinfo_len;if(u+=P(n),A(n,e.resvDrain_post),u+=e.resvDrain_post,e.main_data_begin+=(_-u)/8,R(n,new q)!=r.ResvSize&&Z.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),e.main_data_begin*8!=r.ResvSize&&(Z.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*e.main_data_begin,r.ResvSize,e.resvDrain_post,e.resvDrain_pre,8*r.sideinfo_len,u-e.resvDrain_post-8*r.sideinfo_len,u,u%8,_),Z.err.println("This is a fatal error.  It has several possible causes:"),Z.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Z.err.println(" 9%%  Your system is overclocked"),Z.err.println(" 1%%  bug in LAME encoding library"),r.ResvSize=e.main_data_begin*8),g>1e9){var H;for(H=0;H<d.MAX_HEADER_BUF;++H)r.header[H].write_timing-=g;g=0}return 0},this.copy_buffer=function(n,r,e,_,u){var H=a+1;if(H<=0)return 0;if(_!=0&&H>_)return-1;if(Z.arraycopy(h,0,r,e,H),a=-1,l=0,u!=0){var U=W(1);if(U[0]=n.nMusicCRC,f.updateMusicCRC(U,r,e,H),n.nMusicCRC=U[0],H>0&&(n.VBR_seek_table.nBytesWritten+=H),n.decode_on_the_fly){for(var B=h1([2,1152]),Y=H,n1=-1,c1;n1!=0;)if(n1=Q.hip_decode1_unclipped(n.hip,r,e,Y,B[0],B[1]),Y=0,n1==-1&&(n1=0),n1>0){if(n.findPeakSample){for(c1=0;c1<n1;c1++)B[0][c1]>n.PeakSample?n.PeakSample=B[0][c1]:-B[0][c1]>n.PeakSample&&(n.PeakSample=-B[0][c1]);if(n.channels_out>1)for(c1=0;c1<n1;c1++)B[1][c1]>n.PeakSample?n.PeakSample=B[1][c1]:-B[1][c1]>n.PeakSample&&(n.PeakSample=-B[1][c1])}if(n.findReplayGain&&s1.AnalyzeSamples(n.rgdata,B[0],0,B[1],0,n1,n.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return H},this.init_bit_stream_w=function(n){h=J(X.LAME_MAXMP3BUFFER),n.h_ptr=n.w_ptr=0,n.header[n.h_ptr].write_timing=0,a=-1,l=0,g=0}}return Ra=b,Ra}var Aa,re;function Ia(){if(re)return Aa;re=1;var k=Q1,Z=k.System,O=k.VbrMode,J=k.ShortBlock,h1=k.new_float,W=k.new_int_n,z=k.new_short_n,C=k.assert,a1=Qe,u1=Ke,d=na,b=M2,X=w2,r1=x2,G=Va(),s1=Pa,Q=t0();function M(){var f=W0,h=this,g=128*1024;M.V9=410,M.V8=420,M.V7=430,M.V6=440,M.V5=450,M.V4=460,M.V3=470,M.V2=480,M.V1=490,M.V0=500,M.R3MIX=1e3,M.STANDARD=1001,M.EXTREME=1002,M.INSANE=1003,M.STANDARD_FAST=1004,M.EXTREME_FAST=1005,M.MEDIUM=1006,M.MEDIUM_FAST=1007;var a=16384+g;M.LAME_MAXMP3BUFFER=a;var l,w,x,L,A,E=new a1,_1,p,t;this.enc=new Q,this.setModules=function(s,i,v1,R1,I1,E1,k1,B1,L1){l=s,w=i,x=v1,L=R1,A=I1,_1=E1,p=B1,t=L1,this.enc.setModules(w,E,L,_1)};function v(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=h1(Q.SBMAX_l),this.bo_s_weight=h1(Q.SBMAX_s)}function y(){this.lowerlimit=0}function V(s,i){this.lowpass=i}var P=4294479419;function q(s){var i;return s.class_id=P,i=s.internal_flags=new d,s.mode=f.NOT_SET,s.original=1,s.in_samplerate=44100,s.num_channels=2,s.num_samples=-1,s.bWriteVbrTag=!0,s.quality=-1,s.short_blocks=null,i.subblock_gain=-1,s.lowpassfreq=0,s.highpassfreq=0,s.lowpasswidth=-1,s.highpasswidth=-1,s.VBR=O.vbr_off,s.VBR_q=4,s.ATHcurve=-1,s.VBR_mean_bitrate_kbps=128,s.VBR_min_bitrate_kbps=0,s.VBR_max_bitrate_kbps=0,s.VBR_hard_min=0,i.VBR_min_bitrate=1,i.VBR_max_bitrate=13,s.quant_comp=-1,s.quant_comp_short=-1,s.msfix=-1,i.resample_ratio=1,i.OldValue[0]=180,i.OldValue[1]=180,i.CurrentStep[0]=4,i.CurrentStep[1]=4,i.masking_lower=1,i.nsPsy.attackthre=-1,i.nsPsy.attackthre_s=-1,s.scale=-1,s.athaa_type=-1,s.ATHtype=-1,s.athaa_loudapprox=-1,s.athaa_sensitivity=0,s.useTemporal=null,s.interChRatio=-1,i.mf_samples_to_encode=Q.ENCDELAY+Q.POSTDELAY,s.encoder_padding=0,i.mf_size=Q.ENCDELAY-Q.MDCTDELAY,s.findReplayGain=!1,s.decode_on_the_fly=!1,i.decode_on_the_fly=!1,i.findReplayGain=!1,i.findPeakSample=!1,i.RadioGain=0,i.AudiophileGain=0,i.noclipGainChange=0,i.noclipScale=-1,s.preset=0,s.write_id3tag_automatic=!0,0}this.lame_init=function(){var s=new u1;return q(s),s.lame_allocated_gfp=1,s};function R(s){return s>1?0:s<=0?1:Math.cos(Math.PI/2*s)}this.nearestBitrateFullIndex=function(s){var i=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],v1=0,R1=0,I1=0,E1=0;E1=i[16],I1=16,R1=i[16],v1=16;for(var k1=0;k1<16;k1++)if(Math.max(s,i[k1+1])!=s){E1=i[k1+1],I1=k1+1,R1=i[k1],v1=k1;break}return E1-s>s-R1?v1:I1};function n(s,i){var v1=44100;return i>=48e3?v1=48e3:i>=44100?v1=44100:i>=32e3?v1=32e3:i>=24e3?v1=24e3:i>=22050?v1=22050:i>=16e3?v1=16e3:i>=12e3?v1=12e3:i>=11025?v1=11025:i>=8e3&&(v1=8e3),s==-1?v1:(s<=15960&&(v1=44100),s<=15250&&(v1=32e3),s<=11220&&(v1=24e3),s<=9970&&(v1=22050),s<=7230&&(v1=16e3),s<=5420&&(v1=12e3),s<=4510&&(v1=11025),s<=3970&&(v1=8e3),i<v1?i>44100?48e3:i>32e3?44100:i>24e3?32e3:i>22050?24e3:i>16e3?22050:i>12e3?16e3:i>11025?12e3:i>8e3?11025:8e3:v1)}function r(s,i){switch(s){case 44100:return i.version=1,0;case 48e3:return i.version=1,1;case 32e3:return i.version=1,2;case 22050:return i.version=0,0;case 24e3:return i.version=0,1;case 16e3:return i.version=0,2;case 11025:return i.version=0,0;case 12e3:return i.version=0,1;case 8e3:return i.version=0,2;default:return i.version=0,-1}}function e(s,i,v1){v1<16e3&&(i=2);for(var R1=s1.bitrate_table[i][1],I1=2;I1<=14;I1++)s1.bitrate_table[i][I1]>0&&Math.abs(s1.bitrate_table[i][I1]-s)<Math.abs(R1-s)&&(R1=s1.bitrate_table[i][I1]);return R1}function _(s,i,v1){v1<16e3&&(i=2);for(var R1=0;R1<=14;R1++)if(s1.bitrate_table[i][R1]>0&&s1.bitrate_table[i][R1]==s)return R1;return-1}function u(s,i){var v1=[new V(8,2e3),new V(16,3700),new V(24,3900),new V(32,5500),new V(40,7e3),new V(48,7500),new V(56,1e4),new V(64,11e3),new V(80,13500),new V(96,15100),new V(112,15600),new V(128,17e3),new V(160,17500),new V(192,18600),new V(224,19400),new V(256,19700),new V(320,20500)],R1=h.nearestBitrateFullIndex(i);s.lowerlimit=v1[R1].lowpass}function H(s){var i=s.internal_flags,v1=32,R1=-1;if(i.lowpass1>0){for(var I1=999,E1=0;E1<=31;E1++){var k1=E1/31;k1>=i.lowpass2&&(v1=Math.min(v1,E1)),i.lowpass1<k1&&k1<i.lowpass2&&(I1=Math.min(I1,E1))}I1==999?i.lowpass1=(v1-.75)/31:i.lowpass1=(I1-.75)/31,i.lowpass2=v1/31}if(i.highpass2>0&&i.highpass2<.9*(.75/31)&&(i.highpass1=0,i.highpass2=0,Z.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),i.highpass2>0){for(var B1=-1,E1=0;E1<=31;E1++){var k1=E1/31;k1<=i.highpass1&&(R1=Math.max(R1,E1)),i.highpass1<k1&&k1<i.highpass2&&(B1=Math.max(B1,E1))}i.highpass1=R1/31,B1==-1?i.highpass2=(R1+.75)/31:i.highpass2=(B1+.75)/31}for(var E1=0;E1<32;E1++){var L1,P1,k1=E1/31;i.highpass2>i.highpass1?L1=R((i.highpass2-k1)/(i.highpass2-i.highpass1+1e-20)):L1=1,i.lowpass2>i.lowpass1?P1=R((k1-i.lowpass1)/(i.lowpass2-i.lowpass1+1e-20)):P1=1,i.amp_filter[E1]=L1*P1}}function U(s){var i=s.internal_flags;switch(s.quality){default:case 9:i.psymodel=0,i.noise_shaping=0,i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.use_best_huffman=0,i.full_outer_loop=0;break;case 8:s.quality=7;case 7:i.psymodel=1,i.noise_shaping=0,i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.use_best_huffman=0,i.full_outer_loop=0;break;case 6:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=0,i.full_outer_loop=0;break;case 5:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=0,i.full_outer_loop=0;break;case 4:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 3:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=1,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 2:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=1,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 1:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=2,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 0:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=2,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break}}function B(s){var i=s.internal_flags;s.frameNum=0,s.write_id3tag_automatic&&p.id3tag_write_v2(s),i.bitrate_stereoMode_Hist=W([16,5]),i.bitrate_blockType_Hist=W([16,6]),i.PeakSample=0,s.bWriteVbrTag&&_1.InitVbrTag(s)}this.lame_init_params=function(s){var i=s.internal_flags;if(i.Class_ID=0,i.ATH==null&&(i.ATH=new b),i.PSY==null&&(i.PSY=new v),i.rgdata==null&&(i.rgdata=new X),i.channels_in=s.num_channels,i.channels_in==1&&(s.mode=f.MONO),i.channels_out=s.mode==f.MONO?1:2,i.mode_ext=Q.MPG_MD_MS_LR,s.mode==f.MONO&&(s.force_ms=!1),s.VBR==O.vbr_off&&s.VBR_mean_bitrate_kbps!=128&&s.brate==0&&(s.brate=s.VBR_mean_bitrate_kbps),s.VBR==O.vbr_off||s.VBR==O.vbr_mtrh||s.VBR==O.vbr_mt||(s.free_format=!1),s.VBR==O.vbr_off&&s.brate==0&&G.EQ(s.compression_ratio,0)&&(s.compression_ratio=11.025),s.VBR==O.vbr_off&&s.compression_ratio>0&&(s.out_samplerate==0&&(s.out_samplerate=map2MP3Frequency(int(.97*s.in_samplerate))),s.brate=0|s.out_samplerate*16*i.channels_out/(1e3*s.compression_ratio),i.samplerate_index=r(s.out_samplerate,s),s.free_format||(s.brate=e(s.brate,s.version,s.out_samplerate))),s.out_samplerate!=0&&(s.out_samplerate<16e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,64)):s.out_samplerate<32e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,160)):(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,32),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,320))),s.lowpassfreq==0){var v1=16e3;switch(s.VBR){case O.vbr_off:{var R1=new y;u(R1,s.brate),v1=R1.lowerlimit;break}case O.vbr_abr:{var R1=new y;u(R1,s.VBR_mean_bitrate_kbps),v1=R1.lowerlimit;break}case O.vbr_rh:{var I1=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var E1=I1[s.VBR_q],k1=I1[s.VBR_q+1],B1=s.VBR_q_frac;v1=linear_int(E1,k1,B1)}else v1=19500;break}default:{var I1=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var E1=I1[s.VBR_q],k1=I1[s.VBR_q+1],B1=s.VBR_q_frac;v1=linear_int(E1,k1,B1)}else v1=19500}}s.mode==f.MONO&&(s.VBR==O.vbr_off||s.VBR==O.vbr_abr)&&(v1*=1.5),s.lowpassfreq=v1|0}if(s.out_samplerate==0&&(2*s.lowpassfreq>s.in_samplerate&&(s.lowpassfreq=s.in_samplerate/2),s.out_samplerate=n(s.lowpassfreq|0,s.in_samplerate)),s.lowpassfreq=Math.min(20500,s.lowpassfreq),s.lowpassfreq=Math.min(s.out_samplerate/2,s.lowpassfreq),s.VBR==O.vbr_off&&(s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.brate)),s.VBR==O.vbr_abr&&(s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.VBR_mean_bitrate_kbps)),s.bWriteVbrTag||(s.findReplayGain=!1,s.decode_on_the_fly=!1,i.findPeakSample=!1),i.findReplayGain=s.findReplayGain,i.decode_on_the_fly=s.decode_on_the_fly,i.decode_on_the_fly&&(i.findPeakSample=!0),i.findReplayGain&&l.InitGainAnalysis(i.rgdata,s.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return s.internal_flags=null,-6;switch(i.decode_on_the_fly&&!s.decode_only&&(i.hip!=null&&t.hip_decode_exit(i.hip),i.hip=t.hip_decode_init()),i.mode_gr=s.out_samplerate<=24e3?1:2,s.framesize=576*i.mode_gr,s.encoder_delay=Q.ENCDELAY,i.resample_ratio=s.in_samplerate/s.out_samplerate,s.VBR){case O.vbr_mt:case O.vbr_rh:case O.vbr_mtrh:{var L1=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];s.compression_ratio=L1[s.VBR_q]}break;case O.vbr_abr:s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.VBR_mean_bitrate_kbps);break;default:s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.brate);break}if(s.mode==f.NOT_SET&&(s.mode=f.JOINT_STEREO),s.highpassfreq>0?(i.highpass1=2*s.highpassfreq,s.highpasswidth>=0?i.highpass2=2*(s.highpassfreq+s.highpasswidth):i.highpass2=1*2*s.highpassfreq,i.highpass1/=s.out_samplerate,i.highpass2/=s.out_samplerate):(i.highpass1=0,i.highpass2=0),s.lowpassfreq>0?(i.lowpass2=2*s.lowpassfreq,s.lowpasswidth>=0?(i.lowpass1=2*(s.lowpassfreq-s.lowpasswidth),i.lowpass1<0&&(i.lowpass1=0)):i.lowpass1=1*2*s.lowpassfreq,i.lowpass1/=s.out_samplerate,i.lowpass2/=s.out_samplerate):(i.lowpass1=0,i.lowpass2=0),H(s),i.samplerate_index=r(s.out_samplerate,s),i.samplerate_index<0)return s.internal_flags=null,-1;if(s.VBR==O.vbr_off){if(s.free_format)i.bitrate_index=0;else if(s.brate=e(s.brate,s.version,s.out_samplerate),i.bitrate_index=_(s.brate,s.version,s.out_samplerate),i.bitrate_index<=0)return s.internal_flags=null,-1}else i.bitrate_index=1;s.analysis&&(s.bWriteVbrTag=!1),i.pinfo!=null&&(s.bWriteVbrTag=!1),w.init_bit_stream_w(i);for(var P1=i.samplerate_index+3*s.version+6*(s.out_samplerate<16e3?1:0),p1=0;p1<Q.SBMAX_l+1;p1++)i.scalefac_band.l[p1]=L.sfBandIndex[P1].l[p1];for(var p1=0;p1<Q.PSFB21+1;p1++){var C1=(i.scalefac_band.l[22]-i.scalefac_band.l[21])/Q.PSFB21,z1=i.scalefac_band.l[21]+p1*C1;i.scalefac_band.psfb21[p1]=z1}i.scalefac_band.psfb21[Q.PSFB21]=576;for(var p1=0;p1<Q.SBMAX_s+1;p1++)i.scalefac_band.s[p1]=L.sfBandIndex[P1].s[p1];for(var p1=0;p1<Q.PSFB12+1;p1++){var C1=(i.scalefac_band.s[13]-i.scalefac_band.s[12])/Q.PSFB12,z1=i.scalefac_band.s[12]+p1*C1;i.scalefac_band.psfb12[p1]=z1}i.scalefac_band.psfb12[Q.PSFB12]=192,s.version==1?i.sideinfo_len=i.channels_out==1?21:36:i.sideinfo_len=i.channels_out==1?13:21,s.error_protection&&(i.sideinfo_len+=2),B(s),i.Class_ID=P;{var o;for(o=0;o<19;o++)i.nsPsy.pefirbuf[o]=700*i.mode_gr*i.channels_out;s.ATHtype==-1&&(s.ATHtype=4)}switch(C(s.VBR_q<=9),C(s.VBR_q>=0),s.VBR){case O.vbr_mt:s.VBR=O.vbr_mtrh;case O.vbr_mtrh:{s.useTemporal==null&&(s.useTemporal=!1),x.apply_preset(s,500-s.VBR_q*10,0),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),s.quality<5&&(s.quality=0),s.quality>5&&(s.quality=5),i.PSY.mask_adjust=s.maskingadjust,i.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?i.sfb21_extra=!1:i.sfb21_extra=s.out_samplerate>44e3,i.iteration_loop=new VBRNewIterationLoop(A);break}case O.vbr_rh:{x.apply_preset(s,500-s.VBR_q*10,0),i.PSY.mask_adjust=s.maskingadjust,i.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?i.sfb21_extra=!1:i.sfb21_extra=s.out_samplerate>44e3,s.quality>6&&(s.quality=6),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),i.iteration_loop=new VBROldIterationLoop(A);break}default:{var c;i.sfb21_extra=!1,s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),c=s.VBR,c==O.vbr_off&&(s.VBR_mean_bitrate_kbps=s.brate),x.apply_preset(s,s.VBR_mean_bitrate_kbps,0),s.VBR=c,i.PSY.mask_adjust=s.maskingadjust,i.PSY.mask_adjust_short=s.maskingadjust_short,c==O.vbr_off?i.iteration_loop=new r1(A):i.iteration_loop=new ABRIterationLoop(A);break}}if(C(s.scale>=0),s.VBR!=O.vbr_off){if(i.VBR_min_bitrate=1,i.VBR_max_bitrate=14,s.out_samplerate<16e3&&(i.VBR_max_bitrate=8),s.VBR_min_bitrate_kbps!=0&&(s.VBR_min_bitrate_kbps=e(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),i.VBR_min_bitrate=_(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),i.VBR_min_bitrate<0)||s.VBR_max_bitrate_kbps!=0&&(s.VBR_max_bitrate_kbps=e(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),i.VBR_max_bitrate=_(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),i.VBR_max_bitrate<0))return-1;s.VBR_min_bitrate_kbps=s1.bitrate_table[s.version][i.VBR_min_bitrate],s.VBR_max_bitrate_kbps=s1.bitrate_table[s.version][i.VBR_max_bitrate],s.VBR_mean_bitrate_kbps=Math.min(s1.bitrate_table[s.version][i.VBR_max_bitrate],s.VBR_mean_bitrate_kbps),s.VBR_mean_bitrate_kbps=Math.max(s1.bitrate_table[s.version][i.VBR_min_bitrate],s.VBR_mean_bitrate_kbps)}return s.tune&&(i.PSY.mask_adjust+=s.tune_value_a,i.PSY.mask_adjust_short+=s.tune_value_a),U(s),C(s.scale>=0),s.athaa_type<0?i.ATH.useAdjust=3:i.ATH.useAdjust=s.athaa_type,i.ATH.aaSensitivityP=Math.pow(10,s.athaa_sensitivity/-10),s.short_blocks==null&&(s.short_blocks=J.short_block_allowed),s.short_blocks==J.short_block_allowed&&(s.mode==f.JOINT_STEREO||s.mode==f.STEREO)&&(s.short_blocks=J.short_block_coupled),s.quant_comp<0&&(s.quant_comp=1),s.quant_comp_short<0&&(s.quant_comp_short=0),s.msfix<0&&(s.msfix=0),s.exp_nspsytune=s.exp_nspsytune|1,s.internal_flags.nsPsy.attackthre<0&&(s.internal_flags.nsPsy.attackthre=a1.NSATTACKTHRE),s.internal_flags.nsPsy.attackthre_s<0&&(s.internal_flags.nsPsy.attackthre_s=a1.NSATTACKTHRE_S),C(s.scale>=0),s.scale<0&&(s.scale=1),s.ATHtype<0&&(s.ATHtype=4),s.ATHcurve<0&&(s.ATHcurve=4),s.athaa_loudapprox<0&&(s.athaa_loudapprox=2),s.interChRatio<0&&(s.interChRatio=0),s.useTemporal==null&&(s.useTemporal=!0),i.slot_lag=i.frac_SpF=0,s.VBR==O.vbr_off&&(i.slot_lag=i.frac_SpF=(s.version+1)*72e3*s.brate%s.out_samplerate|0),L.iteration_init(s),E.psymodel_init(s),C(s.scale>=0),0};function Y(s,i){(s.in_buffer_0==null||s.in_buffer_nsamples<i)&&(s.in_buffer_0=h1(i),s.in_buffer_1=h1(i),s.in_buffer_nsamples=i)}this.lame_encode_flush=function(s,i,v1,R1){var I1=s.internal_flags,E1=z([2,1152]),k1=0,B1,L1,P1,p1,C1=I1.mf_samples_to_encode-Q.POSTDELAY,z1=n1(s);if(I1.mf_samples_to_encode<1)return 0;for(B1=0,s.in_samplerate!=s.out_samplerate&&(C1+=16*s.out_samplerate/s.in_samplerate),P1=s.framesize-C1%s.framesize,P1<576&&(P1+=s.framesize),s.encoder_padding=P1,p1=(C1+P1)/s.framesize;p1>0&&k1>=0;){var o=z1-I1.mf_size,c=s.frameNum;o*=s.in_samplerate,o/=s.out_samplerate,o>1152&&(o=1152),o<1&&(o=1),L1=R1-B1,R1==0&&(L1=0),k1=this.lame_encode_buffer(s,E1[0],E1[1],o,i,v1,L1),v1+=k1,B1+=k1,p1-=c!=s.frameNum?1:0}if(I1.mf_samples_to_encode=0,k1<0||(L1=R1-B1,R1==0&&(L1=0),w.flush_bitstream(s),k1=w.copy_buffer(I1,i,v1,L1,1),k1<0))return k1;if(v1+=k1,B1+=k1,L1=R1-B1,R1==0&&(L1=0),s.write_id3tag_automatic){if(p.id3tag_write_v1(s),k1=w.copy_buffer(I1,i,v1,L1,0),k1<0)return k1;B1+=k1}return B1},this.lame_encode_buffer=function(s,i,v1,R1,I1,E1,k1){var B1=s.internal_flags,L1=[null,null];if(B1.Class_ID!=P)return-3;if(R1==0)return 0;Y(B1,R1),L1[0]=B1.in_buffer_0,L1[1]=B1.in_buffer_1;for(var P1=0;P1<R1;P1++)L1[0][P1]=i[P1],B1.channels_in>1&&(L1[1][P1]=v1[P1]);return c1(s,L1[0],L1[1],R1,I1,E1,k1)};function n1(s){var i=Q.BLKSIZE+s.framesize-Q.FFTOFFSET;return i=Math.max(i,512+s.framesize-32),i}function c1(s,i,v1,R1,I1,E1,k1){var B1=s.internal_flags,L1=0,P1,p1,C1,z1,o,c=[null,null],S=[null,null];if(B1.Class_ID!=P)return-3;if(R1==0)return 0;if(o=w.copy_buffer(B1,I1,E1,k1,0),o<0)return o;if(E1+=o,L1+=o,S[0]=i,S[1]=v1,G.NEQ(s.scale,0)&&G.NEQ(s.scale,1))for(p1=0;p1<R1;++p1)S[0][p1]*=s.scale,B1.channels_out==2&&(S[1][p1]*=s.scale);if(G.NEQ(s.scale_left,0)&&G.NEQ(s.scale_left,1))for(p1=0;p1<R1;++p1)S[0][p1]*=s.scale_left;if(G.NEQ(s.scale_right,0)&&G.NEQ(s.scale_right,1))for(p1=0;p1<R1;++p1)S[1][p1]*=s.scale_right;if(s.num_channels==2&&B1.channels_out==1)for(p1=0;p1<R1;++p1)S[0][p1]=.5*(S[0][p1]+S[1][p1]),S[1][p1]=0;z1=n1(s),c[0]=B1.mfbuf[0],c[1]=B1.mfbuf[1];for(var T=0;R1>0;){var D=[null,null],m=0,N=0;D[0]=S[0],D[1]=S[1];var j=new w1;if(h0(s,c,D,T,R1,j),m=j.n_in,N=j.n_out,B1.findReplayGain&&!B1.decode_on_the_fly&&l.AnalyzeSamples(B1.rgdata,c[0],B1.mf_size,c[1],B1.mf_size,N,B1.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(R1-=m,T+=m,B1.channels_out==2,B1.mf_size+=N,C(B1.mf_size<=d.MFSIZE),B1.mf_samples_to_encode<1&&(B1.mf_samples_to_encode=Q.ENCDELAY+Q.POSTDELAY),B1.mf_samples_to_encode+=N,B1.mf_size>=z1){var I=k1-L1;if(k1==0&&(I=0),P1=g1(s,c[0],c[1],I1,E1,I),P1<0)return P1;for(E1+=P1,L1+=P1,B1.mf_size-=s.framesize,B1.mf_samples_to_encode-=s.framesize,C1=0;C1<B1.channels_out;C1++)for(p1=0;p1<B1.mf_size;p1++)c[C1][p1]=c[C1][p1+s.framesize]}}return L1}function g1(s,i,v1,R1,I1,E1){var k1=h.enc.lame_encode_mp3_frame(s,i,v1,R1,I1,E1);return s.frameNum++,k1}function w1(){this.n_in=0,this.n_out=0}function d1(){this.num_used=0}function M1(s,i){return i!=0?M1(i,s%i):s}function T1(s,i,v1){var R1=Math.PI*i;s/=v1,s<0&&(s=0),s>1&&(s=1);var I1=s-.5,E1=.42-.5*Math.cos(2*s*Math.PI)+.08*Math.cos(4*s*Math.PI);return Math.abs(I1)<1e-9?R1/Math.PI:E1*Math.sin(v1*R1*I1)/(Math.PI*v1*I1)}function j1(s,i,v1,R1,I1,E1,k1,B1,L1){var P1=s.internal_flags,p1,C1=0,z1,o=s.out_samplerate/M1(s.out_samplerate,s.in_samplerate);o>d.BPC&&(o=d.BPC);var c=Math.abs(P1.resample_ratio-Math.floor(.5+P1.resample_ratio))<1e-4?1:0,S=1/P1.resample_ratio;S>1&&(S=1);var T=31;T%2==0&&--T,T+=c;var D=T+1;if(P1.fill_buffer_resample_init==0){for(P1.inbuf_old[0]=h1(D),P1.inbuf_old[1]=h1(D),p1=0;p1<=2*o;++p1)P1.blackfilt[p1]=h1(D);for(P1.itime[0]=0,P1.itime[1]=0,C1=0;C1<=2*o;C1++){var m=0,N=(C1-o)/(2*o);for(p1=0;p1<=T;p1++)m+=P1.blackfilt[C1][p1]=T1(p1-N,S,T);for(p1=0;p1<=T;p1++)P1.blackfilt[C1][p1]/=m}P1.fill_buffer_resample_init=1}var j=P1.inbuf_old[L1];for(z1=0;z1<R1;z1++){var I,e1;if(I=z1*P1.resample_ratio,C1=0|Math.floor(I-P1.itime[L1]),T+C1-T/2>=k1)break;var N=I-P1.itime[L1]-(C1+.5*(T%2));e1=0|Math.floor(N*2*o+o+.5);var F=0;for(p1=0;p1<=T;++p1){var $=0|p1+C1-T/2,b1;b1=$<0?j[D+$]:I1[E1+$],F+=b1*P1.blackfilt[e1][p1]}i[v1+z1]=F}if(B1.num_used=Math.min(k1,T+C1-T/2),P1.itime[L1]+=B1.num_used-z1*P1.resample_ratio,B1.num_used>=D)for(p1=0;p1<D;p1++)j[p1]=I1[E1+B1.num_used+p1-D];else{var y1=D-B1.num_used;for(p1=0;p1<y1;++p1)j[p1]=j[p1+B1.num_used];for(C1=0;p1<D;++p1,++C1)j[p1]=I1[E1+C1];C(C1==B1.num_used)}return z1}function h0(s,i,v1,R1,I1,E1){var k1=s.internal_flags;if(k1.resample_ratio<.9999||k1.resample_ratio>1.0001)for(var B1=0;B1<k1.channels_out;B1++){var L1=new d1;E1.n_out=j1(s,i[B1],k1.mf_size,s.framesize,v1[B1],R1,I1,L1,B1),E1.n_in=L1.num_used}else{E1.n_out=Math.min(s.framesize,I1),E1.n_in=E1.n_out;for(var P1=0;P1<E1.n_out;++P1)i[0][k1.mf_size+P1]=v1[0][R1+P1],k1.channels_out==2&&(i[1][k1.mf_size+P1]=v1[1][R1+P1])}}}return Aa=M,Aa}var y2=Q1,S0=y2.VbrMode;function P2(){var k=Ia();function Z(d,b,X,r1,G,s1,Q,M,f,h,g,a,l,w,x){this.vbr_q=d,this.quant_comp=b,this.quant_comp_s=X,this.expY=r1,this.st_lrm=G,this.st_s=s1,this.masking_adj=Q,this.masking_adj_short=M,this.ath_lower=f,this.ath_curve=h,this.ath_sensitivity=g,this.interch=a,this.safejoint=l,this.sfb21mod=w,this.msfix=x}function O(d,b,X,r1,G,s1,Q,M,f,h,g,a,l,w){this.quant_comp=b,this.quant_comp_s=X,this.safejoint=r1,this.nsmsfix=G,this.st_lrm=s1,this.st_s=Q,this.nsbass=M,this.scale=f,this.masking_adj=h,this.ath_lower=g,this.ath_curve=a,this.interch=l,this.sfscale=w}var J;this.setModules=function(d){J=d};var h1=[new Z(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new Z(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new Z(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new Z(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new Z(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new Z(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new Z(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new Z(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new Z(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new Z(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new Z(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],W=[new Z(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new Z(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new Z(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new Z(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new Z(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new Z(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new Z(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new Z(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new Z(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new Z(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new Z(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function z(d,b,X){var r1=d.VBR==S0.vbr_rh?h1:W,G=d.VBR_q_frac,s1=r1[b],Q=r1[b+1],M=s1;s1.st_lrm=s1.st_lrm+G*(Q.st_lrm-s1.st_lrm),s1.st_s=s1.st_s+G*(Q.st_s-s1.st_s),s1.masking_adj=s1.masking_adj+G*(Q.masking_adj-s1.masking_adj),s1.masking_adj_short=s1.masking_adj_short+G*(Q.masking_adj_short-s1.masking_adj_short),s1.ath_lower=s1.ath_lower+G*(Q.ath_lower-s1.ath_lower),s1.ath_curve=s1.ath_curve+G*(Q.ath_curve-s1.ath_curve),s1.ath_sensitivity=s1.ath_sensitivity+G*(Q.ath_sensitivity-s1.ath_sensitivity),s1.interch=s1.interch+G*(Q.interch-s1.interch),s1.msfix=s1.msfix+G*(Q.msfix-s1.msfix),u1(d,M.vbr_q),X!=0?d.quant_comp=M.quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=M.quant_comp),X!=0?d.quant_comp_short=M.quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=M.quant_comp_s),M.expY!=0&&(d.experimentalY=M.expY!=0),X!=0?d.internal_flags.nsPsy.attackthre=M.st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=M.st_lrm),X!=0?d.internal_flags.nsPsy.attackthre_s=M.st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=M.st_s),X!=0?d.maskingadjust=M.masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=M.masking_adj),X!=0?d.maskingadjust_short=M.masking_adj_short:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=M.masking_adj_short),X!=0?d.ATHlower=-M.ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-M.ath_lower/10),X!=0?d.ATHcurve=M.ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=M.ath_curve),X!=0?d.athaa_sensitivity=M.ath_sensitivity:Math.abs(d.athaa_sensitivity- -1)>0||(d.athaa_sensitivity=M.ath_sensitivity),M.interch>0&&(X!=0?d.interChRatio=M.interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=M.interch)),M.safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|M.safejoint),M.sfb21mod>0&&(d.exp_nspsytune=d.exp_nspsytune|M.sfb21mod<<20),X!=0?d.msfix=M.msfix:Math.abs(d.msfix- -1)>0||(d.msfix=M.msfix),X==0&&(d.VBR_q=b,d.VBR_q_frac=G)}var C=[new O(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new O(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new O(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new O(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new O(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new O(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new O(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new O(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new O(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new O(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new O(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new O(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new O(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new O(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new O(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new O(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new O(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function a1(d,b,X){var r1=b,G=J.nearestBitrateFullIndex(b);if(d.VBR=S0.vbr_abr,d.VBR_mean_bitrate_kbps=r1,d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,320),d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,8),d.brate=d.VBR_mean_bitrate_kbps,d.VBR_mean_bitrate_kbps>320&&(d.disable_reservoir=!0),C[G].safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|2),C[G].sfscale>0&&(d.internal_flags.noise_shaping=2),Math.abs(C[G].nsbass)>0){var s1=int(C[G].nsbass*4);s1<0&&(s1+=64),d.exp_nspsytune=d.exp_nspsytune|s1<<2}return X!=0?d.quant_comp=C[G].quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=C[G].quant_comp),X!=0?d.quant_comp_short=C[G].quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=C[G].quant_comp_s),X!=0?d.msfix=C[G].nsmsfix:Math.abs(d.msfix- -1)>0||(d.msfix=C[G].nsmsfix),X!=0?d.internal_flags.nsPsy.attackthre=C[G].st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=C[G].st_lrm),X!=0?d.internal_flags.nsPsy.attackthre_s=C[G].st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=C[G].st_s),X!=0?d.scale=C[G].scale:Math.abs(d.scale- -1)>0||(d.scale=C[G].scale),X!=0?d.maskingadjust=C[G].masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=C[G].masking_adj),C[G].masking_adj>0?X!=0?d.maskingadjust_short=C[G].masking_adj*.9:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=C[G].masking_adj*.9):X!=0?d.maskingadjust_short=C[G].masking_adj*1.1:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=C[G].masking_adj*1.1),X!=0?d.ATHlower=-C[G].ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-C[G].ath_lower/10),X!=0?d.ATHcurve=C[G].ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=C[G].ath_curve),X!=0?d.interChRatio=C[G].interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=C[G].interch),b}this.apply_preset=function(d,b,X){switch(b){case k.R3MIX:{b=k.V3,d.VBR=S0.vbr_mtrh;break}case k.MEDIUM:{b=k.V4,d.VBR=S0.vbr_rh;break}case k.MEDIUM_FAST:{b=k.V4,d.VBR=S0.vbr_mtrh;break}case k.STANDARD:{b=k.V2,d.VBR=S0.vbr_rh;break}case k.STANDARD_FAST:{b=k.V2,d.VBR=S0.vbr_mtrh;break}case k.EXTREME:{b=k.V0,d.VBR=S0.vbr_rh;break}case k.EXTREME_FAST:{b=k.V0,d.VBR=S0.vbr_mtrh;break}case k.INSANE:return b=320,d.preset=b,a1(d,b,X),d.VBR=S0.vbr_off,b}switch(d.preset=b,b){case k.V9:return z(d,9,X),b;case k.V8:return z(d,8,X),b;case k.V7:return z(d,7,X),b;case k.V6:return z(d,6,X),b;case k.V5:return z(d,5,X),b;case k.V4:return z(d,4,X),b;case k.V3:return z(d,3,X),b;case k.V2:return z(d,2,X),b;case k.V1:return z(d,1,X),b;case k.V0:return z(d,0,X),b}return 8<=b&&b<=320?a1(d,b,X):(d.preset=0,b)};function u1(d,b){var X=0;return 0>b&&(X=-1,b=0),9<b&&(X=-1,b=9),d.VBR_q=b,d.VBR_q_frac=0,X}}var V2=P2;function I2(){this.setModules=function(k,Z){}}var L2=I2;function D2(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var X2=D2,Le=Q1,ne=Le.new_float,N2=Le.new_int;function O2(){this.global_gain=0,this.sfb_count1=0,this.step=N2(39),this.noise=ne(39),this.noise_log=ne(39)}var H2=O2,H0=Q1,B0=H0.System,_e=H0.VbrMode,Ba=H0.Util,N0=H0.Arrays,Z0=H0.new_float,G0=H0.assert,Y2=L2,Ta=X2,C2=H2,Y1=t0(),ie=Ea,oe=ra;function j2(){var k;this.rv=null;var Z;this.qupvt=null;var O,J=new Y2,h1;this.setModules=function(M,f,h,g){k=M,Z=f,this.rv=f,O=h,this.qupvt=h,h1=g,J.setModules(O,h1)},this.ms_convert=function(M,f){for(var h=0;h<576;++h){var g=M.tt[f][0].xr[h],a=M.tt[f][1].xr[h];M.tt[f][0].xr[h]=(g+a)*(Ba.SQRT2*.5),M.tt[f][1].xr[h]=(g-a)*(Ba.SQRT2*.5)}};function W(M,f,h,g){g=0;for(var a=0;a<=h;++a){var l=Math.abs(M.xr[a]);g+=l,f[a]=Math.sqrt(l*Math.sqrt(l)),f[a]>M.xrpow_max&&(M.xrpow_max=f[a])}return g}this.init_xrpow=function(M,f,h){var g=0,a=0|f.max_nonzero_coeff;if(f.xrpow_max=0,N0.fill(h,a,576,0),g=W(f,h,a,g),g>1e-20){var l=0;M.substep_shaping&2&&(l=1);for(var w=0;w<f.psymax;w++)M.pseudohalf[w]=l;return!0}return N0.fill(f.l3_enc,0,576,0),!1};function z(M,f){var h=M.ATH,g=f.xr;if(f.block_type!=Y1.SHORT_TYPE)for(var a=!1,l=Y1.PSFB21-1;l>=0&&!a;l--){var w=M.scalefac_band.psfb21[l],x=M.scalefac_band.psfb21[l+1],L=O.athAdjust(h.adjust,h.psfb21[l],h.floor);M.nsPsy.longfact[21]>1e-12&&(L*=M.nsPsy.longfact[21]);for(var A=x-1;A>=w;A--)if(Math.abs(g[A])<L)g[A]=0;else{a=!0;break}}else for(var E=0;E<3;E++)for(var a=!1,l=Y1.PSFB12-1;l>=0&&!a;l--){var w=M.scalefac_band.s[12]*3+(M.scalefac_band.s[13]-M.scalefac_band.s[12])*E+(M.scalefac_band.psfb12[l]-M.scalefac_band.psfb12[0]),x=w+(M.scalefac_band.psfb12[l+1]-M.scalefac_band.psfb12[l]),_1=O.athAdjust(h.adjust,h.psfb12[l],h.floor);M.nsPsy.shortfact[12]>1e-12&&(_1*=M.nsPsy.shortfact[12]);for(var A=x-1;A>=w;A--)if(Math.abs(g[A])<_1)g[A]=0;else{a=!0;break}}}this.init_outer_loop=function(M,f){f.part2_3_length=0,f.big_values=0,f.count1=0,f.global_gain=210,f.scalefac_compress=0,f.table_select[0]=0,f.table_select[1]=0,f.table_select[2]=0,f.subblock_gain[0]=0,f.subblock_gain[1]=0,f.subblock_gain[2]=0,f.subblock_gain[3]=0,f.region0_count=0,f.region1_count=0,f.preflag=0,f.scalefac_scale=0,f.count1table_select=0,f.part2_length=0,f.sfb_lmax=Y1.SBPSY_l,f.sfb_smin=Y1.SBPSY_s,f.psy_lmax=M.sfb21_extra?Y1.SBMAX_l:Y1.SBPSY_l,f.psymax=f.psy_lmax,f.sfbmax=f.sfb_lmax,f.sfbdivide=11;for(var h=0;h<Y1.SBMAX_l;h++)f.width[h]=M.scalefac_band.l[h+1]-M.scalefac_band.l[h],f.window[h]=3;if(f.block_type==Y1.SHORT_TYPE){var g=Z0(576);f.sfb_smin=0,f.sfb_lmax=0,f.mixed_block_flag!=0&&(f.sfb_smin=3,f.sfb_lmax=M.mode_gr*2+4),f.psymax=f.sfb_lmax+3*((M.sfb21_extra?Y1.SBMAX_s:Y1.SBPSY_s)-f.sfb_smin),f.sfbmax=f.sfb_lmax+3*(Y1.SBPSY_s-f.sfb_smin),f.sfbdivide=f.sfbmax-18,f.psy_lmax=f.sfb_lmax;var a=M.scalefac_band.l[f.sfb_lmax];B0.arraycopy(f.xr,0,g,0,576);for(var h=f.sfb_smin;h<Y1.SBMAX_s;h++)for(var l=M.scalefac_band.s[h],w=M.scalefac_band.s[h+1],x=0;x<3;x++)for(var L=l;L<w;L++)f.xr[a++]=g[3*L+x];for(var A=f.sfb_lmax,h=f.sfb_smin;h<Y1.SBMAX_s;h++)f.width[A]=f.width[A+1]=f.width[A+2]=M.scalefac_band.s[h+1]-M.scalefac_band.s[h],f.window[A]=0,f.window[A+1]=1,f.window[A+2]=2,A+=3}f.count1bits=0,f.sfb_partition_table=O.nr_of_sfb_block[0][0],f.slen[0]=0,f.slen[1]=0,f.slen[2]=0,f.slen[3]=0,f.max_nonzero_coeff=575,N0.fill(f.scalefac,0),z(M,f)};function C(M){this.ordinal=M}C.BINSEARCH_NONE=new C(0),C.BINSEARCH_UP=new C(1),C.BINSEARCH_DOWN=new C(2);function a1(M,f,h,g,a){var l,w=M.CurrentStep[g],x=!1,L=M.OldValue[g],A=C.BINSEARCH_NONE;for(f.global_gain=L,h-=f.part2_length;;){var E;if(l=h1.count_bits(M,a,f,null),w==1||l==h)break;l>h?(A==C.BINSEARCH_DOWN&&(x=!0),x&&(w/=2),A=C.BINSEARCH_UP,E=w):(A==C.BINSEARCH_UP&&(x=!0),x&&(w/=2),A=C.BINSEARCH_DOWN,E=-w),f.global_gain+=E,f.global_gain<0&&(f.global_gain=0,x=!0),f.global_gain>255&&(f.global_gain=255,x=!0)}for(G0(f.global_gain>=0),G0(f.global_gain<256);l>h&&f.global_gain<255;)f.global_gain++,l=h1.count_bits(M,a,f,null);return M.CurrentStep[g]=L-f.global_gain>=4?4:2,M.OldValue[g]=f.global_gain,f.part2_3_length=l,l}this.trancate_smallspectrums=function(M,f,h,g){var a=Z0(oe.SFBMAX);if(!(!(M.substep_shaping&4)&&f.block_type==Y1.SHORT_TYPE||M.substep_shaping&128)){O.calc_noise(f,h,a,new Ta,null);for(var w=0;w<576;w++){var l=0;f.l3_enc[w]!=0&&(l=Math.abs(f.xr[w])),g[w]=l}var w=0,x=8;f.block_type==Y1.SHORT_TYPE&&(x=6);do{var L,A,E,_1,p=f.width[x];if(w+=p,!(a[x]>=1)&&(N0.sort(g,w-p,p),!BitStream.EQ(g[w-1],0))){L=(1-a[x])*h[x],A=0,_1=0;do{var t;for(E=1;_1+E<p&&!BitStream.NEQ(g[_1+w-p],g[_1+w+E-p]);E++);if(t=g[_1+w-p]*g[_1+w-p]*E,L<t){_1!=0&&(A=g[_1+w-p-1]);break}L-=t,_1+=E}while(_1<p);if(!BitStream.EQ(A,0))do Math.abs(f.xr[w-p])<=A&&(f.l3_enc[w-p]=0);while(--p>0)}}while(++x<f.psymax);f.part2_3_length=h1.noquant_count_bits(M,f,null)}};function u1(M){for(var f=0;f<M.sfbmax;f++)if(M.scalefac[f]+M.subblock_gain[M.window[f]]==0)return!1;return!0}function d(M){return Ba.FAST_LOG10(.368+.632*M*M*M)}function b(M,f){for(var h=1e-37,g=0;g<f.psymax;g++)h+=d(M[g]);return Math.max(1e-20,h)}function X(M,f,h,g,a){var l;switch(M){default:case 9:{f.over_count>0?(l=h.over_SSD<=f.over_SSD,h.over_SSD==f.over_SSD&&(l=h.bits<f.bits)):l=h.max_noise<0&&h.max_noise*10+h.bits<=f.max_noise*10+f.bits;break}case 0:l=h.over_count<f.over_count||h.over_count==f.over_count&&h.over_noise<f.over_noise||h.over_count==f.over_count&&BitStream.EQ(h.over_noise,f.over_noise)&&h.tot_noise<f.tot_noise;break;case 8:h.max_noise=b(a,g);case 1:l=h.max_noise<f.max_noise;break;case 2:l=h.tot_noise<f.tot_noise;break;case 3:l=h.tot_noise<f.tot_noise&&h.max_noise<f.max_noise;break;case 4:l=h.max_noise<=0&&f.max_noise>.2||h.max_noise<=0&&f.max_noise<0&&f.max_noise>h.max_noise-.2&&h.tot_noise<f.tot_noise||h.max_noise<=0&&f.max_noise>0&&f.max_noise>h.max_noise-.2&&h.tot_noise<f.tot_noise+f.over_noise||h.max_noise>0&&f.max_noise>-.05&&f.max_noise>h.max_noise-.1&&h.tot_noise+h.over_noise<f.tot_noise+f.over_noise||h.max_noise>0&&f.max_noise>-.1&&f.max_noise>h.max_noise-.15&&h.tot_noise+h.over_noise+h.over_noise<f.tot_noise+f.over_noise+f.over_noise;break;case 5:l=h.over_noise<f.over_noise||BitStream.EQ(h.over_noise,f.over_noise)&&h.tot_noise<f.tot_noise;break;case 6:l=h.over_noise<f.over_noise||BitStream.EQ(h.over_noise,f.over_noise)&&(h.max_noise<f.max_noise||BitStream.EQ(h.max_noise,f.max_noise)&&h.tot_noise<=f.tot_noise);break;case 7:l=h.over_count<f.over_count||h.over_noise<f.over_noise;break}return f.over_count==0&&(l=l&&h.bits<f.bits),l}function r1(M,f,h,g,a){var l=M.internal_flags,w;f.scalefac_scale==0?w=1.2968395546510096:w=1.6817928305074292;for(var x=0,L=0;L<f.sfbmax;L++)x<h[L]&&(x=h[L]);var A=l.noise_shaping_amp;switch(A==3&&(a?A=2:A=1),A){case 2:break;case 1:x>1?x=Math.pow(x,.5):x*=.95;break;case 0:default:x>1?x=1:x*=.95;break}for(var E=0,L=0;L<f.sfbmax;L++){var _1=f.width[L],p;if(E+=_1,!(h[L]<x)){if(l.substep_shaping&2&&(l.pseudohalf[L]=l.pseudohalf[L]==0?1:0,l.pseudohalf[L]==0&&l.noise_shaping_amp==2))return;for(f.scalefac[L]++,p=-_1;p<0;p++)g[E+p]*=w,g[E+p]>f.xrpow_max&&(f.xrpow_max=g[E+p]);if(l.noise_shaping_amp==2)return}}}function G(M,f){for(var h=1.2968395546510096,g=0,a=0;a<M.sfbmax;a++){var l=M.width[a],w=M.scalefac[a];if(M.preflag!=0&&(w+=O.pretab[a]),g+=l,w&1){w++;for(var x=-l;x<0;x++)f[g+x]*=h,f[g+x]>M.xrpow_max&&(M.xrpow_max=f[g+x])}M.scalefac[a]=w>>1}M.preflag=0,M.scalefac_scale=1}function s1(M,f,h){var g,a=f.scalefac;for(g=0;g<f.sfb_lmax;g++)if(a[g]>=16)return!0;for(var l=0;l<3;l++){var w=0,x=0;for(g=f.sfb_lmax+l;g<f.sfbdivide;g+=3)w<a[g]&&(w=a[g]);for(;g<f.sfbmax;g+=3)x<a[g]&&(x=a[g]);if(!(w<16&&x<8)){if(f.subblock_gain[l]>=7)return!0;f.subblock_gain[l]++;var L=M.scalefac_band.l[f.sfb_lmax];for(g=f.sfb_lmax+l;g<f.sfbmax;g+=3){var A,E=f.width[g],_1=a[g];if(_1=_1-(4>>f.scalefac_scale),_1>=0){a[g]=_1,L+=E*3;continue}a[g]=0;{var p=210+(_1<<f.scalefac_scale+1);A=O.IPOW20(p)}L+=E*(l+1);for(var t=-E;t<0;t++)h[L+t]*=A,h[L+t]>f.xrpow_max&&(f.xrpow_max=h[L+t]);L+=E*(3-l-1)}{var A=O.IPOW20(202);L+=f.width[g]*(l+1);for(var t=-f.width[g];t<0;t++)h[L+t]*=A,h[L+t]>f.xrpow_max&&(f.xrpow_max=h[L+t])}}}return!1}function Q(M,f,h,g,a){var l=M.internal_flags;r1(M,f,h,g,a);var w=u1(f);return w?!1:(l.mode_gr==2?w=h1.scale_bitcount(f):w=h1.scale_bitcount_lsf(l,f),w?(l.noise_shaping>1&&(N0.fill(l.pseudohalf,0),f.scalefac_scale==0?(G(f,g),w=!1):f.block_type==Y1.SHORT_TYPE&&l.subblock_gain>0&&(w=s1(l,f,g)||u1(f))),w||(l.mode_gr==2?w=h1.scale_bitcount(f):w=h1.scale_bitcount_lsf(l,f)),!w):!0)}this.outer_loop=function(M,f,h,g,a,l){var w=M.internal_flags,x=new ie,L=Z0(576),A=Z0(oe.SFBMAX),E=new Ta,_1,p=new C2,t=9999999,v=!1,y=!1,V=0;if(a1(w,f,l,a,g),w.noise_shaping==0)return 100;O.calc_noise(f,h,A,E,p),E.bits=f.part2_3_length,x.assign(f);var P=0;for(B0.arraycopy(g,0,L,0,576);!v;){do{var q=new Ta,R,n=255;if(w.substep_shaping&2?R=20:R=3,w.sfb21_extra&&(A[x.sfbmax]>1||x.block_type==Y1.SHORT_TYPE&&(A[x.sfbmax+1]>1||A[x.sfbmax+2]>1))||!Q(M,x,A,g,y))break;x.scalefac_scale!=0&&(n=254);var r=l-x.part2_length;if(r<=0)break;for(;(x.part2_3_length=h1.count_bits(w,g,x,p))>r&&x.global_gain<=n;)x.global_gain++;if(x.global_gain>n)break;if(E.over_count==0){for(;(x.part2_3_length=h1.count_bits(w,g,x,p))>t&&x.global_gain<=n;)x.global_gain++;if(x.global_gain>n)break}if(O.calc_noise(x,h,A,q,p),q.bits=x.part2_3_length,f.block_type!=Y1.SHORT_TYPE?_1=M.quant_comp:_1=M.quant_comp_short,_1=X(_1,E,q,x,A)?1:0,_1!=0)t=f.part2_3_length,E=q,f.assign(x),P=0,B0.arraycopy(g,0,L,0,576);else if(w.full_outer_loop==0&&(++P>R&&E.over_count==0||w.noise_shaping_amp==3&&y&&P>30||w.noise_shaping_amp==3&&y&&x.global_gain-V>15))break}while(x.global_gain+x.scalefac_scale<255);w.noise_shaping_amp==3?y?v=!0:(x.assign(f),B0.arraycopy(L,0,g,0,576),P=0,V=x.global_gain,y=!0):v=!0}return G0(f.global_gain+f.scalefac_scale<=255),M.VBR==_e.vbr_rh||M.VBR==_e.vbr_mtrh?B0.arraycopy(L,0,g,0,576):w.substep_shaping&1&&trancate_smallspectrums(w,f,h,g),E.over_count},this.iteration_finish_one=function(M,f,h){var g=M.l3_side,a=g.tt[f][h];h1.best_scalefac_store(M,f,h,g),M.use_best_huffman==1&&h1.best_huffman_divide(M,a),Z.ResvAdjust(M,a)},this.VBR_encode_granule=function(M,f,h,g,a,l,w){var x=M.internal_flags,L=new ie,A=Z0(576),E=w,_1=w+1,p=(w+l)/2,t,v,y=0,V=x.sfb21_extra;G0(E<=LameInternalFlags.MAX_BITS_PER_CHANNEL),N0.fill(L.l3_enc,0);do p>E-42?x.sfb21_extra=!1:x.sfb21_extra=V,v=outer_loop(M,f,h,g,a,p),v<=0?(y=1,_1=f.part2_3_length,L.assign(f),B0.arraycopy(g,0,A,0,576),w=_1-32,t=w-l,p=(w+l)/2):(l=p+32,t=w-l,p=(w+l)/2,y!=0&&(y=2,f.assign(L),B0.arraycopy(A,0,g,0,576)));while(t>12);x.sfb21_extra=V,y==2&&B0.arraycopy(L.l3_enc,0,f.l3_enc,0,576),G0(f.part2_3_length<=E)},this.get_framebits=function(M,f){var h=M.internal_flags;h.bitrate_index=h.VBR_min_bitrate;var g=k.getframebits(M);h.bitrate_index=1,g=k.getframebits(M);for(var a=1;a<=h.VBR_max_bitrate;a++){h.bitrate_index=a;var l=new MeanBits(g);f[a]=Z.ResvFrameBegin(M,l),g=l.bits}},this.VBR_old_prepare=function(M,f,h,g,a,l,w,x,L){var A=M.internal_flags,E,_1=0,p=1,t=0;A.bitrate_index=A.VBR_max_bitrate;var v=Z.ResvFrameBegin(M,new MeanBits(0))/A.mode_gr;get_framebits(M,l);for(var y=0;y<A.mode_gr;y++){var V=O.on_pe(M,f,x[y],v,y,0);A.mode_ext==Y1.MPG_MD_MS_LR&&(ms_convert(A.l3_side,y),O.reduce_side(x[y],h[y],v,V));for(var P=0;P<A.channels_out;++P){var q=A.l3_side.tt[y][P];q.block_type!=Y1.SHORT_TYPE?(_1=1.28/(1+Math.exp(3.5-f[y][P]/300))-.05,E=A.PSY.mask_adjust-_1):(_1=2.56/(1+Math.exp(3.5-f[y][P]/300))-.14,E=A.PSY.mask_adjust_short-_1),A.masking_lower=Math.pow(10,E*.1),init_outer_loop(A,q),L[y][P]=O.calc_xmin(M,g[y][P],q,a[y][P]),L[y][P]!=0&&(p=0),w[y][P]=126,t+=x[y][P]}}for(var y=0;y<A.mode_gr;y++)for(var P=0;P<A.channels_out;P++)t>l[A.VBR_max_bitrate]&&(x[y][P]*=l[A.VBR_max_bitrate],x[y][P]/=t),w[y][P]>x[y][P]&&(w[y][P]=x[y][P]);return p},this.bitpressure_strategy=function(M,f,h,g){for(var a=0;a<M.mode_gr;a++)for(var l=0;l<M.channels_out;l++){for(var w=M.l3_side.tt[a][l],x=f[a][l],L=0,A=0;A<w.psy_lmax;A++)x[L++]*=1+.029*A*A/Y1.SBMAX_l/Y1.SBMAX_l;if(w.block_type==Y1.SHORT_TYPE)for(var A=w.sfb_smin;A<Y1.SBMAX_s;A++)x[L++]*=1+.029*A*A/Y1.SBMAX_s/Y1.SBMAX_s,x[L++]*=1+.029*A*A/Y1.SBMAX_s/Y1.SBMAX_s,x[L++]*=1+.029*A*A/Y1.SBMAX_s/Y1.SBMAX_s;g[a][l]=0|Math.max(h[a][l],.9*g[a][l])}},this.VBR_new_prepare=function(M,f,h,g,a,l){var w=M.internal_flags,x=1,L=0,A=0,E;if(M.free_format){w.bitrate_index=0;var _1=new MeanBits(L);E=Z.ResvFrameBegin(M,_1),L=_1.bits,a[0]=E}else{w.bitrate_index=w.VBR_max_bitrate;var _1=new MeanBits(L);Z.ResvFrameBegin(M,_1),L=_1.bits,get_framebits(M,a),E=a[w.VBR_max_bitrate]}for(var p=0;p<w.mode_gr;p++){O.on_pe(M,f,l[p],L,p,0),w.mode_ext==Y1.MPG_MD_MS_LR&&ms_convert(w.l3_side,p);for(var t=0;t<w.channels_out;++t){var v=w.l3_side.tt[p][t];w.masking_lower=Math.pow(10,w.PSY.mask_adjust*.1),init_outer_loop(w,v),O.calc_xmin(M,h[p][t],v,g[p][t])!=0&&(x=0),A+=l[p][t]}}for(var p=0;p<w.mode_gr;p++)for(var t=0;t<w.channels_out;t++)A>E&&(l[p][t]*=E,l[p][t]/=A);return x},this.calc_target_bits=function(M,f,h,g,a,l){var w=M.internal_flags,x=w.l3_side,L,A,E,_1,p=0;w.bitrate_index=w.VBR_max_bitrate;var t=new MeanBits(p);for(l[0]=Z.ResvFrameBegin(M,t),p=t.bits,w.bitrate_index=1,p=k.getframebits(M)-w.sideinfo_len*8,a[0]=p/(w.mode_gr*w.channels_out),p=M.VBR_mean_bitrate_kbps*M.framesize*1e3,w.substep_shaping&1&&(p*=1.09),p/=M.out_samplerate,p-=w.sideinfo_len*8,p/=w.mode_gr*w.channels_out,L=.93+.07*(11-M.compression_ratio)/(11-5.5),L<.9&&(L=.9),L>1&&(L=1),A=0;A<w.mode_gr;A++){var v=0;for(E=0;E<w.channels_out;E++){if(g[A][E]=int(L*p),f[A][E]>700){var y=int((f[A][E]-700)/1.4),V=x.tt[A][E];g[A][E]=int(L*p),V.block_type==Y1.SHORT_TYPE&&y<p/2&&(y=p/2),y>p*3/2?y=p*3/2:y<0&&(y=0),g[A][E]+=y}g[A][E]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(g[A][E]=LameInternalFlags.MAX_BITS_PER_CHANNEL),v+=g[A][E]}if(v>LameInternalFlags.MAX_BITS_PER_GRANULE)for(E=0;E<w.channels_out;++E)g[A][E]*=LameInternalFlags.MAX_BITS_PER_GRANULE,g[A][E]/=v}if(w.mode_ext==Y1.MPG_MD_MS_LR)for(A=0;A<w.mode_gr;A++)O.reduce_side(g[A],h[A],p*w.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(_1=0,A=0;A<w.mode_gr;A++)for(E=0;E<w.channels_out;E++)g[A][E]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(g[A][E]=LameInternalFlags.MAX_BITS_PER_CHANNEL),_1+=g[A][E];if(_1>l[0])for(A=0;A<w.mode_gr;A++)for(E=0;E<w.channels_out;E++)g[A][E]*=l[0],g[A][E]/=_1}}var q2=j2,F2=Q1,le=F2.assert;function Z2(){var k;this.setModules=function(Z){k=Z},this.ResvFrameBegin=function(Z,O){var J=Z.internal_flags,h1,W=J.l3_side,z=k.getframebits(Z);O.bits=(z-J.sideinfo_len*8)/J.mode_gr;var C=8*256*J.mode_gr-8;Z.brate>320?h1=8*int(Z.brate*1e3/(Z.out_samplerate/1152)/8+.5):(h1=8*1440,Z.strict_ISO&&(h1=8*int(32e4/(Z.out_samplerate/1152)/8+.5))),J.ResvMax=h1-z,J.ResvMax>C&&(J.ResvMax=C),(J.ResvMax<0||Z.disable_reservoir)&&(J.ResvMax=0);var a1=O.bits*J.mode_gr+Math.min(J.ResvSize,J.ResvMax);return a1>h1&&(a1=h1),le(J.ResvMax%8==0),le(J.ResvMax>=0),W.resvDrain_pre=0,J.pinfo!=null&&(J.pinfo.mean_bits=O.bits/2,J.pinfo.resvsize=J.ResvSize),a1},this.ResvMaxBits=function(Z,O,J,h1){var W=Z.internal_flags,z,C=W.ResvSize,a1=W.ResvMax;h1!=0&&(C+=O),W.substep_shaping&1&&(a1*=.9),J.bits=O,C*10>a1*9?(z=C-a1*9/10,J.bits+=z,W.substep_shaping|=128):(z=0,W.substep_shaping&=127,!Z.disable_reservoir&&!(W.substep_shaping&1)&&(J.bits-=.1*O));var u1=C<W.ResvMax*6/10?C:W.ResvMax*6/10;return u1-=z,u1<0&&(u1=0),u1},this.ResvAdjust=function(Z,O){Z.ResvSize-=O.part2_3_length+O.part2_length},this.ResvFrameEnd=function(Z,O){var J,h1=Z.l3_side;Z.ResvSize+=O*Z.mode_gr;var W=0;h1.resvDrain_post=0,h1.resvDrain_pre=0,(J=Z.ResvSize%8)!=0&&(W+=J),J=Z.ResvSize-W-Z.ResvMax,J>0&&(W+=J);{var z=Math.min(h1.main_data_begin*8,W)/8;h1.resvDrain_pre+=8*z,W-=8*z,Z.ResvSize-=8*z,h1.main_data_begin-=z}h1.resvDrain_post+=W,Z.ResvSize-=W}}var G2=Z2;function Q2(){var k="http://www.mp3dev.org/",Z=3,O=98,J=4,h1=0,W=93;this.getLameVersion=function(){return Z+"."+O+"."+J},this.getLameShortVersion=function(){return Z+"."+O+"."+J},this.getLameVeryShortVersion=function(){return"LAME"+Z+"."+O+"r"},this.getPsyVersion=function(){return h1+"."+W},this.getLameUrl=function(){return k},this.getLameOsBitness=function(){return"32bits"}}var z2=Q2,Y0=Q1,W2=Y0.System,ka=Y0.VbrMode,fe=Y0.ShortBlock,K2=Y0.Arrays,ta=Y0.new_byte,J2=Y0.assert;Q0.NUMTOCENTRIES=100;Q0.MAXFRAMESIZE=2880;function Q0(){var k,Z,O;this.setModules=function(p,t,v){k=p,Z=t,O=v};var J=1,h1=2,W=4,z=8,C=Q0.NUMTOCENTRIES,a1=Q0.MAXFRAMESIZE,u1=C+4+4+4+4+4,d=u1+9+1+1+8+1+1+3+1+1+2+4+2+2,b=128,X=64,r1=32,G=null,s1="Xing",Q="Info",M=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function f(p,t){if(p.nVbrNumFrames++,p.sum+=t,p.seen++,!(p.seen<p.want)&&(p.pos<p.size&&(p.bag[p.pos]=p.sum,p.pos++,p.seen=0),p.pos==p.size)){for(var v=1;v<p.size;v+=2)p.bag[v/2]=p.bag[v];p.want*=2,p.pos/=2}}function h(p,t){if(!(p.pos<=0))for(var v=1;v<C;++v){var y=v/C,V,P,q=0|Math.floor(y*p.pos);q>p.pos-1&&(q=p.pos-1),V=p.bag[q],P=p.sum;var R=0|256*V/P;R>255&&(R=255),t[v]=255&R}}this.addVbrFrame=function(p){var t=p.internal_flags,v=Tables.bitrate_table[p.version][t.bitrate_index];J2(t.VBR_seek_table.bag!=null),f(t.VBR_seek_table,v)};function g(p,t){var v=p[t+0]&255;return v<<=8,v|=p[t+1]&255,v<<=8,v|=p[t+2]&255,v<<=8,v|=p[t+3]&255,v}function a(p,t,v){p[t+0]=255&(v>>24&255),p[t+1]=255&(v>>16&255),p[t+2]=255&(v>>8&255),p[t+3]=255&(v&255)}function l(p,t,v){p[t+0]=255&(v>>8&255),p[t+1]=255&(v&255)}function w(p,t){return new String(p,t,s1.length(),G).equals(s1)||new String(p,t,Q.length(),G).equals(Q)}function x(p,t,v){return 255&(p<<t|v&~(-1<<t))}function L(p,t){var v=p.internal_flags;t[0]=x(t[0],8,255),t[1]=x(t[1],3,7),t[1]=x(t[1],1,p.out_samplerate<16e3?0:1),t[1]=x(t[1],1,p.version),t[1]=x(t[1],2,1),t[1]=x(t[1],1,p.error_protection?0:1),t[2]=x(t[2],4,v.bitrate_index),t[2]=x(t[2],2,v.samplerate_index),t[2]=x(t[2],1,0),t[2]=x(t[2],1,p.extension),t[3]=x(t[3],2,p.mode.ordinal()),t[3]=x(t[3],2,v.mode_ext),t[3]=x(t[3],1,p.copyright),t[3]=x(t[3],1,p.original),t[3]=x(t[3],2,p.emphasis),t[0]=255;var y=255&(t[1]&241),V;p.version==1?V=b:p.out_samplerate<16e3?V=r1:V=X,p.VBR==ka.vbr_off&&(V=p.brate);var P;p.free_format?P=0:P=255&16*k.BitrateIndex(V,p.version,p.out_samplerate),p.version==1?(t[1]=255&(y|10),y=255&(t[2]&13),t[2]=255&(P|y)):(t[1]=255&(y|2),y=255&(t[2]&13),t[2]=255&(P|y))}this.getVbrTag=function(p){var t=new VBRTagData,v=0;t.flags=0;var y=p[v+1]>>3&1,V=p[v+2]>>2&3,P=p[v+3]>>6&3,q=p[v+2]>>4&15;if(q=Tables.bitrate_table[y][q],p[v+1]>>4==14?t.samprate=Tables.samplerate_table[2][V]:t.samprate=Tables.samplerate_table[y][V],y!=0?P!=3?v+=36:v+=21:P!=3?v+=21:v+=13,!w(p,v))return null;v+=4,t.hId=y;var R=t.flags=g(p,v);if(v+=4,R&J&&(t.frames=g(p,v),v+=4),R&h1&&(t.bytes=g(p,v),v+=4),R&W){if(t.toc!=null)for(var n=0;n<C;n++)t.toc[n]=p[v+n];v+=C}t.vbrScale=-1,R&z&&(t.vbrScale=g(p,v),v+=4),t.headersize=(y+1)*72e3*q/t.samprate,v+=21;var r=p[v+0]<<4;r+=p[v+1]>>4;var e=(p[v+1]&15)<<8;return e+=p[v+2]&255,(r<0||r>3e3)&&(r=-1),(e<0||e>3e3)&&(e=-1),t.encDelay=r,t.encPadding=e,t},this.InitVbrTag=function(p){var t=p.internal_flags,v;p.version==1?v=b:p.out_samplerate<16e3?v=r1:v=X,p.VBR==ka.vbr_off&&(v=p.brate);var y=(p.version+1)*72e3*v/p.out_samplerate,V=t.sideinfo_len+d;if(t.VBR_seek_table.TotalFrameSize=y,y<V||y>a1){p.bWriteVbrTag=!1;return}t.VBR_seek_table.nVbrNumFrames=0,t.VBR_seek_table.nBytesWritten=0,t.VBR_seek_table.sum=0,t.VBR_seek_table.seen=0,t.VBR_seek_table.want=1,t.VBR_seek_table.pos=0,t.VBR_seek_table.bag==null&&(t.VBR_seek_table.bag=new int[400],t.VBR_seek_table.size=400);var P=ta(a1);L(p,P);for(var q=t.VBR_seek_table.TotalFrameSize,R=0;R<q;++R)Z.add_dummy_byte(p,P[R]&255,1)};function A(p,t){var v=t^p;return t=t>>8^M[v&255],t}this.updateMusicCRC=function(p,t,v,y){for(var V=0;V<y;++V)p[0]=A(t[v+V],p[0])};function E(p,t,v,y,V){var P=p.internal_flags,q=0,R=p.encoder_delay,n=p.encoder_padding,r=100-10*p.VBR_q-p.quality,e=O.getLameVeryShortVersion(),_,u=0,H,U=[1,5,3,2,4,0,3],B=0|(p.lowpassfreq/100+.5>255?255:p.lowpassfreq/100+.5),Y=0,n1=0,c1=0,g1=p.internal_flags.noise_shaping,w1=0,d1=0,M1=0,T1=0,j1=0,h0=(p.exp_nspsytune&1)!=0,s=(p.exp_nspsytune&2)!=0,i=!1,v1=!1,R1=p.internal_flags.nogap_total,I1=p.internal_flags.nogap_current,E1=p.ATHtype,k1=0,B1;switch(p.VBR){case vbr_abr:B1=p.VBR_mean_bitrate_kbps;break;case vbr_off:B1=p.brate;break;default:B1=p.VBR_min_bitrate_kbps}switch(p.VBR.ordinal()<U.length?_=U[p.VBR.ordinal()]:_=0,H=16*u+_,P.findReplayGain&&(P.RadioGain>510&&(P.RadioGain=510),P.RadioGain<-510&&(P.RadioGain=-510),n1=8192,n1|=3072,P.RadioGain>=0?n1|=P.RadioGain:(n1|=512,n1|=-P.RadioGain)),P.findPeakSample&&(Y=Math.abs(0|P.PeakSample/32767*Math.pow(2,23)+.5)),R1!=-1&&(I1>0&&(v1=!0),I1<R1-1&&(i=!0)),k1=E1+((h0?1:0)<<4)+((s?1:0)<<5)+((i?1:0)<<6)+((v1?1:0)<<7),r<0&&(r=0),p.mode){case MONO:w1=0;break;case STEREO:w1=1;break;case DUAL_CHANNEL:w1=2;break;case JOINT_STEREO:p.force_ms?w1=4:w1=3;break;case NOT_SET:default:w1=7;break}p.in_samplerate<=32e3?M1=0:p.in_samplerate==48e3?M1=2:p.in_samplerate>48e3?M1=3:M1=1,(p.short_blocks==fe.short_block_forced||p.short_blocks==fe.short_block_dispensed||p.lowpassfreq==-1&&p.highpassfreq==-1||p.scale_left<p.scale_right||p.scale_left>p.scale_right||p.disable_reservoir&&p.brate<320||p.noATH||p.ATHonly||E1==0||p.in_samplerate<=32e3)&&(d1=1),T1=g1+(w1<<2)+(d1<<5)+(M1<<6),j1=P.nMusicCRC,a(v,y+q,r),q+=4;for(var L1=0;L1<9;L1++)v[y+q+L1]=255&e.charAt(L1);q+=9,v[y+q]=255&H,q++,v[y+q]=255&B,q++,a(v,y+q,Y),q+=4,l(v,y+q,n1),q+=2,l(v,y+q,c1),q+=2,v[y+q]=255&k1,q++,B1>=255?v[y+q]=255:v[y+q]=255&B1,q++,v[y+q]=255&R>>4,v[y+q+1]=255&(R<<4)+(n>>8),v[y+q+2]=255&n,q+=3,v[y+q]=255&T1,q++,v[y+q++]=0,l(v,y+q,p.preset),q+=2,a(v,y+q,t),q+=4,l(v,y+q,j1),q+=2;for(var P1=0;P1<q;P1++)V=A(v[y+P1],V);return l(v,y+q,V),q+=2,q}function _1(p){p.seek(0);var t=ta(10);p.readFully(t);var v;return new String(t,"ISO-8859-1").startsWith("ID3")?v=0:v=((t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127)+t.length,v}this.getLameTagFrame=function(p,t){var v=p.internal_flags;if(!p.bWriteVbrTag||v.Class_ID!=Lame.LAME_ID||v.VBR_seek_table.pos<=0)return 0;if(t.length<v.VBR_seek_table.TotalFrameSize)return v.VBR_seek_table.TotalFrameSize;K2.fill(t,0,v.VBR_seek_table.TotalFrameSize,0),L(p,t);var y=ta(C);if(p.free_format)for(var V=1;V<C;++V)y[V]=255&255*V/100;else h(v.VBR_seek_table,y);var P=v.sideinfo_len;p.error_protection&&(P-=2),p.VBR==ka.vbr_off?(t[P++]=255&Q.charAt(0),t[P++]=255&Q.charAt(1),t[P++]=255&Q.charAt(2),t[P++]=255&Q.charAt(3)):(t[P++]=255&s1.charAt(0),t[P++]=255&s1.charAt(1),t[P++]=255&s1.charAt(2),t[P++]=255&s1.charAt(3)),a(t,P,J+h1+W+z),P+=4,a(t,P,v.VBR_seek_table.nVbrNumFrames),P+=4;var q=v.VBR_seek_table.nBytesWritten+v.VBR_seek_table.TotalFrameSize;a(t,P,0|q),P+=4,W2.arraycopy(y,0,t,P,y.length),P+=y.length,p.error_protection&&Z.CRC_writeheader(v,t);for(var R=0,V=0;V<P;V++)R=A(t[V],R);return P+=E(p,q,t,P,R),v.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(p,t){var v=p.internal_flags;if(v.VBR_seek_table.pos<=0||(t.seek(t.length()),t.length()==0))return-1;var y=_1(t);t.seek(y);var V=ta(a1),P=getLameTagFrame(p,V);return P>V.length?-1:(P<1||t.write(V,0,P),0)}}var U2=Q0,De=Q1,ce=De.new_byte,$2=De.assert,at=Ia(),et=V2,tt=xe,st=Ve(),rt=q2,nt=Ie(),_t=G2,it=W0,ot=Va();t0();var lt=z2,ft=U2;function ct(){this.setModules=function(k,Z){}}function ht(){this.setModules=function(k,Z,O){}}function ut(){}function bt(){this.setModules=function(k,Z){}}function pt(k,Z,O){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),k=1,Z=44100,O=128);var J=new at,h1=new ct,W=new tt,z=new ot,C=new et,a1=new st,u1=new rt,d=new ft,b=new lt,X=new bt,r1=new _t,G=new nt,s1=new ht,Q=new ut;J.setModules(W,z,C,a1,u1,d,b,X,Q),z.setModules(W,Q,b,d),X.setModules(z,b),C.setModules(J),u1.setModules(z,r1,a1,G),a1.setModules(G,r1,J.enc.psy),r1.setModules(z),G.setModules(a1),d.setModules(J,z,b),h1.setModules(s1,Q),s1.setModules(b,X,C);var M=J.lame_init();M.num_channels=k,M.in_samplerate=Z,M.brate=O,M.mode=it.STEREO,M.quality=3,M.bWriteVbrTag=!1,M.disable_reservoir=!0,M.write_id3tag_automatic=!1,J.lame_init_params(M);var f=1152,h=0|1.25*f+7200,g=ce(h);this.encodeBuffer=function(a,l){k==1&&(l=a),$2(a.length==l.length),a.length>f&&(f=a.length,h=0|1.25*f+7200,g=ce(h));var w=J.lame_encode_buffer(M,a,l,a.length,g,0,h);return new Int8Array(g.subarray(0,w))},this.flush=function(){var a=J.lame_encode_flush(M,g,0,h);return new Int8Array(g.subarray(0,a))}}function g0(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function _a(k){return k.charCodeAt(0)<<24|k.charCodeAt(1)<<16|k.charCodeAt(2)<<8|k.charCodeAt(3)}g0.RIFF=_a("RIFF");g0.WAVE=_a("WAVE");g0.fmt_=_a("fmt ");g0.data=_a("data");g0.readHeader=function(k){var Z=new g0,O=k.getUint32(0,!1);if(g0.RIFF==O&&(k.getUint32(4,!0),g0.WAVE==k.getUint32(8,!1)&&g0.fmt_==k.getUint32(12,!1))){var J=k.getUint32(16,!0),h1=20;switch(J){case 16:case 18:Z.channels=k.getUint16(h1+2,!0),Z.sampleRate=k.getUint32(h1+4,!0);break;default:throw"extended fmt chunk not implemented"}h1+=J;for(var W=g0.data,z=0;W!=O&&(O=k.getUint32(h1,!1),z=k.getUint32(h1+4,!0),W!=O);)h1+=z+8;return Z.dataLen=z,Z.dataOffset=h1+8,Z}};var mt=he.Mp3Encoder=pt,vt=he.WavHeader=g0;export{mt as Mp3Encoder,vt as WavHeader,he as default};
